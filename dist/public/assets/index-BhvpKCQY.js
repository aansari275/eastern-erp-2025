var I1=n=>{throw TypeError(n)};var Kp=(n,e,t)=>e.has(n)||I1("Cannot "+t);var j=(n,e,t)=>(Kp(n,e,"read from private field"),t?t.call(n):e.get(n)),fe=(n,e,t)=>e.has(n)?I1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),le=(n,e,t,r)=>(Kp(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),be=(n,e,t)=>(Kp(n,e,"access private method"),t);var Gu=(n,e,t,r)=>({set _(s){le(n,e,s,t)},get _(){return j(n,e,r)}});function ZI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function IS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var RS={exports:{}},If={},DS={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hu=Symbol.for("react.element"),eR=Symbol.for("react.portal"),tR=Symbol.for("react.fragment"),nR=Symbol.for("react.strict_mode"),rR=Symbol.for("react.profiler"),sR=Symbol.for("react.provider"),iR=Symbol.for("react.context"),oR=Symbol.for("react.forward_ref"),aR=Symbol.for("react.suspense"),lR=Symbol.for("react.memo"),cR=Symbol.for("react.lazy"),R1=Symbol.iterator;function uR(n){return n===null||typeof n!="object"?null:(n=R1&&n[R1]||n["@@iterator"],typeof n=="function"?n:null)}var NS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MS=Object.assign,jS={};function ol(n,e,t){this.props=n,this.context=e,this.refs=jS,this.updater=t||NS}ol.prototype.isReactComponent={};ol.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ol.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function LS(){}LS.prototype=ol.prototype;function av(n,e,t){this.props=n,this.context=e,this.refs=jS,this.updater=t||NS}var lv=av.prototype=new LS;lv.constructor=av;MS(lv,ol.prototype);lv.isPureReactComponent=!0;var D1=Array.isArray,FS=Object.prototype.hasOwnProperty,cv={current:null},US={key:!0,ref:!0,__self:!0,__source:!0};function BS(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)FS.call(e,r)&&!US.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:hu,type:n,key:i,ref:o,props:s,_owner:cv.current}}function hR(n,e){return{$$typeof:hu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function uv(n){return typeof n=="object"&&n!==null&&n.$$typeof===hu}function dR(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var N1=/\/+/g;function qp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dR(""+n.key):e.toString(36)}function Xh(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case hu:case eR:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+qp(o,0):r,D1(s)?(t="",n!=null&&(t=n.replace(N1,"$&/")+"/"),Xh(s,e,t,"",function(c){return c})):s!=null&&(uv(s)&&(s=hR(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(N1,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",D1(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+qp(i,a);o+=Xh(i,e,t,l,s)}else if(l=uR(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+qp(i,a++),o+=Xh(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xu(n,e,t){if(n==null)return n;var r=[],s=0;return Xh(n,r,"","",function(i){return e.call(t,i,s++)}),r}function fR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Yt={current:null},Yh={transition:null},pR={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Yh,ReactCurrentOwner:cv};function zS(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Xu,forEach:function(n,e,t){Xu(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Xu(n,function(){e++}),e},toArray:function(n){return Xu(n,function(e){return e})||[]},only:function(n){if(!uv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Te.Component=ol;Te.Fragment=tR;Te.Profiler=rR;Te.PureComponent=av;Te.StrictMode=nR;Te.Suspense=aR;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pR;Te.act=zS;Te.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=MS({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=cv.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)FS.call(e,l)&&!US.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hu,type:n.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(n){return n={$$typeof:iR,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sR,_context:n},n.Consumer=n};Te.createElement=BS;Te.createFactory=function(n){var e=BS.bind(null,n);return e.type=n,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(n){return{$$typeof:oR,render:n}};Te.isValidElement=uv;Te.lazy=function(n){return{$$typeof:cR,_payload:{_status:-1,_result:n},_init:fR}};Te.memo=function(n,e){return{$$typeof:lR,type:n,compare:e===void 0?null:e}};Te.startTransition=function(n){var e=Yh.transition;Yh.transition={};try{n()}finally{Yh.transition=e}};Te.unstable_act=zS;Te.useCallback=function(n,e){return Yt.current.useCallback(n,e)};Te.useContext=function(n){return Yt.current.useContext(n)};Te.useDebugValue=function(){};Te.useDeferredValue=function(n){return Yt.current.useDeferredValue(n)};Te.useEffect=function(n,e){return Yt.current.useEffect(n,e)};Te.useId=function(){return Yt.current.useId()};Te.useImperativeHandle=function(n,e,t){return Yt.current.useImperativeHandle(n,e,t)};Te.useInsertionEffect=function(n,e){return Yt.current.useInsertionEffect(n,e)};Te.useLayoutEffect=function(n,e){return Yt.current.useLayoutEffect(n,e)};Te.useMemo=function(n,e){return Yt.current.useMemo(n,e)};Te.useReducer=function(n,e,t){return Yt.current.useReducer(n,e,t)};Te.useRef=function(n){return Yt.current.useRef(n)};Te.useState=function(n){return Yt.current.useState(n)};Te.useSyncExternalStore=function(n,e,t){return Yt.current.useSyncExternalStore(n,e,t)};Te.useTransition=function(){return Yt.current.useTransition()};Te.version="18.3.1";DS.exports=Te;var y=DS.exports;const $s=IS(y),VS=ZI({__proto__:null,default:$s},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gR=y,mR=Symbol.for("react.element"),vR=Symbol.for("react.fragment"),yR=Object.prototype.hasOwnProperty,xR=gR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wR={key:!0,ref:!0,__self:!0,__source:!0};function $S(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yR.call(e,r)&&!wR.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mR,type:n,key:i,ref:o,props:s,_owner:xR.current}}If.Fragment=vR;If.jsx=$S;If.jsxs=$S;RS.exports=If;var p=RS.exports,WS={exports:{}},wn={},HS={exports:{}},GS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,$){var J=U.length;U.push($);e:for(;0<J;){var ue=J-1>>>1,q=U[ue];if(0<s(q,$))U[ue]=$,U[J]=q,J=ue;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],J=U.pop();if(J!==$){U[0]=J;e:for(var ue=0,q=U.length,re=q>>>1;ue<re;){var V=2*(ue+1)-1,K=U[V],Y=V+1,X=U[Y];if(0>s(K,J))Y<q&&0>s(X,K)?(U[ue]=X,U[Y]=J,ue=Y):(U[ue]=K,U[V]=J,ue=V);else if(Y<q&&0>s(X,J))U[ue]=X,U[Y]=J,ue=Y;else break e}}return $}function s(U,$){var J=U.sortIndex-$.sortIndex;return J!==0?J:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,g=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var $=t(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=U)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function k(U){if(v=!1,S(U),!m)if(t(l)!==null)m=!0,Q(O);else{var $=t(c);$!==null&&oe(k,$.startTime-U)}}function O(U,$){m=!1,v&&(v=!1,x(T),T=-1),g=!0;var J=d;try{for(S($),f=t(l);f!==null&&(!(f.expirationTime>$)||U&&!D());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,d=f.priorityLevel;var q=ue(f.expirationTime<=$);$=n.unstable_now(),typeof q=="function"?f.callback=q:f===t(l)&&r(l),S($)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var V=t(c);V!==null&&oe(k,V.startTime-$),re=!1}return re}finally{f=null,d=J,g=!1}}var M=!1,E=null,T=-1,P=5,A=-1;function D(){return!(n.unstable_now()-A<P)}function N(){if(E!==null){var U=n.unstable_now();A=U;var $=!0;try{$=E(!0,U)}finally{$?R():(M=!1,E=null)}}else M=!1}var R;if(typeof w=="function")R=function(){w(N)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ne=H.port2;H.port1.onmessage=N,R=function(){ne.postMessage(null)}}else R=function(){b(N,0)};function Q(U){E=U,M||(M=!0,R())}function oe(U,$){T=b(function(){U(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,Q(O))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var J=d;d=$;try{return U()}finally{d=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=d;d=U;try{return $()}finally{d=J}},n.unstable_scheduleCallback=function(U,$,J){var ue=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ue+J:ue):J=ue,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=J+q,U={id:u++,callback:$,priorityLevel:U,startTime:J,expirationTime:q,sortIndex:-1},J>ue?(U.sortIndex=J,e(c,U),t(l)===null&&U===t(c)&&(v?(x(T),T=-1):v=!0,oe(k,J-ue))):(U.sortIndex=q,e(l,U),m||g||(m=!0,Q(O))),U},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(U){var $=d;return function(){var J=d;d=$;try{return U.apply(this,arguments)}finally{d=J}}}})(GS);HS.exports=GS;var _R=HS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR=y,yn=_R;function Z(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XS=new Set,Ac={};function Do(n,e){Wa(n,e),Wa(n+"Capture",e)}function Wa(n,e){for(Ac[n]=e,n=0;n<e.length;n++)XS.add(e[n])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cm=Object.prototype.hasOwnProperty,SR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M1={},j1={};function CR(n){return cm.call(j1,n)?!0:cm.call(M1,n)?!1:SR.test(n)?j1[n]=!0:(M1[n]=!0,!1)}function TR(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ER(n,e,t,r){if(e===null||typeof e>"u"||TR(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ct[n]=new Kt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ct[e]=new Kt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ct[n]=new Kt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ct[n]=new Kt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ct[n]=new Kt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ct[n]=new Kt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ct[n]=new Kt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ct[n]=new Kt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ct[n]=new Kt(n,5,!1,n.toLowerCase(),null,!1,!1)});var hv=/[\-:]([a-z])/g;function dv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(hv,dv);Ct[e]=new Kt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(hv,dv);Ct[e]=new Kt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(hv,dv);Ct[e]=new Kt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ct[n]=new Kt(n,1,!1,n.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ct[n]=new Kt(n,1,!1,n.toLowerCase(),null,!0,!0)});function fv(n,e,t,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ER(e,t,s,r)&&(t=null),r||s===null?CR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var As=bR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),pv=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),YS=Symbol.for("react.provider"),KS=Symbol.for("react.context"),gv=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),dm=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),Gs=Symbol.for("react.lazy"),qS=Symbol.for("react.offscreen"),L1=Symbol.iterator;function Vl(n){return n===null||typeof n!="object"?null:(n=L1&&n[L1]||n["@@iterator"],typeof n=="function"?n:null)}var Je=Object.assign,Qp;function tc(n){if(Qp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Qp=e&&e[1]||""}return`
`+Qp+n}var Jp=!1;function Zp(n,e){if(!n||Jp)return"";Jp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?tc(n):""}function kR(n){switch(n.tag){case 5:return tc(n.type);case 16:return tc("Lazy");case 13:return tc("Suspense");case 19:return tc("SuspenseList");case 0:case 2:case 15:return n=Zp(n.type,!1),n;case 11:return n=Zp(n.type.render,!1),n;case 1:return n=Zp(n.type,!0),n;default:return""}}function fm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ta:return"Fragment";case ea:return"Portal";case um:return"Profiler";case pv:return"StrictMode";case hm:return"Suspense";case dm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case KS:return(n.displayName||"Context")+".Consumer";case YS:return(n._context.displayName||"Context")+".Provider";case gv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case mv:return e=n.displayName||null,e!==null?e:fm(n.type)||"Memo";case Gs:e=n._payload,n=n._init;try{return fm(n(e))}catch{}}return null}function PR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fm(e);case 8:return e===pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ci(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function QS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OR(n){var e=QS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ku(n){n._valueTracker||(n._valueTracker=OR(n))}function JS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=QS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function bd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pm(n,e){var t=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function F1(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ci(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZS(n,e){e=e.checked,e!=null&&fv(n,"checked",e,!1)}function gm(n,e){ZS(n,e);var t=Ci(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?mm(n,e.type,t):e.hasOwnProperty("defaultValue")&&mm(n,e.type,Ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function U1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function mm(n,e,t){(e!=="number"||bd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var nc=Array.isArray;function ga(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ci(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function vm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function B1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Z(92));if(nc(t)){if(1<t.length)throw Error(Z(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ci(t)}}function eC(n,e){var t=Ci(e.value),r=Ci(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function z1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function tC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?tC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qu,nC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qu.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ic(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AR=["Webkit","ms","Moz","O"];Object.keys(uc).forEach(function(n){AR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),uc[e]=uc[n]})});function rC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||uc.hasOwnProperty(n)&&uc[n]?(""+e).trim():e+"px"}function sC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=rC(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var IR=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xm(n,e){if(e){if(IR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function wm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function vv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bm=null,ma=null,va=null;function V1(n){if(n=pu(n)){if(typeof bm!="function")throw Error(Z(280));var e=n.stateNode;e&&(e=jf(e),bm(n.stateNode,n.type,e))}}function iC(n){ma?va?va.push(n):va=[n]:ma=n}function oC(){if(ma){var n=ma,e=va;if(va=ma=null,V1(n),e)for(n=0;n<e.length;n++)V1(e[n])}}function aC(n,e){return n(e)}function lC(){}var eg=!1;function cC(n,e,t){if(eg)return n(e,t);eg=!0;try{return aC(n,e,t)}finally{eg=!1,(ma!==null||va!==null)&&(lC(),oC())}}function Rc(n,e){var t=n.stateNode;if(t===null)return null;var r=jf(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Z(231,e,typeof t));return t}var Sm=!1;if(vs)try{var $l={};Object.defineProperty($l,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",$l,$l),window.removeEventListener("test",$l,$l)}catch{Sm=!1}function RR(n,e,t,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var hc=!1,Sd=null,Cd=!1,Cm=null,DR={onError:function(n){hc=!0,Sd=n}};function NR(n,e,t,r,s,i,o,a,l){hc=!1,Sd=null,RR.apply(DR,arguments)}function MR(n,e,t,r,s,i,o,a,l){if(NR.apply(this,arguments),hc){if(hc){var c=Sd;hc=!1,Sd=null}else throw Error(Z(198));Cd||(Cd=!0,Cm=c)}}function No(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function uC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $1(n){if(No(n)!==n)throw Error(Z(188))}function jR(n){var e=n.alternate;if(!e){if(e=No(n),e===null)throw Error(Z(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return $1(s),n;if(i===r)return $1(s),e;i=i.sibling}throw Error(Z(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(t.alternate!==r)throw Error(Z(190))}if(t.tag!==3)throw Error(Z(188));return t.stateNode.current===t?n:e}function hC(n){return n=jR(n),n!==null?dC(n):null}function dC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=dC(n);if(e!==null)return e;n=n.sibling}return null}var fC=yn.unstable_scheduleCallback,W1=yn.unstable_cancelCallback,LR=yn.unstable_shouldYield,FR=yn.unstable_requestPaint,rt=yn.unstable_now,UR=yn.unstable_getCurrentPriorityLevel,yv=yn.unstable_ImmediatePriority,pC=yn.unstable_UserBlockingPriority,Td=yn.unstable_NormalPriority,BR=yn.unstable_LowPriority,gC=yn.unstable_IdlePriority,Rf=null,Ir=null;function zR(n){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(Rf,n,void 0,(n.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:WR,VR=Math.log,$R=Math.LN2;function WR(n){return n>>>=0,n===0?32:31-(VR(n)/$R|0)|0}var Qu=64,Ju=4194304;function rc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ed(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=rc(a):(i&=o,i!==0&&(r=rc(i)))}else o=t&~s,o!==0?r=rc(o):i!==0&&(r=rc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-or(e),s=1<<t,r|=n[t],e&=~s;return r}function HR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GR(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-or(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=HR(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function Tm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mC(){var n=Qu;return Qu<<=1,!(Qu&4194240)&&(Qu=64),n}function tg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function du(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-or(e),n[e]=t}function XR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-or(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function xv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-or(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Le=0;function vC(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yC,wv,xC,wC,_C,Em=!1,Zu=[],di=null,fi=null,pi=null,Dc=new Map,Nc=new Map,Ys=[],YR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H1(n,e){switch(n){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":Dc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nc.delete(e.pointerId)}}function Wl(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pu(e),e!==null&&wv(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function KR(n,e,t,r,s){switch(e){case"focusin":return di=Wl(di,n,e,t,r,s),!0;case"dragenter":return fi=Wl(fi,n,e,t,r,s),!0;case"mouseover":return pi=Wl(pi,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Dc.set(i,Wl(Dc.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Nc.set(i,Wl(Nc.get(i)||null,n,e,t,r,s)),!0}return!1}function bC(n){var e=Ki(n.target);if(e!==null){var t=No(e);if(t!==null){if(e=t.tag,e===13){if(e=uC(t),e!==null){n.blockedOn=e,_C(n.priority,function(){xC(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=km(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);_m=r,t.target.dispatchEvent(r),_m=null}else return e=pu(t),e!==null&&wv(e),n.blockedOn=t,!1;e.shift()}return!0}function G1(n,e,t){Kh(n)&&t.delete(e)}function qR(){Em=!1,di!==null&&Kh(di)&&(di=null),fi!==null&&Kh(fi)&&(fi=null),pi!==null&&Kh(pi)&&(pi=null),Dc.forEach(G1),Nc.forEach(G1)}function Hl(n,e){n.blockedOn===e&&(n.blockedOn=null,Em||(Em=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,qR)))}function Mc(n){function e(s){return Hl(s,n)}if(0<Zu.length){Hl(Zu[0],n);for(var t=1;t<Zu.length;t++){var r=Zu[t];r.blockedOn===n&&(r.blockedOn=null)}}for(di!==null&&Hl(di,n),fi!==null&&Hl(fi,n),pi!==null&&Hl(pi,n),Dc.forEach(e),Nc.forEach(e),t=0;t<Ys.length;t++)r=Ys[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ys.length&&(t=Ys[0],t.blockedOn===null);)bC(t),t.blockedOn===null&&Ys.shift()}var ya=As.ReactCurrentBatchConfig,kd=!0;function QR(n,e,t,r){var s=Le,i=ya.transition;ya.transition=null;try{Le=1,_v(n,e,t,r)}finally{Le=s,ya.transition=i}}function JR(n,e,t,r){var s=Le,i=ya.transition;ya.transition=null;try{Le=4,_v(n,e,t,r)}finally{Le=s,ya.transition=i}}function _v(n,e,t,r){if(kd){var s=km(n,e,t,r);if(s===null)hg(n,e,r,Pd,t),H1(n,r);else if(KR(s,n,e,t,r))r.stopPropagation();else if(H1(n,r),e&4&&-1<YR.indexOf(n)){for(;s!==null;){var i=pu(s);if(i!==null&&yC(i),i=km(n,e,t,r),i===null&&hg(n,e,r,Pd,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else hg(n,e,r,null,t)}}var Pd=null;function km(n,e,t,r){if(Pd=null,n=vv(r),n=Ki(n),n!==null)if(e=No(n),e===null)n=null;else if(t=e.tag,t===13){if(n=uC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Pd=n,null}function SC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UR()){case yv:return 1;case pC:return 4;case Td:case BR:return 16;case gC:return 536870912;default:return 16}default:return 16}}var li=null,bv=null,qh=null;function CC(){if(qh)return qh;var n,e=bv,t=e.length,r,s="value"in li?li.value:li.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return qh=s.slice(n,1<r?1-r:void 0)}function Qh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function eh(){return!0}function X1(){return!1}function _n(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eh:X1,this.isPropagationStopped=X1,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sv=_n(al),fu=Je({},al,{view:0,detail:0}),ZR=_n(fu),ng,rg,Gl,Df=Je({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gl&&(Gl&&n.type==="mousemove"?(ng=n.screenX-Gl.screenX,rg=n.screenY-Gl.screenY):rg=ng=0,Gl=n),ng)},movementY:function(n){return"movementY"in n?n.movementY:rg}}),Y1=_n(Df),eD=Je({},Df,{dataTransfer:0}),tD=_n(eD),nD=Je({},fu,{relatedTarget:0}),sg=_n(nD),rD=Je({},al,{animationName:0,elapsedTime:0,pseudoElement:0}),sD=_n(rD),iD=Je({},al,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oD=_n(iD),aD=Je({},al,{data:0}),K1=_n(aD),lD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hD(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=uD[n])?!!e[n]:!1}function Cv(){return hD}var dD=Je({},fu,{key:function(n){if(n.key){var e=lD[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Qh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cv,charCode:function(n){return n.type==="keypress"?Qh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fD=_n(dD),pD=Je({},Df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q1=_n(pD),gD=Je({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cv}),mD=_n(gD),vD=Je({},al,{propertyName:0,elapsedTime:0,pseudoElement:0}),yD=_n(vD),xD=Je({},Df,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wD=_n(xD),_D=[9,13,27,32],Tv=vs&&"CompositionEvent"in window,dc=null;vs&&"documentMode"in document&&(dc=document.documentMode);var bD=vs&&"TextEvent"in window&&!dc,TC=vs&&(!Tv||dc&&8<dc&&11>=dc),Q1=" ",J1=!1;function EC(n,e){switch(n){case"keyup":return _D.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var na=!1;function SD(n,e){switch(n){case"compositionend":return kC(e);case"keypress":return e.which!==32?null:(J1=!0,Q1);case"textInput":return n=e.data,n===Q1&&J1?null:n;default:return null}}function CD(n,e){if(na)return n==="compositionend"||!Tv&&EC(n,e)?(n=CC(),qh=bv=li=null,na=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TC&&e.locale!=="ko"?null:e.data;default:return null}}var TD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!TD[n.type]:e==="textarea"}function PC(n,e,t,r){iC(r),e=Od(e,"onChange"),0<e.length&&(t=new Sv("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var fc=null,jc=null;function ED(n){UC(n,0)}function Nf(n){var e=ia(n);if(JS(e))return n}function kD(n,e){if(n==="change")return e}var OC=!1;if(vs){var ig;if(vs){var og="oninput"in document;if(!og){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),og=typeof ew.oninput=="function"}ig=og}else ig=!1;OC=ig&&(!document.documentMode||9<document.documentMode)}function tw(){fc&&(fc.detachEvent("onpropertychange",AC),jc=fc=null)}function AC(n){if(n.propertyName==="value"&&Nf(jc)){var e=[];PC(e,jc,n,vv(n)),cC(ED,e)}}function PD(n,e,t){n==="focusin"?(tw(),fc=e,jc=t,fc.attachEvent("onpropertychange",AC)):n==="focusout"&&tw()}function OD(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nf(jc)}function AD(n,e){if(n==="click")return Nf(e)}function ID(n,e){if(n==="input"||n==="change")return Nf(e)}function RD(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ur=typeof Object.is=="function"?Object.is:RD;function Lc(n,e){if(ur(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!cm.call(e,s)||!ur(n[s],e[s]))return!1}return!0}function nw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rw(n,e){var t=nw(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nw(t)}}function IC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?IC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function RC(){for(var n=window,e=bd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=bd(n.document)}return e}function Ev(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function DD(n){var e=RC(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&IC(t.ownerDocument.documentElement,t)){if(r!==null&&Ev(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=rw(t,i);var o=rw(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ND=vs&&"documentMode"in document&&11>=document.documentMode,ra=null,Pm=null,pc=null,Om=!1;function sw(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Om||ra==null||ra!==bd(r)||(r=ra,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pc&&Lc(pc,r)||(pc=r,r=Od(Pm,"onSelect"),0<r.length&&(e=new Sv("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ra)))}function th(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var sa={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},ag={},DC={};vs&&(DC=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function Mf(n){if(ag[n])return ag[n];if(!sa[n])return n;var e=sa[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in DC)return ag[n]=e[t];return n}var NC=Mf("animationend"),MC=Mf("animationiteration"),jC=Mf("animationstart"),LC=Mf("transitionend"),FC=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(n,e){FC.set(n,e),Do(e,[n])}for(var lg=0;lg<iw.length;lg++){var cg=iw[lg],MD=cg.toLowerCase(),jD=cg[0].toUpperCase()+cg.slice(1);Ri(MD,"on"+jD)}Ri(NC,"onAnimationEnd");Ri(MC,"onAnimationIteration");Ri(jC,"onAnimationStart");Ri("dblclick","onDoubleClick");Ri("focusin","onFocus");Ri("focusout","onBlur");Ri(LC,"onTransitionEnd");Wa("onMouseEnter",["mouseout","mouseover"]);Wa("onMouseLeave",["mouseout","mouseover"]);Wa("onPointerEnter",["pointerout","pointerover"]);Wa("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LD=new Set("cancel close invalid load scroll toggle".split(" ").concat(sc));function ow(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,MR(r,e,void 0,n),n.currentTarget=null}function UC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ow(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ow(s,a,c),i=l}}}if(Cd)throw n=Cm,Cd=!1,Cm=null,n}function We(n,e){var t=e[Nm];t===void 0&&(t=e[Nm]=new Set);var r=n+"__bubble";t.has(r)||(BC(e,n,2,!1),t.add(r))}function ug(n,e,t){var r=0;e&&(r|=4),BC(t,n,r,e)}var nh="_reactListening"+Math.random().toString(36).slice(2);function Fc(n){if(!n[nh]){n[nh]=!0,XS.forEach(function(t){t!=="selectionchange"&&(LD.has(t)||ug(t,!1,n),ug(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[nh]||(e[nh]=!0,ug("selectionchange",!1,e))}}function BC(n,e,t,r){switch(SC(e)){case 1:var s=QR;break;case 4:s=JR;break;default:s=_v}t=s.bind(null,e,t,n),s=void 0,!Sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function hg(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ki(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}cC(function(){var c=i,u=vv(t),f=[];e:{var d=FC.get(n);if(d!==void 0){var g=Sv,m=n;switch(n){case"keypress":if(Qh(t)===0)break e;case"keydown":case"keyup":g=fD;break;case"focusin":m="focus",g=sg;break;case"focusout":m="blur",g=sg;break;case"beforeblur":case"afterblur":g=sg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=tD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=mD;break;case NC:case MC:case jC:g=sD;break;case LC:g=yD;break;case"scroll":g=ZR;break;case"wheel":g=wD;break;case"copy":case"cut":case"paste":g=oD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=q1}var v=(e&4)!==0,b=!v&&n==="scroll",x=v?d!==null?d+"Capture":null:d;v=[];for(var w=c,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,x!==null&&(k=Rc(w,x),k!=null&&v.push(Uc(w,k,S)))),b)break;w=w.return}0<v.length&&(d=new g(d,m,null,t,u),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",d&&t!==_m&&(m=t.relatedTarget||t.fromElement)&&(Ki(m)||m[ys]))break e;if((g||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=c,m=m?Ki(m):null,m!==null&&(b=No(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(v=Y1,k="onMouseLeave",x="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=q1,k="onPointerLeave",x="onPointerEnter",w="pointer"),b=g==null?d:ia(g),S=m==null?d:ia(m),d=new v(k,w+"leave",g,t,u),d.target=b,d.relatedTarget=S,k=null,Ki(u)===c&&(v=new v(x,w+"enter",m,t,u),v.target=S,v.relatedTarget=b,k=v),b=k,g&&m)t:{for(v=g,x=m,w=0,S=v;S;S=Xo(S))w++;for(S=0,k=x;k;k=Xo(k))S++;for(;0<w-S;)v=Xo(v),w--;for(;0<S-w;)x=Xo(x),S--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=Xo(v),x=Xo(x)}v=null}else v=null;g!==null&&aw(f,d,g,v,!1),m!==null&&b!==null&&aw(f,b,m,v,!0)}}e:{if(d=c?ia(c):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var O=kD;else if(Z1(d))if(OC)O=ID;else{O=OD;var M=PD}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(O=AD);if(O&&(O=O(n,c))){PC(f,O,t,u);break e}M&&M(n,d,c),n==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&mm(d,"number",d.value)}switch(M=c?ia(c):window,n){case"focusin":(Z1(M)||M.contentEditable==="true")&&(ra=M,Pm=c,pc=null);break;case"focusout":pc=Pm=ra=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,sw(f,t,u);break;case"selectionchange":if(ND)break;case"keydown":case"keyup":sw(f,t,u)}var E;if(Tv)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else na?EC(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(TC&&t.locale!=="ko"&&(na||T!=="onCompositionStart"?T==="onCompositionEnd"&&na&&(E=CC()):(li=u,bv="value"in li?li.value:li.textContent,na=!0)),M=Od(c,T),0<M.length&&(T=new K1(T,n,null,t,u),f.push({event:T,listeners:M}),E?T.data=E:(E=kC(t),E!==null&&(T.data=E)))),(E=bD?SD(n,t):CD(n,t))&&(c=Od(c,"onBeforeInput"),0<c.length&&(u=new K1("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=E))}UC(f,e)})}function Uc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Od(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rc(n,t),i!=null&&r.unshift(Uc(n,i,s)),i=Rc(n,e),i!=null&&r.push(Uc(n,i,s))),n=n.return}return r}function Xo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function aw(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Rc(t,i),l!=null&&o.unshift(Uc(t,l,a))):s||(l=Rc(t,i),l!=null&&o.push(Uc(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var FD=/\r\n?/g,UD=/\u0000|\uFFFD/g;function lw(n){return(typeof n=="string"?n:""+n).replace(FD,`
`).replace(UD,"")}function rh(n,e,t){if(e=lw(e),lw(n)!==e&&t)throw Error(Z(425))}function Ad(){}var Am=null,Im=null;function Rm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,BD=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,zD=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(n){return cw.resolve(null).then(n).catch(VD)}:Dm;function VD(n){setTimeout(function(){throw n})}function dg(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Mc(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Mc(e)}function gi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function uw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ll=Math.random().toString(36).slice(2),Cr="__reactFiber$"+ll,Bc="__reactProps$"+ll,ys="__reactContainer$"+ll,Nm="__reactEvents$"+ll,$D="__reactListeners$"+ll,WD="__reactHandles$"+ll;function Ki(n){var e=n[Cr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ys]||t[Cr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=uw(n);n!==null;){if(t=n[Cr])return t;n=uw(n)}return e}n=t,t=n.parentNode}return null}function pu(n){return n=n[Cr]||n[ys],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ia(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Z(33))}function jf(n){return n[Bc]||null}var Mm=[],oa=-1;function Di(n){return{current:n}}function He(n){0>oa||(n.current=Mm[oa],Mm[oa]=null,oa--)}function ze(n,e){oa++,Mm[oa]=n.current,n.current=e}var Ti={},Dt=Di(Ti),sn=Di(!1),mo=Ti;function Ha(n,e){var t=n.type.contextTypes;if(!t)return Ti;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function on(n){return n=n.childContextTypes,n!=null}function Id(){He(sn),He(Dt)}function hw(n,e,t){if(Dt.current!==Ti)throw Error(Z(168));ze(Dt,e),ze(sn,t)}function zC(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,PR(n)||"Unknown",s));return Je({},t,r)}function Rd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ti,mo=Dt.current,ze(Dt,n),ze(sn,sn.current),!0}function dw(n,e,t){var r=n.stateNode;if(!r)throw Error(Z(169));t?(n=zC(n,e,mo),r.__reactInternalMemoizedMergedChildContext=n,He(sn),He(Dt),ze(Dt,n)):He(sn),ze(sn,t)}var Zr=null,Lf=!1,fg=!1;function VC(n){Zr===null?Zr=[n]:Zr.push(n)}function HD(n){Lf=!0,VC(n)}function Ni(){if(!fg&&Zr!==null){fg=!0;var n=0,e=Le;try{var t=Zr;for(Le=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Zr=null,Lf=!1}catch(s){throw Zr!==null&&(Zr=Zr.slice(n+1)),fC(yv,Ni),s}finally{Le=e,fg=!1}}return null}var aa=[],la=0,Dd=null,Nd=0,En=[],kn=0,vo=null,is=1,os="";function $i(n,e){aa[la++]=Nd,aa[la++]=Dd,Dd=n,Nd=e}function $C(n,e,t){En[kn++]=is,En[kn++]=os,En[kn++]=vo,vo=n;var r=is;n=os;var s=32-or(r)-1;r&=~(1<<s),t+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,is=1<<32-or(e)+s|t<<s|r,os=i+n}else is=1<<i|t<<s|r,os=n}function kv(n){n.return!==null&&($i(n,1),$C(n,1,0))}function Pv(n){for(;n===Dd;)Dd=aa[--la],aa[la]=null,Nd=aa[--la],aa[la]=null;for(;n===vo;)vo=En[--kn],En[kn]=null,os=En[--kn],En[kn]=null,is=En[--kn],En[kn]=null}var mn=null,gn=null,Ge=!1,Kn=null;function WC(n,e){var t=On(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,mn=n,gn=gi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,mn=n,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=vo!==null?{id:is,overflow:os}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=On(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,mn=n,gn=null,!0):!1;default:return!1}}function jm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Lm(n){if(Ge){var e=gn;if(e){var t=e;if(!fw(n,e)){if(jm(n))throw Error(Z(418));e=gi(t.nextSibling);var r=mn;e&&fw(n,e)?WC(r,t):(n.flags=n.flags&-4097|2,Ge=!1,mn=n)}}else{if(jm(n))throw Error(Z(418));n.flags=n.flags&-4097|2,Ge=!1,mn=n}}}function pw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mn=n}function sh(n){if(n!==mn)return!1;if(!Ge)return pw(n),Ge=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Rm(n.type,n.memoizedProps)),e&&(e=gn)){if(jm(n))throw HC(),Error(Z(418));for(;e;)WC(n,e),e=gi(e.nextSibling)}if(pw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Z(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){gn=gi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}gn=null}}else gn=mn?gi(n.stateNode.nextSibling):null;return!0}function HC(){for(var n=gn;n;)n=gi(n.nextSibling)}function Ga(){gn=mn=null,Ge=!1}function Ov(n){Kn===null?Kn=[n]:Kn.push(n)}var GD=As.ReactCurrentBatchConfig;function Xl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Z(309));var r=t.stateNode}if(!r)throw Error(Z(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(Z(284));if(!t._owner)throw Error(Z(290,n))}return n}function ih(n,e){throw n=Object.prototype.toString.call(e),Error(Z(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function gw(n){var e=n._init;return e(n._payload)}function GC(n){function e(x,w){if(n){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function t(x,w){if(!n)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=xi(x,w),x.index=0,x.sibling=null,x}function i(x,w,S){return x.index=S,n?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,w,S,k){return w===null||w.tag!==6?(w=wg(S,x.mode,k),w.return=x,w):(w=s(w,S),w.return=x,w)}function l(x,w,S,k){var O=S.type;return O===ta?u(x,w,S.props.children,k,S.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Gs&&gw(O)===w.type)?(k=s(w,S.props),k.ref=Xl(x,w,S),k.return=x,k):(k=sd(S.type,S.key,S.props,null,x.mode,k),k.ref=Xl(x,w,S),k.return=x,k)}function c(x,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=_g(S,x.mode,k),w.return=x,w):(w=s(w,S.children||[]),w.return=x,w)}function u(x,w,S,k,O){return w===null||w.tag!==7?(w=ho(S,x.mode,k,O),w.return=x,w):(w=s(w,S),w.return=x,w)}function f(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wg(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yu:return S=sd(w.type,w.key,w.props,null,x.mode,S),S.ref=Xl(x,null,w),S.return=x,S;case ea:return w=_g(w,x.mode,S),w.return=x,w;case Gs:var k=w._init;return f(x,k(w._payload),S)}if(nc(w)||Vl(w))return w=ho(w,x.mode,S,null),w.return=x,w;ih(x,w)}return null}function d(x,w,S,k){var O=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(x,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yu:return S.key===O?l(x,w,S,k):null;case ea:return S.key===O?c(x,w,S,k):null;case Gs:return O=S._init,d(x,w,O(S._payload),k)}if(nc(S)||Vl(S))return O!==null?null:u(x,w,S,k,null);ih(x,S)}return null}function g(x,w,S,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(S)||null,a(w,x,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Yu:return x=x.get(k.key===null?S:k.key)||null,l(w,x,k,O);case ea:return x=x.get(k.key===null?S:k.key)||null,c(w,x,k,O);case Gs:var M=k._init;return g(x,w,S,M(k._payload),O)}if(nc(k)||Vl(k))return x=x.get(S)||null,u(w,x,k,O,null);ih(w,k)}return null}function m(x,w,S,k){for(var O=null,M=null,E=w,T=w=0,P=null;E!==null&&T<S.length;T++){E.index>T?(P=E,E=null):P=E.sibling;var A=d(x,E,S[T],k);if(A===null){E===null&&(E=P);break}n&&E&&A.alternate===null&&e(x,E),w=i(A,w,T),M===null?O=A:M.sibling=A,M=A,E=P}if(T===S.length)return t(x,E),Ge&&$i(x,T),O;if(E===null){for(;T<S.length;T++)E=f(x,S[T],k),E!==null&&(w=i(E,w,T),M===null?O=E:M.sibling=E,M=E);return Ge&&$i(x,T),O}for(E=r(x,E);T<S.length;T++)P=g(E,x,T,S[T],k),P!==null&&(n&&P.alternate!==null&&E.delete(P.key===null?T:P.key),w=i(P,w,T),M===null?O=P:M.sibling=P,M=P);return n&&E.forEach(function(D){return e(x,D)}),Ge&&$i(x,T),O}function v(x,w,S,k){var O=Vl(S);if(typeof O!="function")throw Error(Z(150));if(S=O.call(S),S==null)throw Error(Z(151));for(var M=O=null,E=w,T=w=0,P=null,A=S.next();E!==null&&!A.done;T++,A=S.next()){E.index>T?(P=E,E=null):P=E.sibling;var D=d(x,E,A.value,k);if(D===null){E===null&&(E=P);break}n&&E&&D.alternate===null&&e(x,E),w=i(D,w,T),M===null?O=D:M.sibling=D,M=D,E=P}if(A.done)return t(x,E),Ge&&$i(x,T),O;if(E===null){for(;!A.done;T++,A=S.next())A=f(x,A.value,k),A!==null&&(w=i(A,w,T),M===null?O=A:M.sibling=A,M=A);return Ge&&$i(x,T),O}for(E=r(x,E);!A.done;T++,A=S.next())A=g(E,x,T,A.value,k),A!==null&&(n&&A.alternate!==null&&E.delete(A.key===null?T:A.key),w=i(A,w,T),M===null?O=A:M.sibling=A,M=A);return n&&E.forEach(function(N){return e(x,N)}),Ge&&$i(x,T),O}function b(x,w,S,k){if(typeof S=="object"&&S!==null&&S.type===ta&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Yu:e:{for(var O=S.key,M=w;M!==null;){if(M.key===O){if(O=S.type,O===ta){if(M.tag===7){t(x,M.sibling),w=s(M,S.props.children),w.return=x,x=w;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Gs&&gw(O)===M.type){t(x,M.sibling),w=s(M,S.props),w.ref=Xl(x,M,S),w.return=x,x=w;break e}t(x,M);break}else e(x,M);M=M.sibling}S.type===ta?(w=ho(S.props.children,x.mode,k,S.key),w.return=x,x=w):(k=sd(S.type,S.key,S.props,null,x.mode,k),k.ref=Xl(x,w,S),k.return=x,x=k)}return o(x);case ea:e:{for(M=S.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(x,w.sibling),w=s(w,S.children||[]),w.return=x,x=w;break e}else{t(x,w);break}else e(x,w);w=w.sibling}w=_g(S,x.mode,k),w.return=x,x=w}return o(x);case Gs:return M=S._init,b(x,w,M(S._payload),k)}if(nc(S))return m(x,w,S,k);if(Vl(S))return v(x,w,S,k);ih(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(x,w.sibling),w=s(w,S),w.return=x,x=w):(t(x,w),w=wg(S,x.mode,k),w.return=x,x=w),o(x)):t(x,w)}return b}var Xa=GC(!0),XC=GC(!1),Md=Di(null),jd=null,ca=null,Av=null;function Iv(){Av=ca=jd=null}function Rv(n){var e=Md.current;He(Md),n._currentValue=e}function Fm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function xa(n,e){jd=n,Av=ca=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(rn=!0),n.firstContext=null)}function Mn(n){var e=n._currentValue;if(Av!==n)if(n={context:n,memoizedValue:e,next:null},ca===null){if(jd===null)throw Error(Z(308));ca=n,jd.dependencies={lanes:0,firstContext:n}}else ca=ca.next=n;return e}var qi=null;function Dv(n){qi===null?qi=[n]:qi.push(n)}function YC(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,Dv(e)):(t.next=s.next,s.next=t),e.interleaved=t,xs(n,r)}function xs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Xs=!1;function Nv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ds(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function mi(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xs(n,t)}return s=r.interleaved,s===null?(e.next=e,Dv(r)):(e.next=s.next,s.next=e),r.interleaved=e,xs(n,t)}function Jh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,xv(n,t)}}function mw(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Ld(n,e,t,r){var s=n.updateQueue;Xs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var d=a.lane,g=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,v=a;switch(d=e,g=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(g,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(g,f,d):m,d==null)break e;f=Je({},f,d);break e;case 2:Xs=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else g={eventTime:g,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xo|=o,n.lanes=o,n.memoizedState=f}}function vw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var gu={},Rr=Di(gu),zc=Di(gu),Vc=Di(gu);function Qi(n){if(n===gu)throw Error(Z(174));return n}function Mv(n,e){switch(ze(Vc,e),ze(zc,n),ze(Rr,gu),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ym(e,n)}He(Rr),ze(Rr,e)}function Ya(){He(Rr),He(zc),He(Vc)}function qC(n){Qi(Vc.current);var e=Qi(Rr.current),t=ym(e,n.type);e!==t&&(ze(zc,n),ze(Rr,t))}function jv(n){zc.current===n&&(He(Rr),He(zc))}var Ke=Di(0);function Fd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pg=[];function Lv(){for(var n=0;n<pg.length;n++)pg[n]._workInProgressVersionPrimary=null;pg.length=0}var Zh=As.ReactCurrentDispatcher,gg=As.ReactCurrentBatchConfig,yo=0,Qe=null,ut=null,gt=null,Ud=!1,gc=!1,$c=0,XD=0;function Pt(){throw Error(Z(321))}function Fv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ur(n[t],e[t]))return!1;return!0}function Uv(n,e,t,r,s,i){if(yo=i,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zh.current=n===null||n.memoizedState===null?QD:JD,n=t(r,s),gc){i=0;do{if(gc=!1,$c=0,25<=i)throw Error(Z(301));i+=1,gt=ut=null,e.updateQueue=null,Zh.current=ZD,n=t(r,s)}while(gc)}if(Zh.current=Bd,e=ut!==null&&ut.next!==null,yo=0,gt=ut=Qe=null,Ud=!1,e)throw Error(Z(300));return n}function Bv(){var n=$c!==0;return $c=0,n}function vr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Qe.memoizedState=gt=n:gt=gt.next=n,gt}function jn(){if(ut===null){var n=Qe.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var e=gt===null?Qe.memoizedState:gt.next;if(e!==null)gt=e,ut=n;else{if(n===null)throw Error(Z(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?Qe.memoizedState=gt=n:gt=gt.next=n}return gt}function Wc(n,e){return typeof e=="function"?e(n):e}function mg(n){var e=jn(),t=e.queue;if(t===null)throw Error(Z(311));t.lastRenderedReducer=n;var r=ut,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((yo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Qe.lanes|=u,xo|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ur(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,Qe.lanes|=i,xo|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vg(n){var e=jn(),t=e.queue;if(t===null)throw Error(Z(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);ur(i,e.memoizedState)||(rn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function QC(){}function JC(n,e){var t=Qe,r=jn(),s=e(),i=!ur(r.memoizedState,s);if(i&&(r.memoizedState=s,rn=!0),r=r.queue,zv(t2.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(t.flags|=2048,Hc(9,e2.bind(null,t,r,s,e),void 0,null),yt===null)throw Error(Z(349));yo&30||ZC(t,e,s)}return s}function ZC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function e2(n,e,t,r){e.value=t,e.getSnapshot=r,n2(e)&&r2(n)}function t2(n,e,t){return t(function(){n2(e)&&r2(n)})}function n2(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ur(n,t)}catch{return!0}}function r2(n){var e=xs(n,1);e!==null&&ar(e,n,1,-1)}function yw(n){var e=vr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:n},e.queue=n,n=n.dispatch=qD.bind(null,Qe,n),[e.memoizedState,n]}function Hc(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function s2(){return jn().memoizedState}function ed(n,e,t,r){var s=vr();Qe.flags|=n,s.memoizedState=Hc(1|e,t,void 0,r===void 0?null:r)}function Ff(n,e,t,r){var s=jn();r=r===void 0?null:r;var i=void 0;if(ut!==null){var o=ut.memoizedState;if(i=o.destroy,r!==null&&Fv(r,o.deps)){s.memoizedState=Hc(e,t,i,r);return}}Qe.flags|=n,s.memoizedState=Hc(1|e,t,i,r)}function xw(n,e){return ed(8390656,8,n,e)}function zv(n,e){return Ff(2048,8,n,e)}function i2(n,e){return Ff(4,2,n,e)}function o2(n,e){return Ff(4,4,n,e)}function a2(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function l2(n,e,t){return t=t!=null?t.concat([n]):null,Ff(4,4,a2.bind(null,e,n),t)}function Vv(){}function c2(n,e){var t=jn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Fv(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function u2(n,e){var t=jn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Fv(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function h2(n,e,t){return yo&21?(ur(t,e)||(t=mC(),Qe.lanes|=t,xo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=t)}function YD(n,e){var t=Le;Le=t!==0&&4>t?t:4,n(!0);var r=gg.transition;gg.transition={};try{n(!1),e()}finally{Le=t,gg.transition=r}}function d2(){return jn().memoizedState}function KD(n,e,t){var r=yi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},f2(n))p2(e,t);else if(t=YC(n,e,t,r),t!==null){var s=Vt();ar(t,n,r,s),g2(t,e,r)}}function qD(n,e,t){var r=yi(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(f2(n))p2(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,ur(a,o)){var l=e.interleaved;l===null?(s.next=s,Dv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=YC(n,e,s,r),t!==null&&(s=Vt(),ar(t,n,r,s),g2(t,e,r))}}function f2(n){var e=n.alternate;return n===Qe||e!==null&&e===Qe}function p2(n,e){gc=Ud=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function g2(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,xv(n,t)}}var Bd={readContext:Mn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},QD={readContext:Mn,useCallback:function(n,e){return vr().memoizedState=[n,e===void 0?null:e],n},useContext:Mn,useEffect:xw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ed(4194308,4,a2.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ed(4194308,4,n,e)},useInsertionEffect:function(n,e){return ed(4,2,n,e)},useMemo:function(n,e){var t=vr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=vr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=KD.bind(null,Qe,n),[r.memoizedState,n]},useRef:function(n){var e=vr();return n={current:n},e.memoizedState=n},useState:yw,useDebugValue:Vv,useDeferredValue:function(n){return vr().memoizedState=n},useTransition:function(){var n=yw(!1),e=n[0];return n=YD.bind(null,n[1]),vr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Qe,s=vr();if(Ge){if(t===void 0)throw Error(Z(407));t=t()}else{if(t=e(),yt===null)throw Error(Z(349));yo&30||ZC(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,xw(t2.bind(null,r,i,n),[n]),r.flags|=2048,Hc(9,e2.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=vr(),e=yt.identifierPrefix;if(Ge){var t=os,r=is;t=(r&~(1<<32-or(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=$c++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=XD++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},JD={readContext:Mn,useCallback:c2,useContext:Mn,useEffect:zv,useImperativeHandle:l2,useInsertionEffect:i2,useLayoutEffect:o2,useMemo:u2,useReducer:mg,useRef:s2,useState:function(){return mg(Wc)},useDebugValue:Vv,useDeferredValue:function(n){var e=jn();return h2(e,ut.memoizedState,n)},useTransition:function(){var n=mg(Wc)[0],e=jn().memoizedState;return[n,e]},useMutableSource:QC,useSyncExternalStore:JC,useId:d2,unstable_isNewReconciler:!1},ZD={readContext:Mn,useCallback:c2,useContext:Mn,useEffect:zv,useImperativeHandle:l2,useInsertionEffect:i2,useLayoutEffect:o2,useMemo:u2,useReducer:vg,useRef:s2,useState:function(){return vg(Wc)},useDebugValue:Vv,useDeferredValue:function(n){var e=jn();return ut===null?e.memoizedState=n:h2(e,ut.memoizedState,n)},useTransition:function(){var n=vg(Wc)[0],e=jn().memoizedState;return[n,e]},useMutableSource:QC,useSyncExternalStore:JC,useId:d2,unstable_isNewReconciler:!1};function Hn(n,e){if(n&&n.defaultProps){e=Je({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Um(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Je({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Uf={isMounted:function(n){return(n=n._reactInternals)?No(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Vt(),s=yi(n),i=ds(r,s);i.payload=e,t!=null&&(i.callback=t),e=mi(n,i,s),e!==null&&(ar(e,n,s,r),Jh(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Vt(),s=yi(n),i=ds(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=mi(n,i,s),e!==null&&(ar(e,n,s,r),Jh(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Vt(),r=yi(n),s=ds(t,r);s.tag=2,e!=null&&(s.callback=e),e=mi(n,s,r),e!==null&&(ar(e,n,r,t),Jh(e,n,r))}};function ww(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Lc(t,r)||!Lc(s,i):!0}function m2(n,e,t){var r=!1,s=Ti,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=on(e)?mo:Dt.current,r=e.contextTypes,i=(r=r!=null)?Ha(n,s):Ti),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function _w(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Uf.enqueueReplaceState(e,e.state,null)}function Bm(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Nv(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=on(e)?mo:Dt.current,s.context=Ha(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Um(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Uf.enqueueReplaceState(s,s.state,null),Ld(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Ka(n,e){try{var t="",r=e;do t+=kR(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function yg(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function zm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var eN=typeof WeakMap=="function"?WeakMap:Map;function v2(n,e,t){t=ds(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Vd||(Vd=!0,Qm=r),zm(n,e)},t}function y2(n,e,t){t=ds(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){zm(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){zm(n,e),typeof r!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function bw(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new eN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=pN.bind(null,n,e,t),e.then(n,n))}function Sw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Cw(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ds(-1,1),e.tag=2,mi(t,e,1))),t.lanes|=1),n)}var tN=As.ReactCurrentOwner,rn=!1;function Ft(n,e,t,r){e.child=n===null?XC(e,null,t,r):Xa(e,n.child,t,r)}function Tw(n,e,t,r,s){t=t.render;var i=e.ref;return xa(e,s),r=Uv(n,e,t,r,i,s),t=Bv(),n!==null&&!rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ws(n,e,s)):(Ge&&t&&kv(e),e.flags|=1,Ft(n,e,r,s),e.child)}function Ew(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!qv(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,x2(n,e,i,r,s)):(n=sd(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Lc,t(o,r)&&n.ref===e.ref)return ws(n,e,s)}return e.flags|=1,n=xi(i,r),n.ref=e.ref,n.return=e,e.child=n}function x2(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Lc(i,r)&&n.ref===e.ref)if(rn=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(rn=!0);else return e.lanes=n.lanes,ws(n,e,s)}return Vm(n,e,t,r,s)}function w2(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ha,dn),dn|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ze(ha,dn),dn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,ze(ha,dn),dn|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,ze(ha,dn),dn|=r;return Ft(n,e,s,t),e.child}function _2(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Vm(n,e,t,r,s){var i=on(t)?mo:Dt.current;return i=Ha(e,i),xa(e,s),t=Uv(n,e,t,r,i,s),r=Bv(),n!==null&&!rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ws(n,e,s)):(Ge&&r&&kv(e),e.flags|=1,Ft(n,e,t,s),e.child)}function kw(n,e,t,r,s){if(on(t)){var i=!0;Rd(e)}else i=!1;if(xa(e,s),e.stateNode===null)td(n,e),m2(e,t,r),Bm(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Mn(c):(c=on(t)?mo:Dt.current,c=Ha(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&_w(e,o,r,c),Xs=!1;var d=e.memoizedState;o.state=d,Ld(e,r,o,s),l=e.memoizedState,a!==r||d!==l||sn.current||Xs?(typeof u=="function"&&(Um(e,t,u,r),l=e.memoizedState),(a=Xs||ww(e,t,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,KC(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hn(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Mn(l):(l=on(t)?mo:Dt.current,l=Ha(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&_w(e,o,r,l),Xs=!1,d=e.memoizedState,o.state=d,Ld(e,r,o,s);var m=e.memoizedState;a!==f||d!==m||sn.current||Xs?(typeof g=="function"&&(Um(e,t,g,r),m=e.memoizedState),(c=Xs||ww(e,t,c,r,d,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return $m(n,e,t,r,i,s)}function $m(n,e,t,r,s,i){_2(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&dw(e,t,!1),ws(n,e,i);r=e.stateNode,tN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Xa(e,n.child,null,i),e.child=Xa(e,null,a,i)):Ft(n,e,a,i),e.memoizedState=r.state,s&&dw(e,t,!0),e.child}function b2(n){var e=n.stateNode;e.pendingContext?hw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&hw(n,e.context,!1),Mv(n,e.containerInfo)}function Pw(n,e,t,r,s){return Ga(),Ov(s),e.flags|=256,Ft(n,e,t,r),e.child}var Wm={dehydrated:null,treeContext:null,retryLane:0};function Hm(n){return{baseLanes:n,cachePool:null,transitions:null}}function S2(n,e,t){var r=e.pendingProps,s=Ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),ze(Ke,s&1),n===null)return Lm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vf(o,r,0,null),n=ho(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Hm(t),e.memoizedState=Wm,n):$v(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return nN(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xi(a,i):(i=ho(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?Hm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=Wm,r}return i=n.child,n=i.sibling,r=xi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function $v(n,e){return e=Vf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function oh(n,e,t,r){return r!==null&&Ov(r),Xa(e,n.child,null,t),n=$v(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function nN(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=yg(Error(Z(422))),oh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vf({mode:"visible",children:r.children},s,0,null),i=ho(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xa(e,n.child,null,o),e.child.memoizedState=Hm(o),e.memoizedState=Wm,i);if(!(e.mode&1))return oh(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Z(419)),r=yg(i,r,void 0),oh(n,e,o,r)}if(a=(o&n.childLanes)!==0,rn||a){if(r=yt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xs(n,s),ar(r,n,s,-1))}return Kv(),r=yg(Error(Z(421))),oh(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=gN.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,gn=gi(s.nextSibling),mn=e,Ge=!0,Kn=null,n!==null&&(En[kn++]=is,En[kn++]=os,En[kn++]=vo,is=n.id,os=n.overflow,vo=e),e=$v(e,r.children),e.flags|=4096,e)}function Ow(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Fm(n.return,e,t)}function xg(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function C2(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ft(n,e,r.children,t),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ow(n,t,e);else if(n.tag===19)Ow(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ze(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Fd(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),xg(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Fd(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}xg(e,!0,t,null,i);break;case"together":xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function td(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ws(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Z(153));if(e.child!==null){for(n=e.child,t=xi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=xi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function rN(n,e,t){switch(e.tag){case 3:b2(e),Ga();break;case 5:qC(e);break;case 1:on(e.type)&&Rd(e);break;case 4:Mv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ze(Md,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ke,Ke.current&1),e.flags|=128,null):t&e.child.childLanes?S2(n,e,t):(ze(Ke,Ke.current&1),n=ws(n,e,t),n!==null?n.sibling:null);ze(Ke,Ke.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return C2(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,w2(n,e,t)}return ws(n,e,t)}var T2,Gm,E2,k2;T2=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Gm=function(){};E2=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,Qi(Rr.current);var i=null;switch(t){case"input":s=pm(n,s),r=pm(n,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=vm(n,s),r=vm(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ad)}xm(t,r);var o;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ac.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ac.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&We("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};k2=function(n,e,t,r){t!==r&&(e.flags|=4)};function Yl(n,e){if(!Ge)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ot(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function sN(n,e,t){var r=e.pendingProps;switch(Pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return on(e.type)&&Id(),Ot(e),null;case 3:return r=e.stateNode,Ya(),He(sn),He(Dt),Lv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(sh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(e0(Kn),Kn=null))),Gm(n,e),Ot(e),null;case 5:jv(e);var s=Qi(Vc.current);if(t=e.type,n!==null&&e.stateNode!=null)E2(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Ot(e),null}if(n=Qi(Rr.current),sh(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Cr]=e,r[Bc]=i,n=(e.mode&1)!==0,t){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(s=0;s<sc.length;s++)We(sc[s],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":F1(r,i),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},We("invalid",r);break;case"textarea":B1(r,i),We("invalid",r)}xm(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&rh(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&rh(r.textContent,a,n),s=["children",""+a]):Ac.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",r)}switch(t){case"input":Ku(r),U1(r,i,!0);break;case"textarea":Ku(r),z1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ad)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=tC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Cr]=e,n[Bc]=r,T2(n,e,!1,!1),e.stateNode=n;e:{switch(o=wm(t,r),t){case"dialog":We("cancel",n),We("close",n),s=r;break;case"iframe":case"object":case"embed":We("load",n),s=r;break;case"video":case"audio":for(s=0;s<sc.length;s++)We(sc[s],n);s=r;break;case"source":We("error",n),s=r;break;case"img":case"image":case"link":We("error",n),We("load",n),s=r;break;case"details":We("toggle",n),s=r;break;case"input":F1(n,r),s=pm(n,r),We("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),We("invalid",n);break;case"textarea":B1(n,r),s=vm(n,r),We("invalid",n);break;default:s=r}xm(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?sC(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nC(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ic(n,l):typeof l=="number"&&Ic(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ac.hasOwnProperty(i)?l!=null&&i==="onScroll"&&We("scroll",n):l!=null&&fv(n,i,l,o))}switch(t){case"input":Ku(n),U1(n,r,!1);break;case"textarea":Ku(n),z1(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ci(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?ga(n,!!r.multiple,i,!1):r.defaultValue!=null&&ga(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Ad)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(n&&e.stateNode!=null)k2(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(t=Qi(Vc.current),Qi(Rr.current),sh(e)){if(r=e.stateNode,t=e.memoizedProps,r[Cr]=e,(i=r.nodeValue!==t)&&(n=mn,n!==null))switch(n.tag){case 3:rh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rh(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Cr]=e,e.stateNode=r}return Ot(e),null;case 13:if(He(Ke),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ge&&gn!==null&&e.mode&1&&!(e.flags&128))HC(),Ga(),e.flags|=98560,i=!1;else if(i=sh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Cr]=e}else Ga(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),i=!1}else Kn!==null&&(e0(Kn),Kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ke.current&1?dt===0&&(dt=3):Kv())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Ya(),Gm(n,e),n===null&&Fc(e.stateNode.containerInfo),Ot(e),null;case 10:return Rv(e.type._context),Ot(e),null;case 17:return on(e.type)&&Id(),Ot(e),null;case 19:if(He(Ke),i=e.memoizedState,i===null)return Ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Yl(i,!1);else{if(dt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Fd(n),o!==null){for(e.flags|=128,Yl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ze(Ke,Ke.current&1|2),e.child}n=n.sibling}i.tail!==null&&rt()>qa&&(e.flags|=128,r=!0,Yl(i,!1),e.lanes=4194304)}else{if(!r)if(n=Fd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ge)return Ot(e),null}else 2*rt()-i.renderingStartTime>qa&&t!==1073741824&&(e.flags|=128,r=!0,Yl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,t=Ke.current,ze(Ke,r?t&1|2:t&1),e):(Ot(e),null);case 22:case 23:return Yv(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function iN(n,e){switch(Pv(e),e.tag){case 1:return on(e.type)&&Id(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ya(),He(sn),He(Dt),Lv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return jv(e),null;case 13:if(He(Ke),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Ga()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return He(Ke),null;case 4:return Ya(),null;case 10:return Rv(e.type._context),null;case 22:case 23:return Yv(),null;case 24:return null;default:return null}}var ah=!1,It=!1,oN=typeof WeakSet=="function"?WeakSet:Set,he=null;function ua(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){et(n,e,r)}else t.current=null}function Xm(n,e,t){try{t()}catch(r){et(n,e,r)}}var Aw=!1;function aN(n,e){if(Am=kd,n=RC(),Ev(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,d=null;t:for(;;){for(var g;f!==t||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===n)break t;if(d===t&&++c===s&&(a=o),d===i&&++u===r&&(l=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Im={focusedElem:n,selectionRange:t},kd=!1,he=e;he!==null;)if(e=he,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,he=n;else for(;he!==null;){e=he;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Hn(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(k){et(e,e.return,k)}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}return m=Aw,Aw=!1,m}function mc(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xm(e,t,i)}s=s.next}while(s!==r)}}function Bf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Ym(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function P2(n){var e=n.alternate;e!==null&&(n.alternate=null,P2(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Cr],delete e[Bc],delete e[Nm],delete e[$D],delete e[WD])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function O2(n){return n.tag===5||n.tag===3||n.tag===4}function Iw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||O2(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Km(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ad));else if(r!==4&&(n=n.child,n!==null))for(Km(n,e,t),n=n.sibling;n!==null;)Km(n,e,t),n=n.sibling}function qm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(qm(n,e,t),n=n.sibling;n!==null;)qm(n,e,t),n=n.sibling}var bt=null,Xn=!1;function Ls(n,e,t){for(t=t.child;t!==null;)A2(n,e,t),t=t.sibling}function A2(n,e,t){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(Rf,t)}catch{}switch(t.tag){case 5:It||ua(t,e);case 6:var r=bt,s=Xn;bt=null,Ls(n,e,t),bt=r,Xn=s,bt!==null&&(Xn?(n=bt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):bt.removeChild(t.stateNode));break;case 18:bt!==null&&(Xn?(n=bt,t=t.stateNode,n.nodeType===8?dg(n.parentNode,t):n.nodeType===1&&dg(n,t),Mc(n)):dg(bt,t.stateNode));break;case 4:r=bt,s=Xn,bt=t.stateNode.containerInfo,Xn=!0,Ls(n,e,t),bt=r,Xn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xm(t,e,o),s=s.next}while(s!==r)}Ls(n,e,t);break;case 1:if(!It&&(ua(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){et(t,e,a)}Ls(n,e,t);break;case 21:Ls(n,e,t);break;case 22:t.mode&1?(It=(r=It)||t.memoizedState!==null,Ls(n,e,t),It=r):Ls(n,e,t);break;default:Ls(n,e,t)}}function Rw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new oN),e.forEach(function(r){var s=mN.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function zn(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Xn=!1;break e;case 3:bt=a.stateNode.containerInfo,Xn=!0;break e;case 4:bt=a.stateNode.containerInfo,Xn=!0;break e}a=a.return}if(bt===null)throw Error(Z(160));A2(i,o,s),bt=null,Xn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){et(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)I2(e,n),e=e.sibling}function I2(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zn(e,n),gr(n),r&4){try{mc(3,n,n.return),Bf(3,n)}catch(v){et(n,n.return,v)}try{mc(5,n,n.return)}catch(v){et(n,n.return,v)}}break;case 1:zn(e,n),gr(n),r&512&&t!==null&&ua(t,t.return);break;case 5:if(zn(e,n),gr(n),r&512&&t!==null&&ua(t,t.return),n.flags&32){var s=n.stateNode;try{Ic(s,"")}catch(v){et(n,n.return,v)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ZS(s,i),wm(a,o);var c=wm(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?sC(s,f):u==="dangerouslySetInnerHTML"?nC(s,f):u==="children"?Ic(s,f):fv(s,u,f,c)}switch(a){case"input":gm(s,i);break;case"textarea":eC(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ga(s,!!i.multiple,g,!1):d!==!!i.multiple&&(i.defaultValue!=null?ga(s,!!i.multiple,i.defaultValue,!0):ga(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bc]=i}catch(v){et(n,n.return,v)}}break;case 6:if(zn(e,n),gr(n),r&4){if(n.stateNode===null)throw Error(Z(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(v){et(n,n.return,v)}}break;case 3:if(zn(e,n),gr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Mc(e.containerInfo)}catch(v){et(n,n.return,v)}break;case 4:zn(e,n),gr(n);break;case 13:zn(e,n),gr(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Gv=rt())),r&4&&Rw(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(It=(c=It)||u,zn(e,n),It=c):zn(e,n),gr(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(he=n,u=n.child;u!==null;){for(f=he=u;he!==null;){switch(d=he,g=d.child,d.tag){case 0:case 11:case 14:case 15:mc(4,d,d.return);break;case 1:ua(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){et(r,t,v)}}break;case 5:ua(d,d.return);break;case 22:if(d.memoizedState!==null){Nw(f);continue}}g!==null?(g.return=d,he=g):Nw(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rC("display",o))}catch(v){et(n,n.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){et(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zn(e,n),gr(n),r&4&&Rw(n);break;case 21:break;default:zn(e,n),gr(n)}}function gr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(O2(t)){var r=t;break e}t=t.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ic(s,""),r.flags&=-33);var i=Iw(n);qm(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Iw(n);Km(n,a,o);break;default:throw Error(Z(161))}}catch(l){et(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function lN(n,e,t){he=n,R2(n)}function R2(n,e,t){for(var r=(n.mode&1)!==0;he!==null;){var s=he,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ah;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||It;a=ah;var c=It;if(ah=o,(It=l)&&!c)for(he=s;he!==null;)o=he,l=o.child,o.tag===22&&o.memoizedState!==null?Mw(s):l!==null?(l.return=o,he=l):Mw(s);for(;i!==null;)he=i,R2(i),i=i.sibling;he=s,ah=a,It=c}Dw(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,he=i):Dw(n)}}function Dw(n){for(;he!==null;){var e=he;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Bf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Hn(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}vw(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Mc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}It||e.flags&512&&Ym(e)}catch(d){et(e,e.return,d)}}if(e===n){he=null;break}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}}function Nw(n){for(;he!==null;){var e=he;if(e===n){he=null;break}var t=e.sibling;if(t!==null){t.return=e.return,he=t;break}he=e.return}}function Mw(n){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Bf(4,e)}catch(l){et(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){et(e,s,l)}}var i=e.return;try{Ym(e)}catch(l){et(e,i,l)}break;case 5:var o=e.return;try{Ym(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===n){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var cN=Math.ceil,zd=As.ReactCurrentDispatcher,Wv=As.ReactCurrentOwner,Rn=As.ReactCurrentBatchConfig,Ae=0,yt=null,ot=null,St=0,dn=0,ha=Di(0),dt=0,Gc=null,xo=0,zf=0,Hv=0,vc=null,nn=null,Gv=0,qa=1/0,Jr=null,Vd=!1,Qm=null,vi=null,lh=!1,ci=null,$d=0,yc=0,Jm=null,nd=-1,rd=0;function Vt(){return Ae&6?rt():nd!==-1?nd:nd=rt()}function yi(n){return n.mode&1?Ae&2&&St!==0?St&-St:GD.transition!==null?(rd===0&&(rd=mC()),rd):(n=Le,n!==0||(n=window.event,n=n===void 0?16:SC(n.type)),n):1}function ar(n,e,t,r){if(50<yc)throw yc=0,Jm=null,Error(Z(185));du(n,t,r),(!(Ae&2)||n!==yt)&&(n===yt&&(!(Ae&2)&&(zf|=t),dt===4&&Ks(n,St)),an(n,r),t===1&&Ae===0&&!(e.mode&1)&&(qa=rt()+500,Lf&&Ni()))}function an(n,e){var t=n.callbackNode;GR(n,e);var r=Ed(n,n===yt?St:0);if(r===0)t!==null&&W1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&W1(t),e===1)n.tag===0?HD(jw.bind(null,n)):VC(jw.bind(null,n)),zD(function(){!(Ae&6)&&Ni()}),t=null;else{switch(vC(r)){case 1:t=yv;break;case 4:t=pC;break;case 16:t=Td;break;case 536870912:t=gC;break;default:t=Td}t=B2(t,D2.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function D2(n,e){if(nd=-1,rd=0,Ae&6)throw Error(Z(327));var t=n.callbackNode;if(wa()&&n.callbackNode!==t)return null;var r=Ed(n,n===yt?St:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Wd(n,r);else{e=r;var s=Ae;Ae|=2;var i=M2();(yt!==n||St!==e)&&(Jr=null,qa=rt()+500,uo(n,e));do try{dN();break}catch(a){N2(n,a)}while(!0);Iv(),zd.current=i,Ae=s,ot!==null?e=0:(yt=null,St=0,e=dt)}if(e!==0){if(e===2&&(s=Tm(n),s!==0&&(r=s,e=Zm(n,s))),e===1)throw t=Gc,uo(n,0),Ks(n,r),an(n,rt()),t;if(e===6)Ks(n,r);else{if(s=n.current.alternate,!(r&30)&&!uN(s)&&(e=Wd(n,r),e===2&&(i=Tm(n),i!==0&&(r=i,e=Zm(n,i))),e===1))throw t=Gc,uo(n,0),Ks(n,r),an(n,rt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Wi(n,nn,Jr);break;case 3:if(Ks(n,r),(r&130023424)===r&&(e=Gv+500-rt(),10<e)){if(Ed(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Vt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Dm(Wi.bind(null,n,nn,Jr),e);break}Wi(n,nn,Jr);break;case 4:if(Ks(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cN(r/1960))-r,10<r){n.timeoutHandle=Dm(Wi.bind(null,n,nn,Jr),r);break}Wi(n,nn,Jr);break;case 5:Wi(n,nn,Jr);break;default:throw Error(Z(329))}}}return an(n,rt()),n.callbackNode===t?D2.bind(null,n):null}function Zm(n,e){var t=vc;return n.current.memoizedState.isDehydrated&&(uo(n,e).flags|=256),n=Wd(n,e),n!==2&&(e=nn,nn=t,e!==null&&e0(e)),n}function e0(n){nn===null?nn=n:nn.push.apply(nn,n)}function uN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!ur(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ks(n,e){for(e&=~Hv,e&=~zf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-or(e),r=1<<t;n[t]=-1,e&=~r}}function jw(n){if(Ae&6)throw Error(Z(327));wa();var e=Ed(n,0);if(!(e&1))return an(n,rt()),null;var t=Wd(n,e);if(n.tag!==0&&t===2){var r=Tm(n);r!==0&&(e=r,t=Zm(n,r))}if(t===1)throw t=Gc,uo(n,0),Ks(n,e),an(n,rt()),t;if(t===6)throw Error(Z(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Wi(n,nn,Jr),an(n,rt()),null}function Xv(n,e){var t=Ae;Ae|=1;try{return n(e)}finally{Ae=t,Ae===0&&(qa=rt()+500,Lf&&Ni())}}function wo(n){ci!==null&&ci.tag===0&&!(Ae&6)&&wa();var e=Ae;Ae|=1;var t=Rn.transition,r=Le;try{if(Rn.transition=null,Le=1,n)return n()}finally{Le=r,Rn.transition=t,Ae=e,!(Ae&6)&&Ni()}}function Yv(){dn=ha.current,He(ha)}function uo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,BD(t)),ot!==null)for(t=ot.return;t!==null;){var r=t;switch(Pv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Id();break;case 3:Ya(),He(sn),He(Dt),Lv();break;case 5:jv(r);break;case 4:Ya();break;case 13:He(Ke);break;case 19:He(Ke);break;case 10:Rv(r.type._context);break;case 22:case 23:Yv()}t=t.return}if(yt=n,ot=n=xi(n.current,null),St=dn=e,dt=0,Gc=null,Hv=zf=xo=0,nn=vc=null,qi!==null){for(e=0;e<qi.length;e++)if(t=qi[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}qi=null}return n}function N2(n,e){do{var t=ot;try{if(Iv(),Zh.current=Bd,Ud){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ud=!1}if(yo=0,gt=ut=Qe=null,gc=!1,$c=0,Wv.current=null,t===null||t.return===null){dt=1,Gc=e,ot=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Sw(o);if(g!==null){g.flags&=-257,Cw(g,o,a,i,e),g.mode&1&&bw(i,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){bw(i,c,e),Kv();break e}l=Error(Z(426))}}else if(Ge&&a.mode&1){var b=Sw(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Cw(b,o,a,i,e),Ov(Ka(l,a));break e}}i=l=Ka(l,a),dt!==4&&(dt=2),vc===null?vc=[i]:vc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=v2(i,l,e);mw(i,x);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(vi===null||!vi.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=y2(i,a,e);mw(i,k);break e}}i=i.return}while(i!==null)}L2(t)}catch(O){e=O,ot===t&&t!==null&&(ot=t=t.return);continue}break}while(!0)}function M2(){var n=zd.current;return zd.current=Bd,n===null?Bd:n}function Kv(){(dt===0||dt===3||dt===2)&&(dt=4),yt===null||!(xo&268435455)&&!(zf&268435455)||Ks(yt,St)}function Wd(n,e){var t=Ae;Ae|=2;var r=M2();(yt!==n||St!==e)&&(Jr=null,uo(n,e));do try{hN();break}catch(s){N2(n,s)}while(!0);if(Iv(),Ae=t,zd.current=r,ot!==null)throw Error(Z(261));return yt=null,St=0,dt}function hN(){for(;ot!==null;)j2(ot)}function dN(){for(;ot!==null&&!LR();)j2(ot)}function j2(n){var e=U2(n.alternate,n,dn);n.memoizedProps=n.pendingProps,e===null?L2(n):ot=e,Wv.current=null}function L2(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=iN(t,e),t!==null){t.flags&=32767,ot=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{dt=6,ot=null;return}}else if(t=sN(t,e,dn),t!==null){ot=t;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=n}while(e!==null);dt===0&&(dt=5)}function Wi(n,e,t){var r=Le,s=Rn.transition;try{Rn.transition=null,Le=1,fN(n,e,t,r)}finally{Rn.transition=s,Le=r}return null}function fN(n,e,t,r){do wa();while(ci!==null);if(Ae&6)throw Error(Z(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Z(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(XR(n,i),n===yt&&(ot=yt=null,St=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||lh||(lh=!0,B2(Td,function(){return wa(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Rn.transition,Rn.transition=null;var o=Le;Le=1;var a=Ae;Ae|=4,Wv.current=null,aN(n,t),I2(t,n),DD(Im),kd=!!Am,Im=Am=null,n.current=t,lN(t),FR(),Ae=a,Le=o,Rn.transition=i}else n.current=t;if(lh&&(lh=!1,ci=n,$d=s),i=n.pendingLanes,i===0&&(vi=null),zR(t.stateNode),an(n,rt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vd)throw Vd=!1,n=Qm,Qm=null,n;return $d&1&&n.tag!==0&&wa(),i=n.pendingLanes,i&1?n===Jm?yc++:(yc=0,Jm=n):yc=0,Ni(),null}function wa(){if(ci!==null){var n=vC($d),e=Rn.transition,t=Le;try{if(Rn.transition=null,Le=16>n?16:n,ci===null)var r=!1;else{if(n=ci,ci=null,$d=0,Ae&6)throw Error(Z(331));var s=Ae;for(Ae|=4,he=n.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(he=c;he!==null;){var u=he;switch(u.tag){case 0:case 11:case 15:mc(8,u,i)}var f=u.child;if(f!==null)f.return=u,he=f;else for(;he!==null;){u=he;var d=u.sibling,g=u.return;if(P2(u),u===c){he=null;break}if(d!==null){d.return=g,he=d;break}he=g}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,he=x;break e}he=i.return}}var w=n.current;for(he=w;he!==null;){o=he;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,he=S;else e:for(o=w;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bf(9,a)}}catch(O){et(a,a.return,O)}if(a===o){he=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,he=k;break e}he=a.return}}if(Ae=s,Ni(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(Rf,n)}catch{}r=!0}return r}finally{Le=t,Rn.transition=e}}return!1}function Lw(n,e,t){e=Ka(t,e),e=v2(n,e,1),n=mi(n,e,1),e=Vt(),n!==null&&(du(n,1,e),an(n,e))}function et(n,e,t){if(n.tag===3)Lw(n,n,t);else for(;e!==null;){if(e.tag===3){Lw(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vi===null||!vi.has(r))){n=Ka(t,n),n=y2(e,n,1),e=mi(e,n,1),n=Vt(),e!==null&&(du(e,1,n),an(e,n));break}}e=e.return}}function pN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Vt(),n.pingedLanes|=n.suspendedLanes&t,yt===n&&(St&t)===t&&(dt===4||dt===3&&(St&130023424)===St&&500>rt()-Gv?uo(n,0):Hv|=t),an(n,e)}function F2(n,e){e===0&&(n.mode&1?(e=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):e=1);var t=Vt();n=xs(n,e),n!==null&&(du(n,e,t),an(n,t))}function gN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),F2(n,t)}function mN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),F2(n,t)}var U2;U2=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||sn.current)rn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return rn=!1,rN(n,e,t);rn=!!(n.flags&131072)}else rn=!1,Ge&&e.flags&1048576&&$C(e,Nd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;td(n,e),n=e.pendingProps;var s=Ha(e,Dt.current);xa(e,t),s=Uv(null,e,r,n,s,t);var i=Bv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(i=!0,Rd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nv(e),s.updater=Uf,e.stateNode=s,s._reactInternals=e,Bm(e,r,n,t),e=$m(null,e,r,!0,i,t)):(e.tag=0,Ge&&i&&kv(e),Ft(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(td(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yN(r),n=Hn(r,n),s){case 0:e=Vm(null,e,r,n,t);break e;case 1:e=kw(null,e,r,n,t);break e;case 11:e=Tw(null,e,r,n,t);break e;case 14:e=Ew(null,e,r,Hn(r.type,n),t);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Vm(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),kw(n,e,r,s,t);case 3:e:{if(b2(e),n===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,KC(n,e),Ld(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ka(Error(Z(423)),e),e=Pw(n,e,r,t,s);break e}else if(r!==s){s=Ka(Error(Z(424)),e),e=Pw(n,e,r,t,s);break e}else for(gn=gi(e.stateNode.containerInfo.firstChild),mn=e,Ge=!0,Kn=null,t=XC(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ga(),r===s){e=ws(n,e,t);break e}Ft(n,e,r,t)}e=e.child}return e;case 5:return qC(e),n===null&&Lm(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,Rm(r,s)?o=null:i!==null&&Rm(r,i)&&(e.flags|=32),_2(n,e),Ft(n,e,o,t),e.child;case 6:return n===null&&Lm(e),null;case 13:return S2(n,e,t);case 4:return Mv(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Xa(e,null,r,t):Ft(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Tw(n,e,r,s,t);case 7:return Ft(n,e,e.pendingProps,t),e.child;case 8:return Ft(n,e,e.pendingProps.children,t),e.child;case 12:return Ft(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ze(Md,r._currentValue),r._currentValue=o,i!==null)if(ur(i.value,o)){if(i.children===s.children&&!sn.current){e=ws(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ds(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Fm(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Fm(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ft(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xa(e,t),s=Mn(s),r=r(s),e.flags|=1,Ft(n,e,r,t),e.child;case 14:return r=e.type,s=Hn(r,e.pendingProps),s=Hn(r.type,s),Ew(n,e,r,s,t);case 15:return x2(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),td(n,e),e.tag=1,on(r)?(n=!0,Rd(e)):n=!1,xa(e,t),m2(e,r,s),Bm(e,r,s,t),$m(null,e,r,!0,n,t);case 19:return C2(n,e,t);case 22:return w2(n,e,t)}throw Error(Z(156,e.tag))};function B2(n,e){return fC(n,e)}function vN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(n,e,t,r){return new vN(n,e,t,r)}function qv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yN(n){if(typeof n=="function")return qv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===gv)return 11;if(n===mv)return 14}return 2}function xi(n,e){var t=n.alternate;return t===null?(t=On(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function sd(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")qv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ta:return ho(t.children,s,i,e);case pv:o=8,s|=8;break;case um:return n=On(12,t,e,s|2),n.elementType=um,n.lanes=i,n;case hm:return n=On(13,t,e,s),n.elementType=hm,n.lanes=i,n;case dm:return n=On(19,t,e,s),n.elementType=dm,n.lanes=i,n;case qS:return Vf(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YS:o=10;break e;case KS:o=9;break e;case gv:o=11;break e;case mv:o=14;break e;case Gs:o=16,r=null;break e}throw Error(Z(130,n==null?n:typeof n,""))}return e=On(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function ho(n,e,t,r){return n=On(7,n,r,e),n.lanes=t,n}function Vf(n,e,t,r){return n=On(22,n,r,e),n.elementType=qS,n.lanes=t,n.stateNode={isHidden:!1},n}function wg(n,e,t){return n=On(6,n,null,e),n.lanes=t,n}function _g(n,e,t){return e=On(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function xN(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tg(0),this.expirationTimes=tg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qv(n,e,t,r,s,i,o,a,l){return n=new xN(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=On(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nv(i),n}function wN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function z2(n){if(!n)return Ti;n=n._reactInternals;e:{if(No(n)!==n||n.tag!==1)throw Error(Z(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(n.tag===1){var t=n.type;if(on(t))return zC(n,t,e)}return e}function V2(n,e,t,r,s,i,o,a,l){return n=Qv(t,r,!0,n,s,i,o,a,l),n.context=z2(null),t=n.current,r=Vt(),s=yi(t),i=ds(r,s),i.callback=e??null,mi(t,i,s),n.current.lanes=s,du(n,s,r),an(n,r),n}function $f(n,e,t,r){var s=e.current,i=Vt(),o=yi(s);return t=z2(t),e.context===null?e.context=t:e.pendingContext=t,e=ds(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=mi(s,e,o),n!==null&&(ar(n,s,o,i),Jh(n,s,o)),o}function Hd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Fw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Jv(n,e){Fw(n,e),(n=n.alternate)&&Fw(n,e)}function _N(){return null}var $2=typeof reportError=="function"?reportError:function(n){console.error(n)};function Zv(n){this._internalRoot=n}Wf.prototype.render=Zv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Z(409));$f(n,e,null,null)};Wf.prototype.unmount=Zv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;wo(function(){$f(null,n,null,null)}),e[ys]=null}};function Wf(n){this._internalRoot=n}Wf.prototype.unstable_scheduleHydration=function(n){if(n){var e=wC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ys.length&&e!==0&&e<Ys[t].priority;t++);Ys.splice(t,0,n),t===0&&bC(n)}};function ey(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Hf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Uw(){}function bN(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Hd(o);i.call(c)}}var o=V2(e,r,n,0,null,!1,!1,"",Uw);return n._reactRootContainer=o,n[ys]=o.current,Fc(n.nodeType===8?n.parentNode:n),wo(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Hd(l);a.call(c)}}var l=Qv(n,0,!1,null,null,!1,!1,"",Uw);return n._reactRootContainer=l,n[ys]=l.current,Fc(n.nodeType===8?n.parentNode:n),wo(function(){$f(e,l,t,r)}),l}function Gf(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Hd(o);a.call(l)}}$f(e,o,n,s)}else o=bN(t,e,n,s,r);return Hd(o)}yC=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=rc(e.pendingLanes);t!==0&&(xv(e,t|1),an(e,rt()),!(Ae&6)&&(qa=rt()+500,Ni()))}break;case 13:wo(function(){var r=xs(n,1);if(r!==null){var s=Vt();ar(r,n,1,s)}}),Jv(n,1)}};wv=function(n){if(n.tag===13){var e=xs(n,134217728);if(e!==null){var t=Vt();ar(e,n,134217728,t)}Jv(n,134217728)}};xC=function(n){if(n.tag===13){var e=yi(n),t=xs(n,e);if(t!==null){var r=Vt();ar(t,n,e,r)}Jv(n,e)}};wC=function(){return Le};_C=function(n,e){var t=Le;try{return Le=n,e()}finally{Le=t}};bm=function(n,e,t){switch(e){case"input":if(gm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=jf(r);if(!s)throw Error(Z(90));JS(r),gm(r,s)}}}break;case"textarea":eC(n,t);break;case"select":e=t.value,e!=null&&ga(n,!!t.multiple,e,!1)}};aC=Xv;lC=wo;var SN={usingClientEntryPoint:!1,Events:[pu,ia,jf,iC,oC,Xv]},Kl={findFiberByHostInstance:Ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CN={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hC(n),n===null?null:n.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||_N,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{Rf=ch.inject(CN),Ir=ch}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SN;wn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ey(e))throw Error(Z(200));return wN(n,e,null,t)};wn.createRoot=function(n,e){if(!ey(n))throw Error(Z(299));var t=!1,r="",s=$2;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Qv(n,1,!1,null,null,t,!1,r,s),n[ys]=e.current,Fc(n.nodeType===8?n.parentNode:n),new Zv(e)};wn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Z(188)):(n=Object.keys(n).join(","),Error(Z(268,n)));return n=hC(e),n=n===null?null:n.stateNode,n};wn.flushSync=function(n){return wo(n)};wn.hydrate=function(n,e,t){if(!Hf(e))throw Error(Z(200));return Gf(null,n,e,!0,t)};wn.hydrateRoot=function(n,e,t){if(!ey(n))throw Error(Z(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=$2;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=V2(e,null,n,1,t??null,s,!1,i,o),n[ys]=e.current,Fc(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Wf(e)};wn.render=function(n,e,t){if(!Hf(e))throw Error(Z(200));return Gf(null,n,e,!1,t)};wn.unmountComponentAtNode=function(n){if(!Hf(n))throw Error(Z(40));return n._reactRootContainer?(wo(function(){Gf(null,null,n,!1,function(){n._reactRootContainer=null,n[ys]=null})}),!0):!1};wn.unstable_batchedUpdates=Xv;wn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Hf(t))throw Error(Z(200));if(n==null||n._reactInternals===void 0)throw Error(Z(38));return Gf(n,e,t,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function W2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W2)}catch(n){console.error(n)}}W2(),WS.exports=wn;var Mo=WS.exports;const TN=IS(Mo);var H2,Bw=Mo;H2=Bw.createRoot,Bw.hydrateRoot;function EN(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,s,i,o=[],a="",l=n.split("/");for(l[0]||l.shift();s=l.shift();)t=s[0],t==="*"?(o.push(t),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var G2={exports:{}},X2={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=y;function kN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var PN=typeof Object.is=="function"?Object.is:kN,ON=Qa.useState,AN=Qa.useEffect,IN=Qa.useLayoutEffect,RN=Qa.useDebugValue;function DN(n,e){var t=e(),r=ON({inst:{value:t,getSnapshot:e}}),s=r[0].inst,i=r[1];return IN(function(){s.value=t,s.getSnapshot=e,bg(s)&&i({inst:s})},[n,t,e]),AN(function(){return bg(s)&&i({inst:s}),n(function(){bg(s)&&i({inst:s})})},[n]),RN(t),t}function bg(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!PN(n,t)}catch{return!0}}function NN(n,e){return e()}var MN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?NN:DN;X2.useSyncExternalStore=Qa.useSyncExternalStore!==void 0?Qa.useSyncExternalStore:MN;G2.exports=X2;var jN=G2.exports;const LN=VS.useInsertionEffect,FN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UN=FN?y.useLayoutEffect:y.useEffect,BN=LN||UN,Y2=n=>{const e=y.useRef([n,(...t)=>e[0](...t)]).current;return BN(()=>{e[0]=n}),e[1]},zN="popstate",ty="pushState",ny="replaceState",VN="hashchange",zw=[zN,ty,ny,VN],$N=n=>{for(const e of zw)addEventListener(e,n);return()=>{for(const e of zw)removeEventListener(e,n)}},K2=(n,e)=>jN.useSyncExternalStore($N,n,e),WN=()=>location.search,HN=({ssrSearch:n=""}={})=>K2(WN,()=>n),Vw=()=>location.pathname,GN=({ssrPath:n}={})=>K2(Vw,n?()=>n:Vw),XN=(n,{replace:e=!1,state:t=null}={})=>history[e?ny:ty](t,"",n),YN=(n={})=>[GN(n),XN],$w=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[$w]>"u"){for(const n of[ty,ny]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,$w,{value:!0})}const KN=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",q2=(n="")=>n==="/"?"":n,qN=(n,e)=>n[0]==="~"?n.slice(1):q2(e)+n,QN=(n="",e)=>KN(Ww(q2(n)),Ww(e)),Ww=n=>{try{return decodeURI(n)}catch{return n}},Q2={hook:YN,searchHook:HN,parser:EN,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},J2=y.createContext(Q2),Xf=()=>y.useContext(J2),Z2={},eT=y.createContext(Z2),JN=()=>y.useContext(eT),ry=n=>{const[e,t]=n.hook(n);return[QN(n.base,e),Y2((r,s)=>t(qN(r,n.base),s))]},tT=(n,e,t,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),o=s.exec(t)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((f,d)=>[f,l[d]])):o.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},ZN=({children:n,...e})=>{var u,f;const t=Xf(),r=e.hook?Q2:t;let s=r;const[i,o]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=y.useRef({}),l=a.current,c=l;for(let d in r){const g=d==="base"?r[d]+(e[d]||""):e[d]||r[d];l===c&&g!==c[d]&&(a.current=c={...c}),c[d]=g,g!==r[d]&&(s=c)}return y.createElement(J2.Provider,{value:s,children:n})},Hw=({children:n,component:e},t)=>e?y.createElement(e,{params:t}):typeof n=="function"?n(t):n,eM=n=>{let e=y.useRef(Z2),t=e.current;for(const r in n)n[r]!==t[r]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},uh=({path:n,nest:e,match:t,...r})=>{const s=Xf(),[i]=ry(s),[o,a,l]=t??tT(s.parser,n,i,e),c=eM({...JN(),...a});if(!o)return null;const u=l?y.createElement(ZN,{base:l},Hw(r,c)):Hw(r,c);return y.createElement(eT.Provider,{value:c,children:u})},Tr=y.forwardRef((n,e)=>{const t=Xf(),[r,s]=ry(t),{to:i="",href:o=i,onClick:a,asChild:l,children:c,className:u,replace:f,state:d,...g}=n,m=Y2(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(a==null||a(b),b.defaultPrevented||(b.preventDefault(),s(o,n)))}),v=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return l&&y.isValidElement(c)?y.cloneElement(c,{onClick:m,href:v}):y.createElement("a",{...g,onClick:m,href:v,className:u!=null&&u.call?u(r===o):u,children:c,ref:e})}),nT=n=>Array.isArray(n)?n.flatMap(e=>nT(e&&e.type===y.Fragment?e.props.children:e)):[n],tM=({children:n,location:e})=>{const t=Xf(),[r]=ry(t);for(const s of nT(n)){let i=0;if(y.isValidElement(s)&&(i=tT(t.parser,s.props.path,e||r,s.props.nest))[0])return y.cloneElement(s,{match:i})}return null};var cl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_o=typeof window>"u"||"Deno"in globalThis;function Tn(){}function nM(n,e){return typeof n=="function"?n(e):n}function t0(n){return typeof n=="number"&&n>=0&&n!==1/0}function rT(n,e){return Math.max(n+(e||0)-Date.now(),0)}function _a(n,e){return typeof n=="function"?n(e):n}function qn(n,e){return typeof n=="function"?n(e):n}function Gw(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==sy(o,e.options))return!1}else if(!Xc(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Xw(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(bo(e.options.mutationKey)!==bo(i))return!1}else if(!Xc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function sy(n,e){return((e==null?void 0:e.queryKeyHashFn)||bo)(n)}function bo(n){return JSON.stringify(n,(e,t)=>n0(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Xc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Xc(n[t],e[t])):!1}function sT(n,e){if(n===e)return n;const t=Yw(n)&&Yw(e);if(t||n0(n)&&n0(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const u=t?c:i[c];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=sT(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return s===o&&l===s?n:a}return e}function Gd(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Yw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function n0(n){if(!Kw(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Kw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Kw(n){return Object.prototype.toString.call(n)==="[object Object]"}function rM(n){return new Promise(e=>{setTimeout(e,n)})}function r0(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?sT(n,e):e}function sM(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function iM(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var iy=Symbol();function iT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===iy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var ro,Zs,Ia,_S,oM=(_S=class extends cl{constructor(){super();fe(this,ro);fe(this,Zs);fe(this,Ia);le(this,Ia,e=>{if(!_o&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){j(this,Zs)||this.setEventListener(j(this,Ia))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,Zs))==null||e.call(this),le(this,Zs,void 0))}setEventListener(e){var t;le(this,Ia,e),(t=j(this,Zs))==null||t.call(this),le(this,Zs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){j(this,ro)!==e&&(le(this,ro,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof j(this,ro)=="boolean"?j(this,ro):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ro=new WeakMap,Zs=new WeakMap,Ia=new WeakMap,_S),oy=new oM,Ra,ei,Da,bS,aM=(bS=class extends cl{constructor(){super();fe(this,Ra,!0);fe(this,ei);fe(this,Da);le(this,Da,e=>{if(!_o&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,ei)||this.setEventListener(j(this,Da))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,ei))==null||e.call(this),le(this,ei,void 0))}setEventListener(e){var t;le(this,Da,e),(t=j(this,ei))==null||t.call(this),le(this,ei,e(this.setOnline.bind(this)))}setOnline(e){j(this,Ra)!==e&&(le(this,Ra,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return j(this,Ra)}},Ra=new WeakMap,ei=new WeakMap,Da=new WeakMap,bS),Xd=new aM;function s0(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function lM(n){return Math.min(1e3*2**n,3e4)}function oT(n){return(n??"online")==="online"?Xd.isOnline():!0}var aT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Sg(n){return n instanceof aT}function lT(n){let e=!1,t=0,r=!1,s;const i=s0(),o=v=>{var b;r||(d(new aT(v)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>oy.isFocused()&&(n.networkMode==="always"||Xd.isOnline())&&n.canRun(),u=()=>oT(n.networkMode)&&n.canRun(),f=v=>{var b;r||(r=!0,(b=n.onSuccess)==null||b.call(n,v),s==null||s(),i.resolve(v))},d=v=>{var b;r||(r=!0,(b=n.onError)==null||b.call(n,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var b;s=x=>{(r||c())&&v(x)},(b=n.onPause)==null||b.call(n)}).then(()=>{var v;s=void 0,r||(v=n.onContinue)==null||v.call(n)}),m=()=>{if(r)return;let v;const b=t===0?n.initialPromise:void 0;try{v=b??n.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var M;if(r)return;const w=n.retry??(_o?0:3),S=n.retryDelay??lM,k=typeof S=="function"?S(t,x):S,O=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,x);if(e||!O){d(x);return}t++,(M=n.onFail)==null||M.call(n,t,x),rM(k).then(()=>c()?void 0:g()).then(()=>{e?d(x):m()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():g().then(m),i)}}function cM(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ht=cM(),so,SS,cT=(SS=class{constructor(){fe(this,so)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),t0(this.gcTime)&&le(this,so,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(_o?1/0:5*60*1e3))}clearGcTimeout(){j(this,so)&&(clearTimeout(j(this,so)),le(this,so,void 0))}},so=new WeakMap,SS),Na,Ma,Cn,At,au,io,Gn,qr,CS,uM=(CS=class extends cT{constructor(t){super();fe(this,Gn);fe(this,Na);fe(this,Ma);fe(this,Cn);fe(this,At);fe(this,au);fe(this,io);le(this,io,!1),le(this,au,t.defaultOptions),this.setOptions(t.options),this.observers=[],le(this,Cn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,le(this,Na,hM(this.options)),this.state=t.state??j(this,Na),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=j(this,At))==null?void 0:t.promise}setOptions(t){this.options={...j(this,au),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,Cn).remove(this)}setData(t,r){const s=r0(this.state.data,t,this.options);return be(this,Gn,qr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){be(this,Gn,qr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,i;const r=(s=j(this,At))==null?void 0:s.promise;return(i=j(this,At))==null||i.cancel(t),r?r.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,Na))}isActive(){return this.observers.some(t=>qn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===iy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!rT(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=j(this,At))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=j(this,At))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),j(this,Cn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(j(this,At)&&(j(this,io)?j(this,At).cancel({revert:!0}):j(this,At).cancelRetry()),this.scheduleGc()),j(this,Cn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||be(this,Gn,qr).call(this,{type:"invalidate"})}fetch(t,r){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(j(this,At))return j(this,At).continueRetry(),j(this,At).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(g=>g.options.queryFn);d&&this.setOptions(d.options)}const s=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(le(this,io,!0),s.signal)})},o=()=>{const d=iT(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),le(this,io,!1),this.options.persister?this.options.persister(d,g,this):d(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),le(this,Ma,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&be(this,Gn,qr).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=d=>{var g,m,v,b;Sg(d)&&d.silent||be(this,Gn,qr).call(this,{type:"error",error:d}),Sg(d)||((m=(g=j(this,Cn).config).onError)==null||m.call(g,d,this),(b=(v=j(this,Cn).config).onSettled)==null||b.call(v,this.state.data,d,this)),this.scheduleGc()};return le(this,At,lT({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:d=>{var g,m,v,b;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(x){l(x);return}(m=(g=j(this,Cn).config).onSuccess)==null||m.call(g,d,this),(b=(v=j(this,Cn).config).onSettled)==null||b.call(v,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,g)=>{be(this,Gn,qr).call(this,{type:"failed",failureCount:d,error:g})},onPause:()=>{be(this,Gn,qr).call(this,{type:"pause"})},onContinue:()=>{be(this,Gn,qr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),j(this,At).start()}},Na=new WeakMap,Ma=new WeakMap,Cn=new WeakMap,At=new WeakMap,au=new WeakMap,io=new WeakMap,Gn=new WeakSet,qr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...uT(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Sg(i)&&i.revert&&j(this,Ma)?{...j(this,Ma),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),ht.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),j(this,Cn).notify({query:this,type:"updated",action:t})})},CS);function uT(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function hM(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var xr,TS,dM=(TS=class extends cl{constructor(e={}){super();fe(this,xr);this.config=e,le(this,xr,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??sy(s,t);let o=this.get(i);return o||(o=new uM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){j(this,xr).has(e.queryHash)||(j(this,xr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=j(this,xr).get(e.queryHash);t&&(e.destroy(),t===e&&j(this,xr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return j(this,xr).get(e)}getAll(){return[...j(this,xr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Gw(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Gw(e,r)):t}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},xr=new WeakMap,TS),wr,jt,oo,_r,Ws,ES,fM=(ES=class extends cT{constructor(e){super();fe(this,_r);fe(this,wr);fe(this,jt);fe(this,oo);this.mutationId=e.mutationId,le(this,jt,e.mutationCache),le(this,wr,[]),this.state=e.state||hT(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){j(this,wr).includes(e)||(j(this,wr).push(e),this.clearGcTimeout(),j(this,jt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){le(this,wr,j(this,wr).filter(t=>t!==e)),this.scheduleGc(),j(this,jt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){j(this,wr).length||(this.state.status==="pending"?this.scheduleGc():j(this,jt).remove(this))}continue(){var e;return((e=j(this,oo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,c,u,f,d,g,m,v,b,x,w,S,k,O,M,E;le(this,oo,lT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{be(this,_r,Ws).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{be(this,_r,Ws).call(this,{type:"pause"})},onContinue:()=>{be(this,_r,Ws).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,jt).canRun(this)}));const t=this.state.status==="pending",r=!j(this,oo).canStart();try{if(!t){be(this,_r,Ws).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=j(this,jt).config).onMutate)==null?void 0:i.call(s,e,this));const P=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));P!==this.state.context&&be(this,_r,Ws).call(this,{type:"pending",context:P,variables:e,isPaused:r})}const T=await j(this,oo).start();return await((c=(l=j(this,jt).config).onSuccess)==null?void 0:c.call(l,T,e,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,T,e,this.state.context)),await((g=(d=j(this,jt).config).onSettled)==null?void 0:g.call(d,T,null,this.state.variables,this.state.context,this)),await((v=(m=this.options).onSettled)==null?void 0:v.call(m,T,null,e,this.state.context)),be(this,_r,Ws).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(b=j(this,jt).config).onError)==null?void 0:x.call(b,T,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,T,e,this.state.context)),await((O=(k=j(this,jt).config).onSettled)==null?void 0:O.call(k,void 0,T,this.state.variables,this.state.context,this)),await((E=(M=this.options).onSettled)==null?void 0:E.call(M,void 0,T,e,this.state.context)),T}finally{be(this,_r,Ws).call(this,{type:"error",error:T})}}finally{j(this,jt).runNext(this)}}},wr=new WeakMap,jt=new WeakMap,oo=new WeakMap,_r=new WeakSet,Ws=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ht.batch(()=>{j(this,wr).forEach(r=>{r.onMutationUpdate(e)}),j(this,jt).notify({mutation:this,type:"updated",action:e})})},ES);function hT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hn,lu,kS,pM=(kS=class extends cl{constructor(e={}){super();fe(this,hn);fe(this,lu);this.config=e,le(this,hn,new Map),le(this,lu,Date.now())}build(e,t,r){const s=new fM({mutationCache:this,mutationId:++Gu(this,lu)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){const t=hh(e),r=j(this,hn).get(t)??[];r.push(e),j(this,hn).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=hh(e);if(j(this,hn).has(t)){const s=(r=j(this,hn).get(t))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?j(this,hn).delete(t):j(this,hn).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=j(this,hn).get(hh(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=j(this,hn).get(hh(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...j(this,hn).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Xw(t,r))}findAll(e={}){return this.getAll().filter(t=>Xw(e,t))}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ht.batch(()=>Promise.all(e.map(t=>t.continue().catch(Tn))))}},hn=new WeakMap,lu=new WeakMap,kS);function hh(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function qw(n){return{onFetch:(e,t)=>{var u,f,d,g,m;const r=e.options,s=(d=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:d.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=iT(e.options,e.fetchOptions),w=async(S,k,O)=>{if(v)return Promise.reject();if(k==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:k,direction:O?"backward":"forward",meta:e.options.meta};b(M);const E=await x(M),{maxPages:T}=e.options,P=O?iM:sM;return{pages:P(S.pages,E,T),pageParams:P(S.pageParams,k,T)}};if(s&&i.length){const S=s==="backward",k=S?gM:Qw,O={pages:i,pageParams:o},M=k(r,O);a=await w(O,M,S)}else{const S=n??i.length;do{const k=l===0?o[0]??r.initialPageParam:Qw(r,a);if(l>0&&k==null)break;a=await w(a,k),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function Qw(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function gM(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ze,ti,ni,ja,La,ri,Fa,Ua,PS,mM=(PS=class{constructor(n={}){fe(this,Ze);fe(this,ti);fe(this,ni);fe(this,ja);fe(this,La);fe(this,ri);fe(this,Fa);fe(this,Ua);le(this,Ze,n.queryCache||new dM),le(this,ti,n.mutationCache||new pM),le(this,ni,n.defaultOptions||{}),le(this,ja,new Map),le(this,La,new Map),le(this,ri,0)}mount(){Gu(this,ri)._++,j(this,ri)===1&&(le(this,Fa,oy.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,Ze).onFocus())})),le(this,Ua,Xd.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,Ze).onOnline())})))}unmount(){var n,e;Gu(this,ri)._--,j(this,ri)===0&&((n=j(this,Fa))==null||n.call(this),le(this,Fa,void 0),(e=j(this,Ua))==null||e.call(this),le(this,Ua,void 0))}isFetching(n){return j(this,Ze).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return j(this,ti).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,Ze).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=j(this,Ze).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(_a(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return j(this,Ze).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=j(this,Ze).get(r.queryHash),i=s==null?void 0:s.state.data,o=nM(e,i);if(o!==void 0)return j(this,Ze).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return ht.batch(()=>j(this,Ze).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,Ze).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=j(this,Ze);ht.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=j(this,Ze),r={type:"active",...n};return ht.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=ht.batch(()=>j(this,Ze).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(n={},e={}){return ht.batch(()=>{if(j(this,Ze).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ht.batch(()=>j(this,Ze).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Tn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=j(this,Ze).build(this,e);return t.isStaleByTime(_a(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Tn).catch(Tn)}fetchInfiniteQuery(n){return n.behavior=qw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Tn).catch(Tn)}ensureInfiniteQueryData(n){return n.behavior=qw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Xd.isOnline()?j(this,ti).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,Ze)}getMutationCache(){return j(this,ti)}getDefaultOptions(){return j(this,ni)}setDefaultOptions(n){le(this,ni,n)}setQueryDefaults(n,e){j(this,ja).set(bo(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...j(this,ja).values()];let t={};return e.forEach(r=>{Xc(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){j(this,La).set(bo(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...j(this,La).values()];let t={};return e.forEach(r=>{Xc(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...j(this,ni).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=sy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===iy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...j(this,ni).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){j(this,Ze).clear(),j(this,ti).clear()}},Ze=new WeakMap,ti=new WeakMap,ni=new WeakMap,ja=new WeakMap,La=new WeakMap,ri=new WeakMap,Fa=new WeakMap,Ua=new WeakMap,PS),Qt,Ee,cu,Lt,ao,Ba,si,br,uu,za,Va,lo,co,ii,$a,Me,ic,i0,o0,a0,l0,c0,u0,h0,dT,OS,vM=(OS=class extends cl{constructor(e,t){super();fe(this,Me);fe(this,Qt);fe(this,Ee);fe(this,cu);fe(this,Lt);fe(this,ao);fe(this,Ba);fe(this,si);fe(this,br);fe(this,uu);fe(this,za);fe(this,Va);fe(this,lo);fe(this,co);fe(this,ii);fe(this,$a,new Set);this.options=t,le(this,Qt,e),le(this,br,null),le(this,si,s0()),this.options.experimental_prefetchInRender||j(this,si).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,Ee).addObserver(this),Jw(j(this,Ee),this.options)?be(this,Me,ic).call(this):this.updateResult(),be(this,Me,l0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d0(j(this,Ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d0(j(this,Ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,be(this,Me,c0).call(this),be(this,Me,u0).call(this),j(this,Ee).removeObserver(this)}setOptions(e,t){const r=this.options,s=j(this,Ee);if(this.options=j(this,Qt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qn(this.options.enabled,j(this,Ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");be(this,Me,h0).call(this),j(this,Ee).setOptions(this.options),r._defaulted&&!Gd(this.options,r)&&j(this,Qt).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,Ee),observer:this});const i=this.hasListeners();i&&Zw(j(this,Ee),s,this.options,r)&&be(this,Me,ic).call(this),this.updateResult(t),i&&(j(this,Ee)!==s||qn(this.options.enabled,j(this,Ee))!==qn(r.enabled,j(this,Ee))||_a(this.options.staleTime,j(this,Ee))!==_a(r.staleTime,j(this,Ee)))&&be(this,Me,i0).call(this);const o=be(this,Me,o0).call(this);i&&(j(this,Ee)!==s||qn(this.options.enabled,j(this,Ee))!==qn(r.enabled,j(this,Ee))||o!==j(this,ii))&&be(this,Me,a0).call(this,o)}getOptimisticResult(e){const t=j(this,Qt).getQueryCache().build(j(this,Qt),e),r=this.createResult(t,e);return xM(this,r)&&(le(this,Lt,r),le(this,Ba,this.options),le(this,ao,j(this,Ee).state)),r}getCurrentResult(){return j(this,Lt)}trackResult(e,t){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),r}trackProp(e){j(this,$a).add(e)}getCurrentQuery(){return j(this,Ee)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=j(this,Qt).defaultQueryOptions(e),r=j(this,Qt).getQueryCache().build(j(this,Qt),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return be(this,Me,ic).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,Lt)))}createResult(e,t){var T;const r=j(this,Ee),s=this.options,i=j(this,Lt),o=j(this,ao),a=j(this,Ba),c=e!==r?e.state:j(this,cu),{state:u}=e;let f={...u},d=!1,g;if(t._optimisticResults){const P=this.hasListeners(),A=!P&&Jw(e,t),D=P&&Zw(e,r,t,s);(A||D)&&(f={...f,...uT(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:m,errorUpdatedAt:v,status:b}=f;if(t.select&&f.data!==void 0)if(i&&f.data===(o==null?void 0:o.data)&&t.select===j(this,uu))g=j(this,za);else try{le(this,uu,t.select),g=t.select(f.data),g=r0(i==null?void 0:i.data,g,t),le(this,za,g),le(this,br,null)}catch(P){le(this,br,P)}else g=f.data;if(t.placeholderData!==void 0&&g===void 0&&b==="pending"){let P;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))P=i.data;else if(P=typeof t.placeholderData=="function"?t.placeholderData((T=j(this,Va))==null?void 0:T.state.data,j(this,Va)):t.placeholderData,t.select&&P!==void 0)try{P=t.select(P),le(this,br,null)}catch(A){le(this,br,A)}P!==void 0&&(b="success",g=r0(i==null?void 0:i.data,P,t),d=!0)}j(this,br)&&(m=j(this,br),g=j(this,za),v=Date.now(),b="error");const x=f.fetchStatus==="fetching",w=b==="pending",S=b==="error",k=w&&x,O=g!==void 0,E={status:b,fetchStatus:f.fetchStatus,isPending:w,isSuccess:b==="success",isError:S,isInitialLoading:k,isLoading:k,data:g,dataUpdatedAt:f.dataUpdatedAt,error:m,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:S&&!O,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:S&&O,isStale:ay(e,t),refetch:this.refetch,promise:j(this,si)};if(this.options.experimental_prefetchInRender){const P=N=>{E.status==="error"?N.reject(E.error):E.data!==void 0&&N.resolve(E.data)},A=()=>{const N=le(this,si,E.promise=s0());P(N)},D=j(this,si);switch(D.status){case"pending":e.queryHash===r.queryHash&&P(D);break;case"fulfilled":(E.status==="error"||E.data!==D.value)&&A();break;case"rejected":(E.status!=="error"||E.error!==D.reason)&&A();break}}return E}updateResult(e){const t=j(this,Lt),r=this.createResult(j(this,Ee),this.options);if(le(this,ao,j(this,Ee).state),le(this,Ba,this.options),j(this,ao).data!==void 0&&le(this,Va,j(this,Ee)),Gd(r,t))return;le(this,Lt,r);const s={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!j(this,$a).size)return!0;const l=new Set(a??j(this,$a));return this.options.throwOnError&&l.add("error"),Object.keys(j(this,Lt)).some(c=>{const u=c;return j(this,Lt)[u]!==t[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),be(this,Me,dT).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&be(this,Me,l0).call(this)}},Qt=new WeakMap,Ee=new WeakMap,cu=new WeakMap,Lt=new WeakMap,ao=new WeakMap,Ba=new WeakMap,si=new WeakMap,br=new WeakMap,uu=new WeakMap,za=new WeakMap,Va=new WeakMap,lo=new WeakMap,co=new WeakMap,ii=new WeakMap,$a=new WeakMap,Me=new WeakSet,ic=function(e){be(this,Me,h0).call(this);let t=j(this,Ee).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Tn)),t},i0=function(){be(this,Me,c0).call(this);const e=_a(this.options.staleTime,j(this,Ee));if(_o||j(this,Lt).isStale||!t0(e))return;const r=rT(j(this,Lt).dataUpdatedAt,e)+1;le(this,lo,setTimeout(()=>{j(this,Lt).isStale||this.updateResult()},r))},o0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,Ee)):this.options.refetchInterval)??!1},a0=function(e){be(this,Me,u0).call(this),le(this,ii,e),!(_o||qn(this.options.enabled,j(this,Ee))===!1||!t0(j(this,ii))||j(this,ii)===0)&&le(this,co,setInterval(()=>{(this.options.refetchIntervalInBackground||oy.isFocused())&&be(this,Me,ic).call(this)},j(this,ii)))},l0=function(){be(this,Me,i0).call(this),be(this,Me,a0).call(this,be(this,Me,o0).call(this))},c0=function(){j(this,lo)&&(clearTimeout(j(this,lo)),le(this,lo,void 0))},u0=function(){j(this,co)&&(clearInterval(j(this,co)),le(this,co,void 0))},h0=function(){const e=j(this,Qt).getQueryCache().build(j(this,Qt),this.options);if(e===j(this,Ee))return;const t=j(this,Ee);le(this,Ee,e),le(this,cu,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},dT=function(e){ht.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(j(this,Lt))}),j(this,Qt).getQueryCache().notify({query:j(this,Ee),type:"observerResultsUpdated"})})},OS);function yM(n,e){return qn(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Jw(n,e){return yM(n,e)||n.state.data!==void 0&&d0(n,e,e.refetchOnMount)}function d0(n,e,t){if(qn(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&ay(n,e)}return!1}function Zw(n,e,t,r){return(n!==e||qn(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&ay(n,t)}function ay(n,e){return qn(e.enabled,n)!==!1&&n.isStaleByTime(_a(e.staleTime,n))}function xM(n,e){return!Gd(n.getCurrentResult(),e)}var oi,ai,Jt,ns,ms,id,f0,AS,wM=(AS=class extends cl{constructor(t,r){super();fe(this,ms);fe(this,oi);fe(this,ai);fe(this,Jt);fe(this,ns);le(this,oi,t),this.setOptions(r),this.bindMethods(),be(this,ms,id).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=j(this,oi).defaultMutationOptions(t),Gd(this.options,r)||j(this,oi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:j(this,Jt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&bo(r.mutationKey)!==bo(this.options.mutationKey)?this.reset():((s=j(this,Jt))==null?void 0:s.state.status)==="pending"&&j(this,Jt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=j(this,Jt))==null||t.removeObserver(this)}onMutationUpdate(t){be(this,ms,id).call(this),be(this,ms,f0).call(this,t)}getCurrentResult(){return j(this,ai)}reset(){var t;(t=j(this,Jt))==null||t.removeObserver(this),le(this,Jt,void 0),be(this,ms,id).call(this),be(this,ms,f0).call(this)}mutate(t,r){var s;return le(this,ns,r),(s=j(this,Jt))==null||s.removeObserver(this),le(this,Jt,j(this,oi).getMutationCache().build(j(this,oi),this.options)),j(this,Jt).addObserver(this),j(this,Jt).execute(t)}},oi=new WeakMap,ai=new WeakMap,Jt=new WeakMap,ns=new WeakMap,ms=new WeakSet,id=function(){var r;const t=((r=j(this,Jt))==null?void 0:r.state)??hT();le(this,ai,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},f0=function(t){ht.batch(()=>{var r,s,i,o,a,l,c,u;if(j(this,ns)&&this.hasListeners()){const f=j(this,ai).variables,d=j(this,ai).context;(t==null?void 0:t.type)==="success"?((s=(r=j(this,ns)).onSuccess)==null||s.call(r,t.data,f,d),(o=(i=j(this,ns)).onSettled)==null||o.call(i,t.data,null,f,d)):(t==null?void 0:t.type)==="error"&&((l=(a=j(this,ns)).onError)==null||l.call(a,t.error,f,d),(u=(c=j(this,ns)).onSettled)==null||u.call(c,void 0,t.error,f,d))}this.listeners.forEach(f=>{f(j(this,ai))})})},AS),fT=y.createContext(void 0),ly=n=>{const e=y.useContext(fT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},_M=({client:n,children:e})=>(y.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),p.jsx(fT.Provider,{value:n,children:e})),pT=y.createContext(!1),bM=()=>y.useContext(pT);pT.Provider;function SM(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var CM=y.createContext(SM()),TM=()=>y.useContext(CM);function gT(n,e){return typeof n=="function"?n(...e):!!n}function p0(){}var EM=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},kM=n=>{y.useEffect(()=>{n.clearReset()},[n])},PM=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&gT(t,[n.error,r]),OM=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},AM=(n,e)=>n.isLoading&&n.isFetching&&!e,IM=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,e_=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function RM(n,e,t){var u,f,d,g,m;const r=ly(),s=bM(),i=TM(),o=r.defaultQueryOptions(n);(f=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,o),o._optimisticResults=s?"isRestoring":"optimistic",OM(o),EM(o,i),kM(i);const a=!r.getQueryCache().get(o.queryHash),[l]=y.useState(()=>new e(r,o)),c=l.getOptimisticResult(o);if(y.useSyncExternalStore(y.useCallback(v=>{const b=s?p0:l.subscribe(ht.batchCalls(v));return l.updateResult(),b},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),y.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),IM(o,c))throw e_(o,l,i);if(PM({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;if((g=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_afterQuery)==null||g.call(d,o,c),o.experimental_prefetchInRender&&!_o&&AM(c,s)){const v=a?e_(o,l,i):(m=r.getQueryCache().get(o.queryHash))==null?void 0:m.promise;v==null||v.catch(p0).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function DM(n,e){return RM(n,vM)}function mT(n,e){const t=ly(),[r]=y.useState(()=>new wM(t,n));y.useEffect(()=>{r.setOptions(n)},[r,n]);const s=y.useSyncExternalStore(y.useCallback(o=>r.subscribe(ht.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=y.useCallback((o,a)=>{r.mutate(o,a).catch(p0)},[r]);if(s.error&&gT(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function vT(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function NM(n,e,t){const r=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await vT(r),r}const MM=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await vT(t),await t.json())},jM=new mM({defaultOptions:{queries:{queryFn:MM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),LM=1,FM=1e6;let Cg=0;function UM(){return Cg=(Cg+1)%Number.MAX_SAFE_INTEGER,Cg.toString()}const Tg=new Map,t_=n=>{if(Tg.has(n))return;const e=setTimeout(()=>{Tg.delete(n),xc({type:"REMOVE_TOAST",toastId:n})},FM);Tg.set(n,e)},BM=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,LM)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?t_(t):n.toasts.forEach(r=>{t_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},od=[];let ad={toasts:[]};function xc(n){ad=BM(ad,n),od.forEach(e=>{e(ad)})}function zM({...n}){const e=UM(),t=s=>xc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>xc({type:"DISMISS_TOAST",toastId:e});return xc({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function ul(){const[n,e]=y.useState(ad);return y.useEffect(()=>(od.push(e),()=>{const t=od.indexOf(e);t>-1&&od.splice(t,1)}),[n]),{...n,toast:zM,dismiss:t=>xc({type:"DISMISS_TOAST",toastId:t})}}function te(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function n_(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Yf(...n){return e=>{let t=!1;const r=n.map(s=>{const i=n_(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():n_(n[s],null)}}}}function Ce(...n){return y.useCallback(Yf(...n),n)}function VM(n,e){const t=y.createContext(e),r=i=>{const{children:o,...a}=i,l=y.useMemo(()=>a,Object.values(a));return p.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function s(i){const o=y.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function Br(n,e=[]){let t=[];function r(i,o){const a=y.createContext(o),l=t.length;t=[...t,o];const c=f=>{var x;const{scope:d,children:g,...m}=f,v=((x=d==null?void 0:d[n])==null?void 0:x[l])||a,b=y.useMemo(()=>m,Object.values(m));return p.jsx(v.Provider,{value:b,children:g})};c.displayName=i+"Provider";function u(f,d){var v;const g=((v=d==null?void 0:d[n])==null?void 0:v[l])||a,m=y.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=t.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return y.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[r,$M(s,...e)]}function $M(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function So(n){const e=HM(n),t=y.forwardRef((r,s)=>{const{children:i,...o}=r,a=y.Children.toArray(i),l=a.find(XM);if(l){const c=l.props.children,u=a.map(f=>f===l?y.Children.count(c)>1?y.Children.only(null):y.isValidElement(c)?c.props.children:null:f);return p.jsx(e,{...o,ref:s,children:y.isValidElement(c)?y.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var WM=So("Slot");function HM(n){const e=y.forwardRef((t,r)=>{const{children:s,...i}=t;if(y.isValidElement(s)){const o=KM(s),a=YM(i,s.props);return s.type!==y.Fragment&&(a.ref=r?Yf(r,o):o),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var yT=Symbol("radix.slottable");function GM(n){const e=({children:t})=>p.jsx(p.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=yT,e}function XM(n){return y.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===yT}function YM(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{i(...a),s(...a)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function KM(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Kf(n){const e=n+"CollectionProvider",[t,r]=Br(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:x}=v,w=$s.useRef(null),S=$s.useRef(new Map).current;return p.jsx(s,{scope:b,itemMap:S,collectionRef:w,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=So(a),c=$s.forwardRef((v,b)=>{const{scope:x,children:w}=v,S=i(a,x),k=Ce(b,S.collectionRef);return p.jsx(l,{ref:k,children:w})});c.displayName=a;const u=n+"CollectionItemSlot",f="data-radix-collection-item",d=So(u),g=$s.forwardRef((v,b)=>{const{scope:x,children:w,...S}=v,k=$s.useRef(null),O=Ce(b,k),M=i(u,x);return $s.useEffect(()=>(M.itemMap.set(k,{ref:k,...S}),()=>void M.itemMap.delete(k))),p.jsx(d,{[f]:"",ref:O,children:w})});g.displayName=u;function m(v){const b=i(n+"CollectionConsumer",v);return $s.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((M,E)=>S.indexOf(M.ref.current)-S.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},m,r]}var qM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ge=qM.reduce((n,e)=>{const t=So(`Primitive.${e}`),r=y.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function cy(n,e){n&&Mo.flushSync(()=>n.dispatchEvent(e))}function qe(n){const e=y.useRef(n);return y.useEffect(()=>{e.current=n}),y.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function QM(n,e=globalThis==null?void 0:globalThis.document){const t=qe(n);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var JM="DismissableLayer",g0="dismissableLayer.update",ZM="dismissableLayer.pointerDownOutside",ej="dismissableLayer.focusOutside",r_,xT=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hl=y.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,c=y.useContext(xT),[u,f]=y.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),m=Ce(e,E=>f(E)),v=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(b),w=u?v.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=x,O=nj(E=>{const T=E.target,P=[...c.branches].some(A=>A.contains(T));!k||P||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},d),M=rj(E=>{const T=E.target;[...c.branches].some(A=>A.contains(T))||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},d);return QM(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},d),y.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(r_=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),s_(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=r_)}},[u,d,t,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),s_())},[u,c]),y.useEffect(()=>{const E=()=>g({});return document.addEventListener(g0,E),()=>document.removeEventListener(g0,E)},[]),p.jsx(ge.div,{...l,ref:m,style:{pointerEvents:S?k?"auto":"none":void 0,...n.style},onFocusCapture:te(n.onFocusCapture,M.onFocusCapture),onBlurCapture:te(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:te(n.onPointerDownCapture,O.onPointerDownCapture)})});hl.displayName=JM;var tj="DismissableLayerBranch",wT=y.forwardRef((n,e)=>{const t=y.useContext(xT),r=y.useRef(null),s=Ce(e,r);return y.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),p.jsx(ge.div,{...n,ref:s})});wT.displayName=tj;function nj(n,e=globalThis==null?void 0:globalThis.document){const t=qe(n),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){_T(ZM,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function rj(n,e=globalThis==null?void 0:globalThis.document){const t=qe(n),r=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!r.current&&_T(ej,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function s_(){const n=new CustomEvent(g0);document.dispatchEvent(n)}function _T(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?cy(s,i):s.dispatchEvent(i)}var sj=hl,ij=wT,Tt=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},oj="Portal",mu=y.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=y.useState(!1);Tt(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?TN.createPortal(p.jsx(ge.div,{...r,ref:e}),o):null});mu.displayName=oj;function aj(n,e){return y.useReducer((t,r)=>e[t][r]??t,n)}var cn=n=>{const{present:e,children:t}=n,r=lj(e),s=typeof t=="function"?t({present:r.isPresent}):y.Children.only(t),i=Ce(r.ref,cj(s));return typeof t=="function"||r.isPresent?y.cloneElement(s,{ref:i}):null};cn.displayName="Presence";function lj(n){const[e,t]=y.useState(),r=y.useRef({}),s=y.useRef(n),i=y.useRef("none"),o=n?"mounted":"unmounted",[a,l]=aj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=dh(r.current);i.current=a==="mounted"?c:"none"},[a]),Tt(()=>{const c=r.current,u=s.current;if(u!==n){const d=i.current,g=dh(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Tt(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=g=>{const v=dh(r.current).includes(g.animationName);if(g.target===e&&v&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},d=g=>{g.target===e&&(i.current=dh(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function dh(n){return(n==null?void 0:n.animationName)||"none"}function cj(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ja({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=uj({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,a=qe(t),l=y.useCallback(c=>{if(i){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else s(c)},[i,n,s,a]);return[o,l]}function uj({defaultProp:n,onChange:e}){const t=y.useState(n),[r]=t,s=y.useRef(r),i=qe(e);return y.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}var hj="VisuallyHidden",vu=y.forwardRef((n,e)=>p.jsx(ge.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));vu.displayName=hj;var dj=vu,uy="ToastProvider",[hy,fj,pj]=Kf("Toast"),[bT,pW]=Br("Toast",[pj]),[gj,qf]=bT(uy),ST=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[a,l]=y.useState(null),[c,u]=y.useState(0),f=y.useRef(!1),d=y.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${uy}\`. Expected non-empty \`string\`.`),p.jsx(hy.Provider,{scope:e,children:p.jsx(gj,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>u(g=>g+1),[]),onToastRemove:y.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:d,children:o})})};ST.displayName=uy;var CT="ToastViewport",mj=["F8"],m0="toast.viewportPause",v0="toast.viewportResume",TT=y.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=mj,label:s="Notifications ({hotkey})",...i}=n,o=qf(CT,t),a=fj(t),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),f=y.useRef(null),d=Ce(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;y.useEffect(()=>{const b=x=>{var S;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),y.useEffect(()=>{const b=l.current,x=f.current;if(m&&b&&x){const w=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(m0);x.dispatchEvent(M),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(v0);x.dispatchEvent(M),o.isClosePausedRef.current=!1}},k=M=>{!b.contains(M.relatedTarget)&&S()},O=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",w),b.addEventListener("focusout",k),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",O),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",O),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[m,o.isClosePausedRef]);const v=y.useCallback(({tabbingDirection:b})=>{const w=a().map(S=>{const k=S.ref.current,O=[k,...Oj(k)];return b==="forwards"?O:O.reverse()});return(b==="forwards"?w.reverse():w).flat()},[a]);return y.useEffect(()=>{const b=f.current;if(b){const x=w=>{var O,M,E;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const T=document.activeElement,P=w.shiftKey;if(w.target===b&&P){(O=c.current)==null||O.focus();return}const N=v({tabbingDirection:P?"backwards":"forwards"}),R=N.findIndex(H=>H===T);Eg(N.slice(R+1))?w.preventDefault():P?(M=c.current)==null||M.focus():(E=u.current)==null||E.focus()}};return b.addEventListener("keydown",x),()=>b.removeEventListener("keydown",x)}},[a,v]),p.jsxs(ij,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&p.jsx(y0,{ref:c,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});Eg(b)}}),p.jsx(hy.Slot,{scope:t,children:p.jsx(ge.ol,{tabIndex:-1,...i,ref:d})}),m&&p.jsx(y0,{ref:u,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});Eg(b)}})]})});TT.displayName=CT;var ET="ToastFocusProxy",y0=y.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=qf(ET,t);return p.jsx(vu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});y0.displayName=ET;var Qf="Toast",vj="toast.swipeStart",yj="toast.swipeMove",xj="toast.swipeCancel",wj="toast.swipeEnd",kT=y.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[a=!0,l]=Ja({prop:r,defaultProp:s,onChange:i});return p.jsx(cn,{present:t||a,children:p.jsx(Sj,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:qe(n.onPause),onResume:qe(n.onResume),onSwipeStart:te(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:te(n.onSwipeMove,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:te(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:te(n.onSwipeEnd,c=>{const{x:u,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});kT.displayName=Qf;var[_j,bj]=bT(Qf,{onClose(){}}),Sj=y.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:d,onSwipeEnd:g,...m}=n,v=qf(Qf,t),[b,x]=y.useState(null),w=Ce(e,H=>x(H)),S=y.useRef(null),k=y.useRef(null),O=s||v.duration,M=y.useRef(0),E=y.useRef(O),T=y.useRef(0),{onToastAdd:P,onToastRemove:A}=v,D=qe(()=>{var ne;(b==null?void 0:b.contains(document.activeElement))&&((ne=v.viewport)==null||ne.focus()),o()}),N=y.useCallback(H=>{!H||H===1/0||(window.clearTimeout(T.current),M.current=new Date().getTime(),T.current=window.setTimeout(D,H))},[D]);y.useEffect(()=>{const H=v.viewport;if(H){const ne=()=>{N(E.current),c==null||c()},Q=()=>{const oe=new Date().getTime()-M.current;E.current=E.current-oe,window.clearTimeout(T.current),l==null||l()};return H.addEventListener(m0,Q),H.addEventListener(v0,ne),()=>{H.removeEventListener(m0,Q),H.removeEventListener(v0,ne)}}},[v.viewport,O,l,c,N]),y.useEffect(()=>{i&&!v.isClosePausedRef.current&&N(O)},[i,O,v.isClosePausedRef,N]),y.useEffect(()=>(P(),()=>A()),[P,A]);const R=y.useMemo(()=>b?NT(b):null,[b]);return v.viewport?p.jsxs(p.Fragment,{children:[R&&p.jsx(Cj,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),p.jsx(_j,{scope:t,onClose:D,children:Mo.createPortal(p.jsx(hy.ItemSlot,{scope:t,children:p.jsx(sj,{asChild:!0,onEscapeKeyDown:te(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||D(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:te(n.onKeyDown,H=>{H.key==="Escape"&&(a==null||a(H.nativeEvent),H.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:te(n.onPointerDown,H=>{H.button===0&&(S.current={x:H.clientX,y:H.clientY})}),onPointerMove:te(n.onPointerMove,H=>{if(!S.current)return;const ne=H.clientX-S.current.x,Q=H.clientY-S.current.y,oe=!!k.current,U=["left","right"].includes(v.swipeDirection),$=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,J=U?$(0,ne):0,ue=U?0:$(0,Q),q=H.pointerType==="touch"?10:2,re={x:J,y:ue},V={originalEvent:H,delta:re};oe?(k.current=re,fh(yj,f,V,{discrete:!1})):i_(re,v.swipeDirection,q)?(k.current=re,fh(vj,u,V,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ne)>q||Math.abs(Q)>q)&&(S.current=null)}),onPointerUp:te(n.onPointerUp,H=>{const ne=k.current,Q=H.target;if(Q.hasPointerCapture(H.pointerId)&&Q.releasePointerCapture(H.pointerId),k.current=null,S.current=null,ne){const oe=H.currentTarget,U={originalEvent:H,delta:ne};i_(ne,v.swipeDirection,v.swipeThreshold)?fh(wj,g,U,{discrete:!0}):fh(xj,d,U,{discrete:!0}),oe.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),Cj=n=>{const{__scopeToast:e,children:t,...r}=n,s=qf(Qf,e),[i,o]=y.useState(!1),[a,l]=y.useState(!1);return kj(()=>o(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(mu,{asChild:!0,children:p.jsx(vu,{...r,children:i&&p.jsxs(p.Fragment,{children:[s.label," ",t]})})})},Tj="ToastTitle",PT=y.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(ge.div,{...r,ref:e})});PT.displayName=Tj;var Ej="ToastDescription",OT=y.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(ge.div,{...r,ref:e})});OT.displayName=Ej;var AT="ToastAction",IT=y.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?p.jsx(DT,{altText:t,asChild:!0,children:p.jsx(dy,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${AT}\`. Expected non-empty \`string\`.`),null)});IT.displayName=AT;var RT="ToastClose",dy=y.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=bj(RT,t);return p.jsx(DT,{asChild:!0,children:p.jsx(ge.button,{type:"button",...r,ref:e,onClick:te(n.onClick,s.onClose)})})});dy.displayName=RT;var DT=y.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return p.jsx(ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function NT(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Pj(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...NT(r))}}),e}function fh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?cy(s,i):s.dispatchEvent(i)}var i_=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function kj(n=()=>{}){const e=qe(n);Tt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Pj(n){return n.nodeType===n.ELEMENT_NODE}function Oj(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Eg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Aj=ST,MT=TT,jT=kT,LT=PT,FT=OT,UT=IT,BT=dy;function zT(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=zT(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function VT(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=zT(n))&&(r&&(r+=" "),r+=e);return r}const o_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,a_=VT,Jf=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return a_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=t==null?void 0:t[c],f=i==null?void 0:i[c];if(u===null)return null;const d=o_(u)||o_(f);return s[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:d,...g}=u;return Object.entries(g).every(m=>{let[v,b]=m;return Array.isArray(b)?b.includes({...i,...a}[v]):{...i,...a}[v]===b})?[...c,f,d]:c},[]);return a_(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$T=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=y.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...Rj,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:$T("lucide",s),...a},[...o.map(([c,u])=>y.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=y.forwardRef(({className:r,...s},i)=>y.createElement(Dj,{ref:i,iconNode:e,className:$T(`lucide-${Ij(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=ve("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=ve("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=ve("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=ve("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=ve("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ve("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=ve("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ve("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=ve("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=ve("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=ve("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=ve("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=ve("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=ve("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=ve("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),gy="-",d4=n=>{const e=p4(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(gy);return a[0]===""&&a.length!==1&&a.shift(),HT(a,e)||f4(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},HT=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?HT(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(gy);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},u_=/^\[(.+)\]$/,f4=n=>{if(u_.test(n)){const e=u_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},p4=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return m4(Object.entries(n.classGroups),t).forEach(([i,o])=>{_0(o,r,i,e)}),r},_0=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:h_(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(g4(s)){_0(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{_0(o,h_(e,i),t,r)})})},h_=(n,e)=>{let t=n;return e.split(gy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},g4=n=>n.isThemeGetter,m4=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,v4=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},GT="!",y4=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,f;for(let b=0;b<a.length;b++){let x=a[b];if(c===0){if(x===s&&(r||a.slice(b,b+i)===e)){l.push(a.slice(u,b)),u=b+i;continue}if(x==="/"){f=b;continue}}x==="["?c++:x==="]"&&c--}const d=l.length===0?a:a.substring(u),g=d.startsWith(GT),m=g?d.substring(1):d,v=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:o}):o},x4=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},w4=n=>({cache:v4(n.cacheSize),parseClassName:y4(n),...d4(n)}),_4=/\s+/,b4=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(_4);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:g}=t(c);let m=!!g,v=r(m?d.substring(0,g):d);if(!v){if(!m){a=c+(a.length>0?" "+a:a);continue}if(v=r(d),!v){a=c+(a.length>0?" "+a:a);continue}m=!1}const b=x4(u).join(":"),x=f?b+GT:b,w=x+v;if(i.includes(w))continue;i.push(w);const S=s(v,m);for(let k=0;k<S.length;++k){const O=S[k];i.push(x+O)}a=c+(a.length>0?" "+a:a)}return a};function S4(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=XT(e))&&(r&&(r+=" "),r+=t);return r}const XT=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=XT(n[r]))&&(t&&(t+=" "),t+=e);return t};function C4(n,...e){let t,r,s,i=o;function o(l){const c=e.reduce((u,f)=>f(u),n());return t=w4(c),r=t.cache.get,s=t.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=b4(l,t);return s(l,u),u}return function(){return i(S4.apply(null,arguments))}}const $e=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},YT=/^\[(?:([a-z-]+):)?(.+)\]$/i,T4=/^\d+\/\d+$/,E4=new Set(["px","full","screen"]),k4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,P4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,O4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,A4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=n=>ba(n)||E4.has(n)||T4.test(n),Fs=n=>dl(n,"length",U4),ba=n=>!!n&&!Number.isNaN(Number(n)),kg=n=>dl(n,"number",ba),ql=n=>!!n&&Number.isInteger(Number(n)),R4=n=>n.endsWith("%")&&ba(n.slice(0,-1)),_e=n=>YT.test(n),Us=n=>k4.test(n),D4=new Set(["length","size","percentage"]),N4=n=>dl(n,D4,KT),M4=n=>dl(n,"position",KT),j4=new Set(["image","url"]),L4=n=>dl(n,j4,z4),F4=n=>dl(n,"",B4),Ql=()=>!0,dl=(n,e,t)=>{const r=YT.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},U4=n=>P4.test(n)&&!O4.test(n),KT=()=>!1,B4=n=>A4.test(n),z4=n=>I4.test(n),V4=()=>{const n=$e("colors"),e=$e("spacing"),t=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),l=$e("contrast"),c=$e("grayscale"),u=$e("hueRotate"),f=$e("invert"),d=$e("gap"),g=$e("gradientColorStops"),m=$e("gradientColorStopPositions"),v=$e("inset"),b=$e("margin"),x=$e("opacity"),w=$e("padding"),S=$e("saturate"),k=$e("scale"),O=$e("sepia"),M=$e("skew"),E=$e("space"),T=$e("translate"),P=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",_e,e],N=()=>[_e,e],R=()=>["",Kr,Fs],H=()=>["auto",ba,_e],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",_e],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[ba,_e];return{cacheSize:500,separator:":",theme:{colors:[Ql],spacing:[Kr,Fs],blur:["none","",Us,_e],brightness:ue(),borderColor:[n],borderRadius:["none","","full",Us,_e],borderSpacing:N(),borderWidth:R(),contrast:ue(),grayscale:$(),hueRotate:ue(),invert:$(),gap:N(),gradientColorStops:[n],gradientColorStopPositions:[R4,Fs],inset:D(),margin:D(),opacity:ue(),padding:N(),saturate:ue(),scale:ue(),sepia:$(),skew:ue(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Us]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),_e]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ql,_e]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ql,_e]}],"grid-cols":[{"grid-cols":[Ql]}],"col-start-end":[{col:["auto",{span:["full",ql,_e]},_e]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Ql]}],"row-start-end":[{row:["auto",{span:[ql,_e]},_e]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Us]},Us]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Us,Fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kg]}],"font-family":[{font:[Ql]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",ba,kg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kr,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kr,Fs]}],"underline-offset":[{"underline-offset":["auto",Kr,_e]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),M4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",N4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L4]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Kr,_e]}],"outline-w":[{outline:[Kr,Fs]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Kr,Fs]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Us,F4]}],"shadow-color":[{shadow:[Ql]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Us,_e]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ql,_e]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Kr,Fs,kg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$4=C4(V4);function we(...n){return $4(VT(n))}const W4=Aj,qT=y.forwardRef(({className:n,...e},t)=>p.jsx(MT,{ref:t,className:we("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));qT.displayName=MT.displayName;const H4=Jf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),QT=y.forwardRef(({className:n,variant:e,...t},r)=>p.jsx(jT,{ref:r,className:we(H4({variant:e}),n),...t}));QT.displayName=jT.displayName;const G4=y.forwardRef(({className:n,...e},t)=>p.jsx(UT,{ref:t,className:we("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));G4.displayName=UT.displayName;const JT=y.forwardRef(({className:n,...e},t)=>p.jsx(BT,{ref:t,className:we("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:p.jsx(yu,{className:"h-4 w-4"})}));JT.displayName=BT.displayName;const ZT=y.forwardRef(({className:n,...e},t)=>p.jsx(LT,{ref:t,className:we("text-sm font-semibold",n),...e}));ZT.displayName=LT.displayName;const eE=y.forwardRef(({className:n,...e},t)=>p.jsx(FT,{ref:t,className:we("text-sm opacity-90",n),...e}));eE.displayName=FT.displayName;function X4(){const{toasts:n}=ul();return p.jsxs(W4,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return p.jsxs(QT,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[t&&p.jsx(ZT,{children:t}),r&&p.jsx(eE,{children:r})]}),s,p.jsx(JT,{})]},e)}),p.jsx(qT,{})]})}var Y4=VS[" useId ".trim().toString()]||(()=>{}),K4=0;function fs(n){const[e,t]=y.useState(Y4());return Tt(()=>{t(r=>r??String(K4++))},[n]),e?`radix-${e}`:""}const q4=["top","right","bottom","left"],Ei=Math.min,fn=Math.max,Kd=Math.round,ph=Math.floor,Dr=n=>({x:n,y:n}),Q4={left:"right",right:"left",bottom:"top",top:"bottom"},J4={start:"end",end:"start"};function b0(n,e,t){return fn(n,Ei(e,t))}function _s(n,e){return typeof n=="function"?n(e):n}function bs(n){return n.split("-")[0]}function fl(n){return n.split("-")[1]}function my(n){return n==="x"?"y":"x"}function vy(n){return n==="y"?"height":"width"}function ki(n){return["top","bottom"].includes(bs(n))?"y":"x"}function yy(n){return my(ki(n))}function Z4(n,e,t){t===void 0&&(t=!1);const r=fl(n),s=yy(n),i=vy(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=qd(o)),[o,qd(o)]}function eL(n){const e=qd(n);return[S0(n),e,S0(e)]}function S0(n){return n.replace(/start|end/g,e=>J4[e])}function tL(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function nL(n,e,t,r){const s=fl(n);let i=tL(bs(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(S0)))),i}function qd(n){return n.replace(/left|right|bottom|top/g,e=>Q4[e])}function rL(n){return{top:0,right:0,bottom:0,left:0,...n}}function tE(n){return typeof n!="number"?rL(n):{top:n,right:n,bottom:n,left:n}}function Qd(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function d_(n,e,t){let{reference:r,floating:s}=n;const i=ki(e),o=yy(e),a=vy(o),l=bs(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,d=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-s.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(fl(e)){case"start":g[o]-=d*(t&&c?-1:1);break;case"end":g[o]+=d*(t&&c?-1:1);break}return g}const sL=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:f}=d_(c,r,l),d=r,g={},m=0;for(let v=0;v<a.length;v++){const{name:b,fn:x}=a[v],{x:w,y:S,data:k,reset:O}=await x({x:u,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});u=w??u,f=S??f,g={...g,[b]:{...g[b],...k}},O&&m<=50&&(m++,typeof O=="object"&&(O.placement&&(d=O.placement),O.rects&&(c=O.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):O.rects),{x:u,y:f}=d_(c,d,l)),v=-1)}return{x:u,y:f,placement:d,strategy:s,middlewareData:g}};async function Yc(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:g=0}=_s(e,n),m=tE(g),b=a[d?f==="floating"?"reference":"floating":f],x=Qd(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(b)))==null||t?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},O=Qd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(x.top-O.top+m.top)/k.y,bottom:(O.bottom-x.bottom+m.bottom)/k.y,left:(x.left-O.left+m.left)/k.x,right:(O.right-x.right+m.right)/k.x}}const iL=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=_s(n,e)||{};if(c==null)return{};const f=tE(u),d={x:t,y:r},g=yy(s),m=vy(g),v=await o.getDimensions(c),b=g==="y",x=b?"top":"left",w=b?"bottom":"right",S=b?"clientHeight":"clientWidth",k=i.reference[m]+i.reference[g]-d[g]-i.floating[m],O=d[g]-i.reference[g],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=M?M[S]:0;(!E||!await(o.isElement==null?void 0:o.isElement(M)))&&(E=a.floating[S]||i.floating[m]);const T=k/2-O/2,P=E/2-v[m]/2-1,A=Ei(f[x],P),D=Ei(f[w],P),N=A,R=E-v[m]-D,H=E/2-v[m]/2+T,ne=b0(N,H,R),Q=!l.arrow&&fl(s)!=null&&H!==ne&&i.reference[m]/2-(H<N?A:D)-v[m]/2<0,oe=Q?H<N?H-N:H-R:0;return{[g]:d[g]+oe,data:{[g]:ne,centerOffset:H-ne-oe,...Q&&{alignmentOffset:oe}},reset:Q}}}),oL=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...b}=_s(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const x=bs(s),w=ki(a),S=bs(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=d||(S||!v?[qd(a)]:eL(a)),M=m!=="none";!d&&M&&O.push(...nL(a,v,m,k));const E=[a,...O],T=await Yc(e,b),P=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&P.push(T[x]),f){const H=Z4(s,o,k);P.push(T[H[0]],T[H[1]])}if(A=[...A,{placement:s,overflows:P}],!P.every(H=>H<=0)){var D,N;const H=(((D=i.flip)==null?void 0:D.index)||0)+1,ne=E[H];if(ne)return{data:{index:H,overflows:A},reset:{placement:ne}};let Q=(N=A.filter(oe=>oe.overflows[0]<=0).sort((oe,U)=>oe.overflows[1]-U.overflows[1])[0])==null?void 0:N.placement;if(!Q)switch(g){case"bestFit":{var R;const oe=(R=A.filter(U=>{if(M){const $=ki(U.placement);return $===w||$==="y"}return!0}).map(U=>[U.placement,U.overflows.filter($=>$>0).reduce(($,J)=>$+J,0)]).sort((U,$)=>U[1]-$[1])[0])==null?void 0:R[0];oe&&(Q=oe);break}case"initialPlacement":Q=a;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function f_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function p_(n){return q4.some(e=>n[e]>=0)}const aL=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=_s(n,e);switch(r){case"referenceHidden":{const i=await Yc(e,{...s,elementContext:"reference"}),o=f_(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:p_(o)}}}case"escaped":{const i=await Yc(e,{...s,altBoundary:!0}),o=f_(i,t.floating);return{data:{escapedOffsets:o,escaped:p_(o)}}}default:return{}}}}};async function lL(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=bs(t),a=fl(t),l=ki(t)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=_s(e,n);let{mainAxis:d,crossAxis:g,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(g=a==="end"?m*-1:m),l?{x:g*u,y:d*c}:{x:d*c,y:g*u}}const cL=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await lL(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},uL=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...l}=_s(n,e),c={x:t,y:r},u=await Yc(e,l),f=ki(bs(s)),d=my(f);let g=c[d],m=c[f];if(i){const b=d==="y"?"top":"left",x=d==="y"?"bottom":"right",w=g+u[b],S=g-u[x];g=b0(w,g,S)}if(o){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=m+u[b],S=m-u[x];m=b0(w,m,S)}const v=a.fn({...e,[d]:g,[f]:m});return{...v,data:{x:v.x-t,y:v.y-r,enabled:{[d]:i,[f]:o}}}}}},hL=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=_s(n,e),u={x:t,y:r},f=ki(s),d=my(f);let g=u[d],m=u[f];const v=_s(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=d==="y"?"height":"width",k=i.reference[d]-i.floating[S]+b.mainAxis,O=i.reference[d]+i.reference[S]-b.mainAxis;g<k?g=k:g>O&&(g=O)}if(c){var x,w;const S=d==="y"?"width":"height",k=["top","left"].includes(bs(s)),O=i.reference[f]-i.floating[S]+(k&&((x=o.offset)==null?void 0:x[f])||0)+(k?0:b.crossAxis),M=i.reference[f]+i.reference[S]+(k?0:((w=o.offset)==null?void 0:w[f])||0)-(k?b.crossAxis:0);m<O?m=O:m>M&&(m=M)}return{[d]:g,[f]:m}}}},dL=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=_s(n,e),u=await Yc(e,c),f=bs(s),d=fl(s),g=ki(s)==="y",{width:m,height:v}=i.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,b=d==="end"?"top":"bottom");const w=v-u.top-u.bottom,S=m-u.left-u.right,k=Ei(v-u[b],w),O=Ei(m-u[x],S),M=!e.middlewareData.shift;let E=k,T=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=w),M&&!d){const A=fn(u.left,0),D=fn(u.right,0),N=fn(u.top,0),R=fn(u.bottom,0);g?T=m-2*(A!==0||D!==0?A+D:fn(u.left,u.right)):E=v-2*(N!==0||R!==0?N+R:fn(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:E});const P=await o.getDimensions(a.floating);return m!==P.width||v!==P.height?{reset:{rects:!0}}:{}}}};function ep(){return typeof window<"u"}function pl(n){return nE(n)?(n.nodeName||"").toLowerCase():"#document"}function vn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function zr(n){var e;return(e=(nE(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function nE(n){return ep()?n instanceof Node||n instanceof vn(n).Node:!1}function hr(n){return ep()?n instanceof Element||n instanceof vn(n).Element:!1}function jr(n){return ep()?n instanceof HTMLElement||n instanceof vn(n).HTMLElement:!1}function g_(n){return!ep()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof vn(n).ShadowRoot}function xu(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=dr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function fL(n){return["table","td","th"].includes(pl(n))}function tp(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function xy(n){const e=wy(),t=hr(n)?dr(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function pL(n){let e=Pi(n);for(;jr(e)&&!Za(e);){if(xy(e))return e;if(tp(e))return null;e=Pi(e)}return null}function wy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Za(n){return["html","body","#document"].includes(pl(n))}function dr(n){return vn(n).getComputedStyle(n)}function np(n){return hr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Pi(n){if(pl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||g_(n)&&n.host||zr(n);return g_(e)?e.host:e}function rE(n){const e=Pi(n);return Za(e)?n.ownerDocument?n.ownerDocument.body:n.body:jr(e)&&xu(e)?e:rE(e)}function Kc(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=rE(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=vn(s);if(i){const a=C0(o);return e.concat(o,o.visualViewport||[],xu(s)?s:[],a&&t?Kc(a):[])}return e.concat(s,Kc(s,[],t))}function C0(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function sE(n){const e=dr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=jr(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=Kd(t)!==i||Kd(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function _y(n){return hr(n)?n:n.contextElement}function Sa(n){const e=_y(n);if(!jr(e))return Dr(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=sE(e);let o=(i?Kd(t.width):t.width)/r,a=(i?Kd(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gL=Dr(0);function iE(n){const e=vn(n);return!wy()||!e.visualViewport?gL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mL(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==vn(n)?!1:e}function Co(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=_y(n);let o=Dr(1);e&&(r?hr(r)&&(o=Sa(r)):o=Sa(n));const a=mL(i,t,r)?iE(i):Dr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const d=vn(i),g=r&&hr(r)?vn(r):r;let m=d,v=C0(m);for(;v&&r&&g!==m;){const b=Sa(v),x=v.getBoundingClientRect(),w=dr(v),S=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*b.x,k=x.top+(v.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,f*=b.y,l+=S,c+=k,m=vn(v),v=C0(m)}}return Qd({width:u,height:f,x:l,y:c})}function by(n,e){const t=np(n).scrollLeft;return e?e.left+t:Co(zr(n)).left+t}function oE(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:by(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function vL(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=zr(r),a=e?tp(e.floating):!1;if(r===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=Dr(1);const u=Dr(0),f=jr(r);if((f||!f&&!i)&&((pl(r)!=="body"||xu(o))&&(l=np(r)),jr(r))){const g=Co(r);c=Sa(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const d=o&&!f&&!i?oE(o,l,!0):Dr(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function yL(n){return Array.from(n.getClientRects())}function xL(n){const e=zr(n),t=np(n),r=n.ownerDocument.body,s=fn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=fn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+by(n);const a=-t.scrollTop;return dr(r).direction==="rtl"&&(o+=fn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function wL(n,e){const t=vn(n),r=zr(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=wy();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function _L(n,e){const t=Co(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=jr(n)?Sa(n):Dr(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function m_(n,e,t){let r;if(e==="viewport")r=wL(n,t);else if(e==="document")r=xL(zr(n));else if(hr(e))r=_L(e,t);else{const s=iE(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Qd(r)}function aE(n,e){const t=Pi(n);return t===e||!hr(t)||Za(t)?!1:dr(t).position==="fixed"||aE(t,e)}function bL(n,e){const t=e.get(n);if(t)return t;let r=Kc(n,[],!1).filter(a=>hr(a)&&pl(a)!=="body"),s=null;const i=dr(n).position==="fixed";let o=i?Pi(n):n;for(;hr(o)&&!Za(o);){const a=dr(o),l=xy(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xu(o)&&!l&&aE(n,o))?r=r.filter(u=>u!==o):s=a,o=Pi(o)}return e.set(n,r),r}function SL(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?tp(e)?[]:bL(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=m_(e,u,s);return c.top=fn(f.top,c.top),c.right=Ei(f.right,c.right),c.bottom=Ei(f.bottom,c.bottom),c.left=fn(f.left,c.left),c},m_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function CL(n){const{width:e,height:t}=sE(n);return{width:e,height:t}}function TL(n,e,t){const r=jr(e),s=zr(e),i=t==="fixed",o=Co(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Dr(0);if(r||!r&&!i)if((pl(e)!=="body"||xu(s))&&(a=np(e)),r){const d=Co(e,!0,i,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else s&&(l.x=by(s));const c=s&&!r&&!i?oE(s,a):Dr(0),u=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:u,y:f,width:o.width,height:o.height}}function Pg(n){return dr(n).position==="static"}function v_(n,e){if(!jr(n)||dr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return zr(n)===t&&(t=t.ownerDocument.body),t}function lE(n,e){const t=vn(n);if(tp(n))return t;if(!jr(n)){let s=Pi(n);for(;s&&!Za(s);){if(hr(s)&&!Pg(s))return s;s=Pi(s)}return t}let r=v_(n,e);for(;r&&fL(r)&&Pg(r);)r=v_(r,e);return r&&Za(r)&&Pg(r)&&!xy(r)?t:r||pL(n)||t}const EL=async function(n){const e=this.getOffsetParent||lE,t=this.getDimensions,r=await t(n.floating);return{reference:TL(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kL(n){return dr(n).direction==="rtl"}const PL={convertOffsetParentRelativeRectToViewportRelativeRect:vL,getDocumentElement:zr,getClippingRect:SL,getOffsetParent:lE,getElementRects:EL,getClientRects:yL,getDimensions:CL,getScale:Sa,isElement:hr,isRTL:kL};function cE(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function OL(n,e){let t=null,r;const s=zr(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=n.getBoundingClientRect(),{left:u,top:f,width:d,height:g}=c;if(a||e(),!d||!g)return;const m=ph(f),v=ph(s.clientWidth-(u+d)),b=ph(s.clientHeight-(f+g)),x=ph(u),S={rootMargin:-m+"px "+-v+"px "+-b+"px "+-x+"px",threshold:fn(0,Ei(1,l))||1};let k=!0;function O(M){const E=M[0].intersectionRatio;if(E!==l){if(!k)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!cE(c,n.getBoundingClientRect())&&o(),k=!1}try{t=new IntersectionObserver(O,{...S,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,S)}t.observe(n)}return o(!0),i}function AL(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=_y(n),u=s||i?[...c?Kc(c):[],...Kc(e)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",t,{passive:!0}),i&&x.addEventListener("resize",t)});const f=c&&a?OL(c,t):null;let d=-1,g=null;o&&(g=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let m,v=l?Co(n):null;l&&b();function b(){const x=Co(n);v&&!cE(v,x)&&t(),v=x,m=requestAnimationFrame(b)}return t(),()=>{var x;u.forEach(w=>{s&&w.removeEventListener("scroll",t),i&&w.removeEventListener("resize",t)}),f==null||f(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const IL=cL,RL=uL,DL=oL,NL=dL,ML=aL,y_=iL,jL=hL,LL=(n,e,t)=>{const r=new Map,s={platform:PL,...t},i={...s.platform,_c:r};return sL(n,e,{...s,platform:i})};var cd=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Jd(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Jd(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Jd(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function uE(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function x_(n,e){const t=uE(n);return Math.round(e*t)/t}function Og(n){const e=y.useRef(n);return cd(()=>{e.current=n}),e}function FL(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=y.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,g]=y.useState(r);Jd(d,r)||g(r);const[m,v]=y.useState(null),[b,x]=y.useState(null),w=y.useCallback(U=>{U!==M.current&&(M.current=U,v(U))},[]),S=y.useCallback(U=>{U!==E.current&&(E.current=U,x(U))},[]),k=i||m,O=o||b,M=y.useRef(null),E=y.useRef(null),T=y.useRef(u),P=l!=null,A=Og(l),D=Og(s),N=Og(c),R=y.useCallback(()=>{if(!M.current||!E.current)return;const U={placement:e,strategy:t,middleware:d};D.current&&(U.platform=D.current),LL(M.current,E.current,U).then($=>{const J={...$,isPositioned:N.current!==!1};H.current&&!Jd(T.current,J)&&(T.current=J,Mo.flushSync(()=>{f(J)}))})},[d,e,t,D,N]);cd(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[c]);const H=y.useRef(!1);cd(()=>(H.current=!0,()=>{H.current=!1}),[]),cd(()=>{if(k&&(M.current=k),O&&(E.current=O),k&&O){if(A.current)return A.current(k,O,R);R()}},[k,O,R,A,P]);const ne=y.useMemo(()=>({reference:M,floating:E,setReference:w,setFloating:S}),[w,S]),Q=y.useMemo(()=>({reference:k,floating:O}),[k,O]),oe=y.useMemo(()=>{const U={position:t,left:0,top:0};if(!Q.floating)return U;const $=x_(Q.floating,u.x),J=x_(Q.floating,u.y);return a?{...U,transform:"translate("+$+"px, "+J+"px)",...uE(Q.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:$,top:J}},[t,a,Q.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:R,refs:ne,elements:Q,floatingStyles:oe}),[u,R,ne,Q,oe])}const UL=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?y_({element:r.current,padding:s}).fn(t):{}:r?y_({element:r,padding:s}).fn(t):{}}}},BL=(n,e)=>({...IL(n),options:[n,e]}),zL=(n,e)=>({...RL(n),options:[n,e]}),VL=(n,e)=>({...jL(n),options:[n,e]}),$L=(n,e)=>({...DL(n),options:[n,e]}),WL=(n,e)=>({...NL(n),options:[n,e]}),HL=(n,e)=>({...ML(n),options:[n,e]}),GL=(n,e)=>({...UL(n),options:[n,e]});var XL="Arrow",hE=y.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return p.jsx(ge.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});hE.displayName=XL;var YL=hE;function KL(n){const[e,t]=y.useState(void 0);return Tt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Sy="Popper",[dE,gl]=Br(Sy),[qL,fE]=dE(Sy),pE=n=>{const{__scopePopper:e,children:t}=n,[r,s]=y.useState(null);return p.jsx(qL,{scope:e,anchor:r,onAnchorChange:s,children:t})};pE.displayName=Sy;var gE="PopperAnchor",mE=y.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=fE(gE,t),o=y.useRef(null),a=Ce(e,o);return y.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(ge.div,{...s,ref:a})});mE.displayName=gE;var Cy="PopperContent",[QL,JL]=dE(Cy),vE=y.forwardRef((n,e)=>{var X,se,ae,G,ie,de;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:g="optimized",onPlaced:m,...v}=n,b=fE(Cy,t),[x,w]=y.useState(null),S=Ce(e,Se=>w(Se)),[k,O]=y.useState(null),M=KL(k),E=(M==null?void 0:M.width)??0,T=(M==null?void 0:M.height)??0,P=r+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],N=D.length>0,R={padding:A,boundary:D.filter(e5),altBoundary:N},{refs:H,floatingStyles:ne,placement:Q,isPositioned:oe,middlewareData:U}=FL({strategy:"fixed",placement:P,whileElementsMounted:(...Se)=>AL(...Se,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[BL({mainAxis:s+T,alignmentAxis:o}),l&&zL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?VL():void 0,...R}),l&&$L({...R}),WL({...R,apply:({elements:Se,rects:me,availableWidth:Ue,availableHeight:pt})=>{const{width:xt,height:Fi}=me.reference,Nt=Se.floating.style;Nt.setProperty("--radix-popper-available-width",`${Ue}px`),Nt.setProperty("--radix-popper-available-height",`${pt}px`),Nt.setProperty("--radix-popper-anchor-width",`${xt}px`),Nt.setProperty("--radix-popper-anchor-height",`${Fi}px`)}}),k&&GL({element:k,padding:a}),t5({arrowWidth:E,arrowHeight:T}),d&&HL({strategy:"referenceHidden",...R})]}),[$,J]=wE(Q),ue=qe(m);Tt(()=>{oe&&(ue==null||ue())},[oe,ue]);const q=(X=U.arrow)==null?void 0:X.x,re=(se=U.arrow)==null?void 0:se.y,V=((ae=U.arrow)==null?void 0:ae.centerOffset)!==0,[K,Y]=y.useState();return Tt(()=>{x&&Y(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:oe?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(G=U.transformOrigin)==null?void 0:G.x,(ie=U.transformOrigin)==null?void 0:ie.y].join(" "),...((de=U.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:p.jsx(QL,{scope:t,placedSide:$,onArrowChange:O,arrowX:q,arrowY:re,shouldHideArrow:V,children:p.jsx(ge.div,{"data-side":$,"data-align":J,...v,ref:S,style:{...v.style,animation:oe?void 0:"none"}})})})});vE.displayName=Cy;var yE="PopperArrow",ZL={top:"bottom",right:"left",bottom:"top",left:"right"},xE=y.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=JL(yE,r),o=ZL[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(YL,{...s,ref:t,style:{...s.style,display:"block"}})})});xE.displayName=yE;function e5(n){return n!==null}var t5=n=>({name:"transformOrigin",options:n,fn(e){var b,x,w;const{placement:t,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=wE(t),f={start:"0%",center:"50%",end:"100%"}[u],d=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let m="",v="";return c==="bottom"?(m=o?f:`${d}px`,v=`${-l}px`):c==="top"?(m=o?f:`${d}px`,v=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,v=o?f:`${g}px`):c==="left"&&(m=`${r.floating.width+l}px`,v=o?f:`${g}px`),{data:{x:m,y:v}}}});function wE(n){const[e,t="center"]=n.split("-");return[e,t]}var _E=pE,Ty=mE,Ey=vE,ky=xE,[rp,gW]=Br("Tooltip",[gl]),Py=gl(),bE="TooltipProvider",n5=700,w_="tooltip.open",[r5,SE]=rp(bE),CE=n=>{const{__scopeTooltip:e,delayDuration:t=n5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,o=y.useRef(!0),a=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(r5,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:y.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};CE.displayName=bE;var TE="Tooltip",[mW,sp]=rp(TE),T0="TooltipTrigger",s5=y.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=sp(T0,t),i=SE(T0,t),o=Py(t),a=y.useRef(null),l=Ce(e,a,s.onTriggerChange),c=y.useRef(!1),u=y.useRef(!1),f=y.useCallback(()=>c.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),p.jsx(Ty,{asChild:!0,...o,children:p.jsx(ge.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:te(n.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:te(n.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:te(n.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:te(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:te(n.onBlur,s.onClose),onClick:te(n.onClick,s.onClose)})})});s5.displayName=T0;var i5="TooltipPortal",[vW,o5]=rp(i5,{forceMount:void 0}),el="TooltipContent",EE=y.forwardRef((n,e)=>{const t=o5(el,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=sp(el,n.__scopeTooltip);return p.jsx(cn,{present:r||o.open,children:o.disableHoverableContent?p.jsx(kE,{side:s,...i,ref:e}):p.jsx(a5,{side:s,...i,ref:e})})}),a5=y.forwardRef((n,e)=>{const t=sp(el,n.__scopeTooltip),r=SE(el,n.__scopeTooltip),s=y.useRef(null),i=Ce(e,s),[o,a]=y.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:f}=r,d=y.useCallback(()=>{a(null),f(!1)},[f]),g=y.useCallback((m,v)=>{const b=m.currentTarget,x={x:m.clientX,y:m.clientY},w=d5(x,b.getBoundingClientRect()),S=f5(x,w),k=p5(v.getBoundingClientRect()),O=m5([...S,...k]);a(O),f(!0)},[f]);return y.useEffect(()=>()=>d(),[d]),y.useEffect(()=>{if(l&&u){const m=b=>g(b,u),v=b=>g(b,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",v)}}},[l,u,g,d]),y.useEffect(()=>{if(o){const m=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),S=!g5(x,o);w?d():S&&(d(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,d]),p.jsx(kE,{...n,ref:i})}),[l5,c5]=rp(TE,{isInside:!1}),u5=GM("TooltipContent"),kE=y.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=sp(el,t),c=Py(t),{onClose:u}=l;return y.useEffect(()=>(document.addEventListener(w_,u),()=>document.removeEventListener(w_,u)),[u]),y.useEffect(()=>{if(l.trigger){const f=d=>{const g=d.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),p.jsx(hl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:p.jsxs(Ey,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(u5,{children:r}),p.jsx(l5,{scope:t,isInside:!0,children:p.jsx(dj,{id:l.contentId,role:"tooltip",children:s||r})})]})})});EE.displayName=el;var PE="TooltipArrow",h5=y.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Py(t);return c5(PE,t).isInside?null:p.jsx(ky,{...s,...r,ref:e})});h5.displayName=PE;function d5(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function f5(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function p5(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function g5(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function m5(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),v5(e)}function v5(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var y5=CE,OE=EE;const x5=y5,w5=y.forwardRef(({className:n,sideOffset:e=4,...t},r)=>p.jsx(OE,{ref:r,sideOffset:e,className:we("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));w5.displayName=OE.displayName;const _5=y.createContext(void 0);function b5({children:n}){const[e,t]=y.useState(()=>localStorage.getItem("theme")||"light");y.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{t(s=>s==="light"?"dark":"light")};return p.jsx(_5.Provider,{value:{theme:e,toggleTheme:r},children:n})}const S5=()=>{};var __={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},C5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},IE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(d=64)),r.push(t[u],t[f],t[d],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):C5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new T5;const d=i<<2|a>>4;if(r.push(d),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const m=c<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class T5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E5=function(n){const e=AE(n);return IE.encodeByteArray(e,!0)},Zd=function(n){return E5(n).replace(/\./g,"")},RE=function(n){try{return IE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=()=>k5().__FIREBASE_DEFAULTS__,O5=()=>{if(typeof process>"u"||typeof __>"u")return;const n=__.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},A5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RE(n[1]);return e&&JSON.parse(e)},Oy=()=>{try{return S5()||P5()||O5()||A5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},DE=n=>{var e,t;return(t=(e=Oy())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},NE=n=>{const e=DE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ME=()=>{var n;return(n=Oy())==null?void 0:n.config},jE=n=>{var e;return(e=Oy())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ay(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Zd(JSON.stringify(t)),Zd(JSON.stringify(o)),""].join(".")}const wc={};function R5(){const n={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?n.emulator.push(e):n.prod.push(e);return n}function D5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let b_=!1;function Iy(n,e){if(typeof window>"u"||typeof document>"u"||!ml(window.location.host)||wc[n]===e||wc[n]||b_)return;wc[n]=e;function t(d){return`__firebase__banner__${d}`}const r="__firebase__banner",i=R5().prod.length>0;function o(){const d=document.getElementById(r);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,g){d.setAttribute("width","24"),d.setAttribute("id",g),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{b_=!0,o()},d}function u(d,g){d.setAttribute("id",g),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=D5(r),g=t("text"),m=document.getElementById(g)||document.createElement("span"),v=t("learnmore"),b=document.getElementById(v)||document.createElement("a"),x=t("preprendIcon"),w=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const S=d.element;a(S),u(b,v);const k=c();l(w,x),S.append(w,m,b,k),document.body.appendChild(S)}i?(m.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function M5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function L5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F5(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function U5(){try{return typeof indexedDB=="object"}catch{return!1}}function B5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5="FirebaseError";class Vr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=z5,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?V5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Vr(s,a,r)}}function V5(n,e){return n.replace($5,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $5=/\{\$([^}]+)}/g;function W5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function To(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(S_(i)&&S_(o)){if(!To(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function S_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function H5(n,e){const t=new G5(n,e);return t.subscribe.bind(t)}class G5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");X5(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Ag),s.error===void 0&&(s.error=Ag),s.complete===void 0&&(s.complete=Ag);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n){return n&&n._delegate?n._delegate:n}class Oi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new I5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q5(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K5(n){return n===Hi?void 0:n}function q5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Y5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const J5={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Z5=De.INFO,e3={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},t3=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=e3[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=Z5,this._logHandler=t3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const n3=(n,e)=>e.some(t=>n instanceof t);let C_,T_;function r3(){return C_||(C_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s3(){return T_||(T_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,E0=new WeakMap,UE=new WeakMap,Ig=new WeakMap,Dy=new WeakMap;function i3(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(_i(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&FE.set(t,n)}).catch(()=>{}),Dy.set(e,n),e}function o3(n){if(E0.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});E0.set(n,e)}let k0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return E0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||UE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function a3(n){k0=n(k0)}function l3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Rg(this),e,...t);return UE.set(r,e.sort?e.sort():[e]),_i(r)}:s3().includes(n)?function(...e){return n.apply(Rg(this),e),_i(FE.get(this))}:function(...e){return _i(n.apply(Rg(this),e))}}function c3(n){return typeof n=="function"?l3(n):(n instanceof IDBTransaction&&o3(n),n3(n,r3())?new Proxy(n,k0):n)}function _i(n){if(n instanceof IDBRequest)return i3(n);if(Ig.has(n))return Ig.get(n);const e=c3(n);return e!==n&&(Ig.set(n,e),Dy.set(e,n)),e}const Rg=n=>Dy.get(n);function u3(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=_i(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_i(o.result),l.oldVersion,l.newVersion,_i(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const h3=["get","getKey","getAll","getAllKeys","count"],d3=["put","add","delete","clear"],Dg=new Map;function E_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=d3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||h3.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return Dg.set(e,i),i}a3(n=>({...n,get:(e,t,r)=>E_(e,t)||n.get(e,t,r),has:(e,t)=>!!E_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(p3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function p3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const P0="@firebase/app",k_="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Ry("@firebase/app"),g3="@firebase/app-compat",m3="@firebase/analytics-compat",v3="@firebase/analytics",y3="@firebase/app-check-compat",x3="@firebase/app-check",w3="@firebase/auth",_3="@firebase/auth-compat",b3="@firebase/database",S3="@firebase/data-connect",C3="@firebase/database-compat",T3="@firebase/functions",E3="@firebase/functions-compat",k3="@firebase/installations",P3="@firebase/installations-compat",O3="@firebase/messaging",A3="@firebase/messaging-compat",I3="@firebase/performance",R3="@firebase/performance-compat",D3="@firebase/remote-config",N3="@firebase/remote-config-compat",M3="@firebase/storage",j3="@firebase/storage-compat",L3="@firebase/firestore",F3="@firebase/ai",U3="@firebase/firestore-compat",B3="firebase",z3="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="[DEFAULT]",V3={[P0]:"fire-core",[g3]:"fire-core-compat",[v3]:"fire-analytics",[m3]:"fire-analytics-compat",[x3]:"fire-app-check",[y3]:"fire-app-check-compat",[w3]:"fire-auth",[_3]:"fire-auth-compat",[b3]:"fire-rtdb",[S3]:"fire-data-connect",[C3]:"fire-rtdb-compat",[T3]:"fire-fn",[E3]:"fire-fn-compat",[k3]:"fire-iid",[P3]:"fire-iid-compat",[O3]:"fire-fcm",[A3]:"fire-fcm-compat",[I3]:"fire-perf",[R3]:"fire-perf-compat",[D3]:"fire-rc",[N3]:"fire-rc-compat",[M3]:"fire-gcs",[j3]:"fire-gcs-compat",[L3]:"fire-fst",[U3]:"fire-fst-compat",[F3]:"fire-vertex","fire-js":"fire-js",[B3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new Map,$3=new Map,A0=new Map;function P_(n,e){try{n.container.addComponent(e)}catch(t){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Eo(n){const e=n.name;if(A0.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;A0.set(e,n);for(const t of ef.values())P_(t,n);for(const t of $3.values())P_(t,n);return!0}function ip(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new wu("app","Firebase",W3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=z3;function BE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:O0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw bi.create("bad-app-name",{appName:String(s)});if(t||(t=ME()),!t)throw bi.create("no-options");const i=ef.get(s);if(i){if(To(t,i.options)&&To(r,i.config))return i;throw bi.create("duplicate-app",{appName:s})}const o=new Q5(s);for(const l of A0.values())o.addComponent(l);const a=new H3(t,r,o);return ef.set(s,a),a}function Ny(n=O0){const e=ef.get(n);if(!e&&n===O0&&ME())return BE();if(!e)throw bi.create("no-app",{appName:n});return e}function Nr(n,e,t){let r=V3[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(o.join(" "));return}Eo(new Oi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="firebase-heartbeat-database",X3=1,qc="firebase-heartbeat-store";let Ng=null;function zE(){return Ng||(Ng=u3(G3,X3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(n=>{throw bi.create("idb-open",{originalErrorMessage:n.message})})),Ng}async function Y3(n){try{const t=(await zE()).transaction(qc),r=await t.objectStore(qc).get(VE(n));return await t.done,r}catch(e){if(e instanceof Vr)Ss.warn(e.message);else{const t=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(t.message)}}}async function O_(n,e){try{const r=(await zE()).transaction(qc,"readwrite");await r.objectStore(qc).put(e,VE(n)),await r.done}catch(t){if(t instanceof Vr)Ss.warn(t.message);else{const r=bi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ss.warn(r.message)}}}function VE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=1024,q3=30;class Q3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Z3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=A_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>q3){const o=eF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ss.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=A_(),{heartbeatsToSend:r,unsentEntries:s}=J3(this._heartbeatsCache.heartbeats),i=Zd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ss.warn(t),""}}}function A_(){return new Date().toISOString().substring(0,10)}function J3(n,e=K3){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),I_(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),I_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Z3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U5()?B5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Y3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function I_(n){return Zd(JSON.stringify({version:2,heartbeats:n})).length}function eF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(n){Eo(new Oi("platform-logger",e=>new f3(e),"PRIVATE")),Eo(new Oi("heartbeat",e=>new Q3(e),"PRIVATE")),Nr(P0,k_,n),Nr(P0,k_,"esm2020"),Nr("fire-js","")}tF("");function $E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nF=$E,WE=new wu("auth","Firebase",$E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new Ry("@firebase/auth");function rF(n,...e){tf.logLevel<=De.WARN&&tf.warn(`Auth (${jo}): ${n}`,...e)}function ud(n,...e){tf.logLevel<=De.ERROR&&tf.error(`Auth (${jo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n,...e){throw jy(n,...e)}function lr(n,...e){return jy(n,...e)}function My(n,e,t){const r={...nF(),[e]:t};return new wu("auth","Firebase",r).create(e,{appName:n.name})}function Si(n){return My(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HE(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(n,"argument-error"),My(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return WE.create(n,...e)}function pe(n,e,...t){if(!n)throw jy(e,...t)}function as(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ud(e),new Error(e)}function Cs(n,e){n||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function sF(){return R_()==="http:"||R_()==="https:"}function R_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sF()||j5()||"connection"in navigator)?navigator.onLine:!0}function oF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cs(t>e,"Short delay should be less than long delay!"),this.isMobile=N5()||L5()}get(){return iF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(n,e){Cs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cF=new bu(3e4,6e4);function Fy(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function vl(n,e,t,r,s={}){return XE(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=_u({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...i};return M5()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&ml(n.emulatorConfig.host)&&(c.credentials="include"),GE.fetch()(await YE(n,n.config.apiHost,t,a),c)})}async function XE(n,e,t){n._canInitEmulator=!1;const r={...aF,...e};try{const s=new hF(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gh(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gh(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw gh(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw My(n,u,c);Lr(n,u)}}catch(s){if(s instanceof Vr)throw s;Lr(n,"network-request-failed",{message:String(s)})}}async function uF(n,e,t,r,s={}){const i=await vl(n,e,t,r,s);return"mfaPendingCredential"in i&&Lr(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function YE(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?Ly(n.config,s):`${n.config.apiScheme}://${s}`;return lF.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class hF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),cF.get())})}}function gh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=lr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dF(n,e){return vl(n,"POST","/v1/accounts:delete",e)}async function nf(n,e){return vl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fF(n,e=!1){const t=Is(n),r=await t.getIdToken(e),s=Uy(r);pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:_c(Mg(s.auth_time)),issuedAtTime:_c(Mg(s.iat)),expirationTime:_c(Mg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mg(n){return Number(n)*1e3}function Uy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const s=RE(t);return s?JSON.parse(s):(ud("Failed to decode base64 JWT payload"),null)}catch(s){return ud("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function D_(n){const e=Uy(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vr&&pF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function pF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(n){var f;const e=n.auth,t=await n.getIdToken(),r=await Qc(n,nf(e,{idToken:t}));pe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?KE(s.providerUserInfo):[],o=vF(n.providerData,i),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new R0(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,u)}async function mF(n){const e=Is(n);await rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vF(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function KE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(n,e){const t=await XE(n,{},async()=>{const r=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await YE(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&ml(n.emulatorConfig.host)&&(l.credentials="include"),GE.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xF(n,e){return vl(n,"POST","/v2/accounts:revokeToken",Fy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const t=D_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await yF(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new Ca;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class nr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new gF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new R0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Qc(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fF(this,e)}reload(){return mF(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await rf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await Qc(this,dF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:f,emailVerified:d,isAnonymous:g,providerData:m,stsTokenManager:v}=t;pe(f&&v,e,"internal-error");const b=Ca.fromJSON(this.name,v);pe(typeof f=="string",e,"internal-error"),Bs(r,e.name),Bs(s,e.name),pe(typeof d=="boolean",e,"internal-error"),pe(typeof g=="boolean",e,"internal-error"),Bs(i,e.name),Bs(o,e.name),Bs(a,e.name),Bs(l,e.name),Bs(c,e.name),Bs(u,e.name);const x=new nr({uid:f,auth:e,email:s,emailVerified:d,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return m&&Array.isArray(m)&&(x.providerData=m.map(w=>({...w}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ca;s.updateFromServerResponse(t);const i=new nr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await rf(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?KE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ca;a.updateFromIdToken(r);const l=new nr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new R0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=new Map;function ls(n){Cs(n instanceof Function,"Expected a class definition");let e=N_.get(n);return e?(Cs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,N_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qE.type="NONE";const M_=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ta{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hd(this.userKey,s.apiKey,i),this.fullPersistenceKey=hd("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nf(this.auth,{idToken:e}).catch(()=>{});return t?nr._fromGetAccountInfoResponse(this.auth,t,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ta(ls(M_),e,r);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ls(M_);const o=hd(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let f;if(typeof u=="string"){const d=await nf(e,{idToken:u}).catch(()=>{});if(!d)break;f=await nr._fromGetAccountInfoResponse(e,d,u)}else f=nr._fromJSON(e,u);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ta(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ta(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ek(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nk(e))return"Blackberry";if(rk(e))return"Webos";if(JE(e))return"Safari";if((e.includes("chrome/")||ZE(e))&&!e.includes("edge/"))return"Chrome";if(tk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QE(n=Ht()){return/firefox\//i.test(n)}function JE(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZE(n=Ht()){return/crios\//i.test(n)}function ek(n=Ht()){return/iemobile/i.test(n)}function tk(n=Ht()){return/android/i.test(n)}function nk(n=Ht()){return/blackberry/i.test(n)}function rk(n=Ht()){return/webos/i.test(n)}function By(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wF(n=Ht()){var e;return By(n)&&!!((e=window.navigator)!=null&&e.standalone)}function _F(){return F5()&&document.documentMode===10}function sk(n=Ht()){return By(n)||tk(n)||rk(n)||nk(n)||/windows phone/i.test(n)||ek(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n,e=[]){let t;switch(n){case"Browser":t=j_(Ht());break;case"Worker":t=`${j_(Ht())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF(n,e={}){return vl(n,"GET","/v2/passwordPolicy",Fy(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=6;class TF{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??CF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new bF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nf(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Si(this));const t=e?Is(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SF(this),t=new TF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ik(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&rF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yl(n){return Is(n)}class L_{constructor(e){this.auth=e,this.observer=null,this.addObserver=H5(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kF(n){zy=n}function PF(n){return zy.loadJS(n)}function OF(){return zy.gapiScript}function AF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(n,e){const t=ip(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(To(i,e??{}))return s;Lr(s,"already-initialized")}return t.initialize({options:e})}function RF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ls);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DF(n,e,t){const r=yl(n);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(t!=null&&t.disableWarnings),i=ok(e),{host:o,port:a}=NF(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(To(c,r.config.emulator)&&To(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ml(o)?(Ay(`${i}//${o}${l}`),Iy("Auth",!0)):MF()}function ok(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NF(n){const e=ok(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:F_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:F_(o)}}}function F_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,t){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n,e){return uF(n,"POST","/v1/accounts:signInWithIdp",Fy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="http://localhost";class ko extends ak{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const o=new ko(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ea(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ea(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}buildRequest(){const e={requestUri:jF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_u(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Su{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ko._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Er.credential(t,r)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Su{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Su{constructor(){super("twitter.com")}static credential(e,t){return ko._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Js.credential(t,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await nr._fromIdTokenResponse(e,r,s),o=U_(r);return new tl({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=U_(r);return new tl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function U_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Vr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,sf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new sf(e,t,r,s)}}function lk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sf._fromErrorAndOperation(n,i,e,r):i})}async function LF(n,e,t=!1){const r=await Qc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF(n,e,t=!1){const{auth:r}=n;if(pn(r.app))return Promise.reject(Si(r));const s="reauthenticate";try{const i=await Qc(n,lk(r,s,e,n),t);pe(i.idToken,r,"internal-error");const o=Uy(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(n.uid===a,r,"user-mismatch"),tl._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Lr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(n,e,t=!1){if(pn(n.app))return Promise.reject(Si(n));const r="signIn",s=await lk(n,r,e),i=await tl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function BF(n,e,t,r){return Is(n).onIdTokenChanged(e,t,r)}function zF(n,e,t){return Is(n).beforeAuthStateChanged(e,t)}function VF(n,e,t,r){return Is(n).onAuthStateChanged(e,t,r)}function $F(n){return Is(n).signOut()}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=1e3,HF=10;class uk extends ck{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);_F()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HF):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},WF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uk.type="LOCAL";const GF=uk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends ck{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hk.type="SESSION";const dk=hk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ap(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,i)),l=await XF(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Vy("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const d=f;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(){return window}function KF(n){Mr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return typeof Mr().WorkerGlobalScope<"u"&&typeof Mr().importScripts=="function"}async function qF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function JF(){return fk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="firebaseLocalStorageDb",ZF=1,af="firebaseLocalStorage",gk="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lp(n,e){return n.transaction([af],e?"readwrite":"readonly").objectStore(af)}function e6(){const n=indexedDB.deleteDatabase(pk);return new Cu(n).toPromise()}function D0(){const n=indexedDB.open(pk,ZF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(af,{keyPath:gk})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(af)?e(r):(r.close(),await e6(),e(await D0()))})})}async function B_(n,e,t){const r=lp(n,!0).put({[gk]:e,value:t});return new Cu(r).toPromise()}async function t6(n,e){const t=lp(n,!1).get(e),r=await new Cu(t).toPromise();return r===void 0?null:r.value}function z_(n,e){const t=lp(n,!0).delete(e);return new Cu(t).toPromise()}const n6=800,r6=3;class mk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>r6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(JF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await qF(),!this.activeServiceWorker)return;this.sender=new YF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await B_(e,of,"1"),await z_(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>B_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>t6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>z_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=lp(s,!1).getAll();return new Cu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mk.type="LOCAL";const s6=mk;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n,e){return e?ls(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends ak{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i6(n){return UF(n.auth,new Wy(n),n.bypassAuthState)}function o6(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),FF(t,new Wy(n),n.bypassAuthState)}async function a6(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),LF(t,new Wy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i6;case"linkViaPopup":case"linkViaRedirect":return a6;case"reauthViaPopup":case"reauthViaRedirect":return o6;default:Lr(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new bu(2e3,1e4);async function c6(n,e,t){if(pn(n.app))return Promise.reject(lr(n,"operation-not-supported-in-this-environment"));const r=yl(n);HE(n,e,op);const s=$y(r,t);return new Ji(r,"signInViaPopup",e,s).executeNotNull()}class Ji extends vk{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ji.currentPopupAction&&Ji.currentPopupAction.cancel(),Ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=Vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l6.get())};e()}}Ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="pendingRedirect",dd=new Map;class h6 extends vk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const r=await d6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d6(n,e){const t=xk(e),r=yk(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function f6(n,e){return yk(n)._set(xk(e),"true")}function p6(n,e){dd.set(n._key(),e)}function yk(n){return ls(n._redirectPersistence)}function xk(n){return hd(u6,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(n,e,t){return m6(n,e,t)}async function m6(n,e,t){if(pn(n.app))return Promise.reject(Si(n));const r=yl(n);HE(n,e,op),await r._initializationPromise;const s=$y(r,t);return await f6(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function v6(n,e){return await yl(n)._initializationPromise,wk(n,e,!1)}async function wk(n,e,t=!1){if(pn(n.app))return Promise.reject(Si(n));const r=yl(n),s=$y(r,e),o=await new h6(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=10*60*1e3;class x6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_k(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y6&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _k({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _k(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(n,e={}){return vl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S6=/^https?/;async function C6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _6(n);for(const t of e)try{if(T6(t))return}catch{}Lr(n,"unauthorized-domain")}function T6(n){const e=I0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!S6.test(t))return!1;if(b6.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=new bu(3e4,6e4);function $_(){const n=Mr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function k6(n){return new Promise((e,t)=>{var s,i,o;function r(){$_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$_(),t(lr(n,"network-request-failed"))},timeout:E6.get()})}if((i=(s=Mr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Mr().gapi)!=null&&o.load)r();else{const a=AF("iframefcb");return Mr()[a]=()=>{gapi.load?r():t(lr(n,"network-request-failed"))},PF(`${OF()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw fd=null,e})}let fd=null;function P6(n){return fd=fd||k6(n),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new bu(5e3,15e3),A6="__/auth/iframe",I6="emulator/auth/iframe",R6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N6(n){const e=n.config;pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ly(e,I6):`https://${n.config.authDomain}/${A6}`,r={apiKey:e.apiKey,appName:n.name,v:jo},s=D6.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${_u(r).slice(1)}`}async function M6(n){const e=await P6(n),t=Mr().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:N6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R6,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=lr(n,"network-request-failed"),a=Mr().setTimeout(()=>{i(o)},O6.get());function l(){Mr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L6=500,F6=600,U6="_blank",B6="http://localhost";class W_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z6(n,e,t,r=L6,s=F6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...j6,width:r.toString(),height:s.toString(),top:i,left:o},c=Ht().toLowerCase();t&&(a=ZE(c)?U6:t),QE(c)&&(e=e||B6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[g,m])=>`${d}${g}=${m},`,"");if(wF(c)&&a!=="_self")return V6(e||"",a),new W_(null);const f=window.open(e||"",a,u);pe(f,n,"popup-blocked");try{f.focus()}catch{}return new W_(f)}function V6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="__/auth/handler",W6="emulator/auth/handler",H6=encodeURIComponent("fac");async function H_(n,e,t,r,s,i){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:jo,eventId:s};if(e instanceof op){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",W5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof Su){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${H6}=${encodeURIComponent(l)}`:"";return`${G6(n)}?${_u(a).slice(1)}${c}`}function G6({config:n}){return n.emulator?Ly(n,W6):`https://${n.authDomain}/${$6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="webStorageSupport";class X6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dk,this._completeRedirectFn=wk,this._overrideRedirectResult=p6}async _openPopup(e,t,r,s){var o;Cs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await H_(e,t,r,I0(),s);return z6(e,i,Vy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await H_(e,t,r,I0(),s);return KF(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Cs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await M6(e),r=new x6(e);return t.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jg,{type:jg},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[jg];i!==void 0&&t(!!i),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=C6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sk()||JE()||By()}}const Y6=X6;var G_="@firebase/auth",X_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q6(n){Eo(new Oi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ik(n)},c=new EF(r,s,i,l);return RF(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Eo(new Oi("auth-internal",e=>{const t=yl(e.getProvider("auth").getImmediate());return(r=>new K6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(G_,X_,q6(n)),Nr(G_,X_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=5*60,Z6=jE("authIdTokenMaxAge")||J6;let Y_=null;const e9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Z6)return;const s=t==null?void 0:t.token;Y_!==s&&(Y_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function t9(n=Ny()){const e=ip(n,"auth");if(e.isInitialized())return e.getImmediate();const t=IF(n,{popupRedirectResolver:Y6,persistence:[s6,GF,dk]}),r=jE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=e9(i.toString());zF(t,o,()=>o(t.currentUser)),BF(t,a=>o(a))}}const s=DE("auth");return s&&DF(t,`http://${s}`),t}function n9(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}kF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=lr("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",n9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q6("Browser");var r9="firebase",s9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(r9,s9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="firebasestorage.googleapis.com",i9="storageBucket",o9=2*60*1e3,a9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Vr{constructor(e,t,r=0){super(Lg(e),`Firebase Storage: ${t} (${Lg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fr||(Fr={}));function Lg(n){return"storage/"+n}function l9(){const n="An unknown error occurred, please check the error payload for server response.";return new $r(Fr.UNKNOWN,n)}function c9(){return new $r(Fr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function u9(){return new $r(Fr.CANCELED,"User canceled the upload/download.")}function h9(n){return new $r(Fr.INVALID_URL,"Invalid URL '"+n+"'.")}function d9(n){return new $r(Fr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function K_(n){return new $r(Fr.INVALID_ARGUMENT,n)}function Sk(){return new $r(Fr.APP_DELETED,"The Firebase app was deleted.")}function f9(n){return new $r(Fr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rr.makeFromUrl(e,t)}catch{return new rr(e,"")}if(r.path==="")return r;throw d9(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const u="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${u}/b/${s}/o${d}`,"i"),m={bucket:1,path:3},v=t===bk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${b}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:g,indices:m,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<S.length;k++){const O=S[k],M=O.regex.exec(e);if(M){const E=M[O.indices.bucket];let T=M[O.indices.path];T||(T=""),r=new rr(E,T),O.postModify(r);break}}if(r==null)throw h9(e);return r}}class p9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function f(b){s=setTimeout(()=>{s=null,n(g,l())},b)}function d(){i&&clearTimeout(i)}function g(b,...x){if(c){d();return}if(b){d(),u.call(null,b,...x);return}if(l()||o){d(),u.call(null,b,...x);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let m=!1;function v(b){m||(m=!0,d(),!c&&(s!==null?(b||(a=2),clearTimeout(s),f(0)):b||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,v(!0)},t),v}function m9(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(n){return n!==void 0}function q_(n,e,t,r){if(r<e)throw K_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw K_(`Invalid value for '${n}'. Expected ${t} or less.`)}function y9(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var lf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(lf||(lf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,t,r,s,i,o,a,l,c,u,f,d=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=d,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new mh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===lf.NO_ERROR,l=i.getStatus();if(!a||x9(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===lf.ABORT;r(!1,new mh(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new mh(c,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());v9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=l9();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Sk():u9();o(l)}else{const l=c9();o(l)}};this.canceled_?t(!1,new mh(!1,null,!0)):this.backoffId_=g9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function b9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function S9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function C9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function T9(n,e,t,r,s,i,o=!0,a=!1){const l=y9(n.urlParams),c=n.url+l,u=Object.assign({},n.headers);return S9(u,e),_9(u,t),b9(u,i),C9(u,r),new w9(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function k9(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this._service=e,t instanceof rr?this._location=t:this._location=rr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cf(e,t)}get root(){const e=new rr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k9(this._location.path)}get storage(){return this._service}get parent(){const e=E9(this._location.path);if(e===null)return null;const t=new rr(this._location.bucket,e);return new cf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw f9(e)}}function Q_(n,e){const t=e==null?void 0:e[i9];return t==null?null:rr.makeFromBucketSpec(t,n)}function P9(n,e,t,r={}){n.host=`${e}:${t}`;const s=ml(e);s&&(Ay(`https://${n.host}/b`),Iy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:LE(i,n.app.options.projectId))}class O9{constructor(e,t,r,s,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=bk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o9,this._maxUploadRetryTime=a9,this._requests=new Set,s!=null?this._bucket=rr.makeFromBucketSpec(s,this._host):this._bucket=Q_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rr.makeFromBucketSpec(this._url,e):this._bucket=Q_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){q_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){q_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cf(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new p9(Sk());{const o=T9(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const J_="@firebase/storage",Z_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="storage";function A9(n=Ny(),e){n=Is(n);const r=ip(n,Ck).getImmediate({identifier:e}),s=NE("storage");return s&&I9(r,...s),r}function I9(n,e,t,r={}){P9(n,e,t,r)}function R9(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new O9(t,r,s,e,jo)}function D9(){Eo(new Oi(Ck,R9,"PUBLIC").setMultipleInstances(!0)),Nr(J_,Z_,""),Nr(J_,Z_,"esm2020")}D9();var eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hy;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function P(){}P.prototype=T.prototype,E.D=T.prototype,E.prototype=new P,E.prototype.constructor=E,E.C=function(A,D,N){for(var R=Array(arguments.length-2),H=2;H<arguments.length;H++)R[H-2]=arguments[H];return T.prototype[D].apply(A,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,T,P){P||(P=0);var A=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)A[D]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(D=0;16>D;++D)A[D]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=E.g[0],P=E.g[1],D=E.g[2];var N=E.g[3],R=T+(N^P&(D^N))+A[0]+3614090360&4294967295;T=P+(R<<7&4294967295|R>>>25),R=N+(D^T&(P^D))+A[1]+3905402710&4294967295,N=T+(R<<12&4294967295|R>>>20),R=D+(P^N&(T^P))+A[2]+606105819&4294967295,D=N+(R<<17&4294967295|R>>>15),R=P+(T^D&(N^T))+A[3]+3250441966&4294967295,P=D+(R<<22&4294967295|R>>>10),R=T+(N^P&(D^N))+A[4]+4118548399&4294967295,T=P+(R<<7&4294967295|R>>>25),R=N+(D^T&(P^D))+A[5]+1200080426&4294967295,N=T+(R<<12&4294967295|R>>>20),R=D+(P^N&(T^P))+A[6]+2821735955&4294967295,D=N+(R<<17&4294967295|R>>>15),R=P+(T^D&(N^T))+A[7]+4249261313&4294967295,P=D+(R<<22&4294967295|R>>>10),R=T+(N^P&(D^N))+A[8]+1770035416&4294967295,T=P+(R<<7&4294967295|R>>>25),R=N+(D^T&(P^D))+A[9]+2336552879&4294967295,N=T+(R<<12&4294967295|R>>>20),R=D+(P^N&(T^P))+A[10]+4294925233&4294967295,D=N+(R<<17&4294967295|R>>>15),R=P+(T^D&(N^T))+A[11]+2304563134&4294967295,P=D+(R<<22&4294967295|R>>>10),R=T+(N^P&(D^N))+A[12]+1804603682&4294967295,T=P+(R<<7&4294967295|R>>>25),R=N+(D^T&(P^D))+A[13]+4254626195&4294967295,N=T+(R<<12&4294967295|R>>>20),R=D+(P^N&(T^P))+A[14]+2792965006&4294967295,D=N+(R<<17&4294967295|R>>>15),R=P+(T^D&(N^T))+A[15]+1236535329&4294967295,P=D+(R<<22&4294967295|R>>>10),R=T+(D^N&(P^D))+A[1]+4129170786&4294967295,T=P+(R<<5&4294967295|R>>>27),R=N+(P^D&(T^P))+A[6]+3225465664&4294967295,N=T+(R<<9&4294967295|R>>>23),R=D+(T^P&(N^T))+A[11]+643717713&4294967295,D=N+(R<<14&4294967295|R>>>18),R=P+(N^T&(D^N))+A[0]+3921069994&4294967295,P=D+(R<<20&4294967295|R>>>12),R=T+(D^N&(P^D))+A[5]+3593408605&4294967295,T=P+(R<<5&4294967295|R>>>27),R=N+(P^D&(T^P))+A[10]+38016083&4294967295,N=T+(R<<9&4294967295|R>>>23),R=D+(T^P&(N^T))+A[15]+3634488961&4294967295,D=N+(R<<14&4294967295|R>>>18),R=P+(N^T&(D^N))+A[4]+3889429448&4294967295,P=D+(R<<20&4294967295|R>>>12),R=T+(D^N&(P^D))+A[9]+568446438&4294967295,T=P+(R<<5&4294967295|R>>>27),R=N+(P^D&(T^P))+A[14]+3275163606&4294967295,N=T+(R<<9&4294967295|R>>>23),R=D+(T^P&(N^T))+A[3]+4107603335&4294967295,D=N+(R<<14&4294967295|R>>>18),R=P+(N^T&(D^N))+A[8]+1163531501&4294967295,P=D+(R<<20&4294967295|R>>>12),R=T+(D^N&(P^D))+A[13]+2850285829&4294967295,T=P+(R<<5&4294967295|R>>>27),R=N+(P^D&(T^P))+A[2]+4243563512&4294967295,N=T+(R<<9&4294967295|R>>>23),R=D+(T^P&(N^T))+A[7]+1735328473&4294967295,D=N+(R<<14&4294967295|R>>>18),R=P+(N^T&(D^N))+A[12]+2368359562&4294967295,P=D+(R<<20&4294967295|R>>>12),R=T+(P^D^N)+A[5]+4294588738&4294967295,T=P+(R<<4&4294967295|R>>>28),R=N+(T^P^D)+A[8]+2272392833&4294967295,N=T+(R<<11&4294967295|R>>>21),R=D+(N^T^P)+A[11]+1839030562&4294967295,D=N+(R<<16&4294967295|R>>>16),R=P+(D^N^T)+A[14]+4259657740&4294967295,P=D+(R<<23&4294967295|R>>>9),R=T+(P^D^N)+A[1]+2763975236&4294967295,T=P+(R<<4&4294967295|R>>>28),R=N+(T^P^D)+A[4]+1272893353&4294967295,N=T+(R<<11&4294967295|R>>>21),R=D+(N^T^P)+A[7]+4139469664&4294967295,D=N+(R<<16&4294967295|R>>>16),R=P+(D^N^T)+A[10]+3200236656&4294967295,P=D+(R<<23&4294967295|R>>>9),R=T+(P^D^N)+A[13]+681279174&4294967295,T=P+(R<<4&4294967295|R>>>28),R=N+(T^P^D)+A[0]+3936430074&4294967295,N=T+(R<<11&4294967295|R>>>21),R=D+(N^T^P)+A[3]+3572445317&4294967295,D=N+(R<<16&4294967295|R>>>16),R=P+(D^N^T)+A[6]+76029189&4294967295,P=D+(R<<23&4294967295|R>>>9),R=T+(P^D^N)+A[9]+3654602809&4294967295,T=P+(R<<4&4294967295|R>>>28),R=N+(T^P^D)+A[12]+3873151461&4294967295,N=T+(R<<11&4294967295|R>>>21),R=D+(N^T^P)+A[15]+530742520&4294967295,D=N+(R<<16&4294967295|R>>>16),R=P+(D^N^T)+A[2]+3299628645&4294967295,P=D+(R<<23&4294967295|R>>>9),R=T+(D^(P|~N))+A[0]+4096336452&4294967295,T=P+(R<<6&4294967295|R>>>26),R=N+(P^(T|~D))+A[7]+1126891415&4294967295,N=T+(R<<10&4294967295|R>>>22),R=D+(T^(N|~P))+A[14]+2878612391&4294967295,D=N+(R<<15&4294967295|R>>>17),R=P+(N^(D|~T))+A[5]+4237533241&4294967295,P=D+(R<<21&4294967295|R>>>11),R=T+(D^(P|~N))+A[12]+1700485571&4294967295,T=P+(R<<6&4294967295|R>>>26),R=N+(P^(T|~D))+A[3]+2399980690&4294967295,N=T+(R<<10&4294967295|R>>>22),R=D+(T^(N|~P))+A[10]+4293915773&4294967295,D=N+(R<<15&4294967295|R>>>17),R=P+(N^(D|~T))+A[1]+2240044497&4294967295,P=D+(R<<21&4294967295|R>>>11),R=T+(D^(P|~N))+A[8]+1873313359&4294967295,T=P+(R<<6&4294967295|R>>>26),R=N+(P^(T|~D))+A[15]+4264355552&4294967295,N=T+(R<<10&4294967295|R>>>22),R=D+(T^(N|~P))+A[6]+2734768916&4294967295,D=N+(R<<15&4294967295|R>>>17),R=P+(N^(D|~T))+A[13]+1309151649&4294967295,P=D+(R<<21&4294967295|R>>>11),R=T+(D^(P|~N))+A[4]+4149444226&4294967295,T=P+(R<<6&4294967295|R>>>26),R=N+(P^(T|~D))+A[11]+3174756917&4294967295,N=T+(R<<10&4294967295|R>>>22),R=D+(T^(N|~P))+A[2]+718787259&4294967295,D=N+(R<<15&4294967295|R>>>17),R=P+(N^(D|~T))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var P=T-this.blockSize,A=this.B,D=this.h,N=0;N<T;){if(D==0)for(;N<=P;)s(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<T;)if(A[D++]=E.charCodeAt(N++),D==this.blockSize){s(this,A),D=0;break}}else for(;N<T;)if(A[D++]=E[N++],D==this.blockSize){s(this,A),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var P=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=P&255,P/=256;for(this.u(E),E=Array(16),T=P=0;4>T;++T)for(var A=0;32>A;A+=8)E[P++]=this.g[T]>>>A&255;return E};function i(E,T){var P=a;return Object.prototype.hasOwnProperty.call(P,E)?P[E]:P[E]=T(E)}function o(E,T){this.h=T;for(var P=[],A=!0,D=E.length-1;0<=D;D--){var N=E[D]|0;A&&N==T||(P[D]=N,A=!1)}this.g=P}var a={};function l(E){return-128<=E&&128>E?i(E,function(T){return new o([T|0],0>T?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(c(-E));for(var T=[],P=1,A=0;E>=P;A++)T[A]=E/P|0,P*=4294967296;return new o(T,0)}function u(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return b(u(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(T,8)),A=f,D=0;D<E.length;D+=8){var N=Math.min(8,E.length-D),R=parseInt(E.substring(D,D+N),T);8>N?(N=c(Math.pow(T,N)),A=A.j(N).add(c(R))):(A=A.j(P),A=A.add(c(R)))}return A}var f=l(0),d=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-b(this).m();for(var E=0,T=1,P=0;P<this.g.length;P++){var A=this.i(P);E+=(0<=A?A:4294967296+A)*T,T*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(m(this))return"0";if(v(this))return"-"+b(this).toString(E);for(var T=c(Math.pow(E,6)),P=this,A="";;){var D=k(P,T).g;P=x(P,D.j(T));var N=((0<P.g.length?P.g[0]:P.h)>>>0).toString(E);if(P=D,m(P))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function m(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function v(E){return E.h==-1}n.l=function(E){return E=x(this,E),v(E)?-1:m(E)?0:1};function b(E){for(var T=E.g.length,P=[],A=0;A<T;A++)P[A]=~E.g[A];return new o(P,~E.h).add(d)}n.abs=function(){return v(this)?b(this):this},n.add=function(E){for(var T=Math.max(this.g.length,E.g.length),P=[],A=0,D=0;D<=T;D++){var N=A+(this.i(D)&65535)+(E.i(D)&65535),R=(N>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);A=R>>>16,N&=65535,R&=65535,P[D]=R<<16|N}return new o(P,P[P.length-1]&-2147483648?-1:0)};function x(E,T){return E.add(b(T))}n.j=function(E){if(m(this)||m(E))return f;if(v(this))return v(E)?b(this).j(b(E)):b(b(this).j(E));if(v(E))return b(this.j(b(E)));if(0>this.l(g)&&0>E.l(g))return c(this.m()*E.m());for(var T=this.g.length+E.g.length,P=[],A=0;A<2*T;A++)P[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<E.g.length;D++){var N=this.i(A)>>>16,R=this.i(A)&65535,H=E.i(D)>>>16,ne=E.i(D)&65535;P[2*A+2*D]+=R*ne,w(P,2*A+2*D),P[2*A+2*D+1]+=N*ne,w(P,2*A+2*D+1),P[2*A+2*D+1]+=R*H,w(P,2*A+2*D+1),P[2*A+2*D+2]+=N*H,w(P,2*A+2*D+2)}for(A=0;A<T;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=T;A<2*T;A++)P[A]=0;return new o(P,0)};function w(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function S(E,T){this.g=E,this.h=T}function k(E,T){if(m(T))throw Error("division by zero");if(m(E))return new S(f,f);if(v(E))return T=k(b(E),T),new S(b(T.g),b(T.h));if(v(T))return T=k(E,b(T)),new S(b(T.g),T.h);if(30<E.g.length){if(v(E)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var P=d,A=T;0>=A.l(E);)P=O(P),A=O(A);var D=M(P,1),N=M(A,1);for(A=M(A,2),P=M(P,2);!m(A);){var R=N.add(A);0>=R.l(E)&&(D=D.add(P),N=R),A=M(A,1),P=M(P,1)}return T=x(E,D.j(T)),new S(D,T)}for(D=f;0<=E.l(T);){for(P=Math.max(1,Math.floor(E.m()/T.m())),A=Math.ceil(Math.log(P)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=c(P),R=N.j(T);v(R)||0<R.l(E);)P-=A,N=c(P),R=N.j(T);m(N)&&(N=d),D=D.add(N),E=x(E,R)}return new S(D,E)}n.A=function(E){return k(this,E).h},n.and=function(E){for(var T=Math.max(this.g.length,E.g.length),P=[],A=0;A<T;A++)P[A]=this.i(A)&E.i(A);return new o(P,this.h&E.h)},n.or=function(E){for(var T=Math.max(this.g.length,E.g.length),P=[],A=0;A<T;A++)P[A]=this.i(A)|E.i(A);return new o(P,this.h|E.h)},n.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),P=[],A=0;A<T;A++)P[A]=this.i(A)^E.i(A);return new o(P,this.h^E.h)};function O(E){for(var T=E.g.length+1,P=[],A=0;A<T;A++)P[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(P,E.h)}function M(E,T){var P=T>>5;T%=32;for(var A=E.g.length-P,D=[],N=0;N<A;N++)D[N]=0<T?E.i(N+P)>>>T|E.i(N+P+1)<<32-T:E.i(N+P);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Hy=o}).apply(typeof eb<"u"?eb:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,C){return h==Array.prototype||h==Object.prototype||(h[_]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var _=0;_<h.length;++_){var C=h[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var C=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var B=h[I];if(!(B in C))break e;C=C[B]}h=h[h.length-1],I=C[h],_=_(I),_!=I&&_!=null&&e(C,h,{configurable:!0,writable:!0,value:_})}}function i(h,_){h instanceof String&&(h+="");var C=0,I=!1,B={next:function(){if(!I&&C<h.length){var W=C++;return{value:_(W,h[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(h){return h||function(){return i(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function c(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function u(h,_,C){return h.call.apply(h.bind,arguments)}function f(h,_,C){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),h.apply(_,B)}}return function(){return h.apply(_,arguments)}}function d(h,_,C){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,d.apply(null,arguments)}function g(h,_){var C=Array.prototype.slice.call(arguments,1);return function(){var I=C.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function m(h,_){function C(){}C.prototype=_.prototype,h.aa=_.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(I,B,W){for(var ee=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ee[Fe-2]=arguments[Fe];return _.prototype[B].apply(I,ee)}}function v(h){const _=h.length;if(0<_){const C=Array(_);for(let I=0;I<_;I++)C[I]=h[I];return C}return[]}function b(h,_){for(let C=1;C<arguments.length;C++){const I=arguments[C];if(l(I)){const B=h.length||0,W=I.length||0;h.length=B+W;for(let ee=0;ee<W;ee++)h[B+ee]=I[ee]}else h.push(I)}}class x{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function w(h){return/^[\s\xa0]*$/.test(h)}function S(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function k(h){return k[" "](h),h}k[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(h,_,C){for(const I in h)_.call(C,h[I],I,h)}function E(h,_){for(const C in h)_.call(void 0,h[C],C,h)}function T(h){const _={};for(const C in h)_[C]=h[C];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(h,_){let C,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(C in I)h[C]=I[C];for(let W=0;W<P.length;W++)C=P[W],Object.prototype.hasOwnProperty.call(I,C)&&(h[C]=I[C])}}function D(h){var _=1;h=h.split(":");const C=[];for(;0<_&&h.length;)C.push(h.shift()),_--;return h.length&&C.push(h.join(":")),C}function N(h){a.setTimeout(()=>{throw h},0)}function R(){var h=$;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class H{constructor(){this.h=this.g=null}add(_,C){const I=ne.get();I.set(_,C),this.h?this.h.next=I:this.g=I,this.h=I}}var ne=new x(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,U=!1,$=new H,J=()=>{const h=a.Promise.resolve(void 0);oe=()=>{h.then(ue)}};var ue=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(C){N(C)}var _=ne;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}U=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};a.addEventListener("test",C,_),a.removeEventListener("test",C,_)}catch{}return h}();function K(h,_){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(O){e:{try{k(_.nodeName);var B=!0;break e}catch{}B=!1}B||(_=null)}}else C=="mouseover"?_=h.fromElement:C=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Y[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&K.aa.h.call(this)}}m(K,re);var Y={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),se=0;function ae(h,_,C,I,B){this.listener=h,this.proxy=null,this.src=_,this.type=C,this.capture=!!I,this.ha=B,this.key=++se,this.da=this.fa=!1}function G(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ie(h){this.src=h,this.g={},this.h=0}ie.prototype.add=function(h,_,C,I,B){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var ee=Se(h,_,I,B);return-1<ee?(_=h[ee],C||(_.fa=!1)):(_=new ae(_,this.src,W,!!I,B),_.fa=C,h.push(_)),_};function de(h,_){var C=_.type;if(C in h.g){var I=h.g[C],B=Array.prototype.indexOf.call(I,_,void 0),W;(W=0<=B)&&Array.prototype.splice.call(I,B,1),W&&(G(_),h.g[C].length==0&&(delete h.g[C],h.h--))}}function Se(h,_,C,I){for(var B=0;B<h.length;++B){var W=h[B];if(!W.da&&W.listener==_&&W.capture==!!C&&W.ha==I)return B}return-1}var me="closure_lm_"+(1e6*Math.random()|0),Ue={};function pt(h,_,C,I,B){if(Array.isArray(_)){for(var W=0;W<_.length;W++)pt(h,_[W],C,I,B);return null}return C=Ui(C),h&&h[X]?h.K(_,C,c(I)?!!I.capture:!!I,B):xt(h,_,C,!1,I,B)}function xt(h,_,C,I,B,W){if(!_)throw Error("Invalid event type");var ee=c(B)?!!B.capture:!!B,Fe=Pl(h);if(Fe||(h[me]=Fe=new ie(h)),C=Fe.add(_,C,I,ee,W),C.proxy)return C;if(I=Fi(),C.proxy=I,I.src=h,I.listener=C,h.addEventListener)V||(B=ee),B===void 0&&(B=!1),h.addEventListener(_.toString(),I,B);else if(h.attachEvent)h.attachEvent(Gr(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Fi(){function h(C){return _.call(h.src,h.listener,C)}const _=kl;return h}function Nt(h,_,C,I,B){if(Array.isArray(_))for(var W=0;W<_.length;W++)Nt(h,_[W],C,I,B);else I=c(I)?!!I.capture:!!I,C=Ui(C),h&&h[X]?(h=h.i,_=String(_).toString(),_ in h.g&&(W=h.g[_],C=Se(W,C,I,B),-1<C&&(G(W[C]),Array.prototype.splice.call(W,C,1),W.length==0&&(delete h.g[_],h.h--)))):h&&(h=Pl(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Se(_,C,I,B)),(C=-1<h?_[h]:null)&&Un(C))}function Un(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[X])de(_.i,h);else{var C=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(C,I,h.capture):_.detachEvent?_.detachEvent(Gr(C),I):_.addListener&&_.removeListener&&_.removeListener(I),(C=Pl(_))?(de(C,h),C.h==0&&(C.src=null,_[me]=null)):G(h)}}}function Gr(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function kl(h,_){if(h.da)h=!0;else{_=new K(_,this);var C=h.listener,I=h.ha||h.src;h.fa&&Un(h),h=C.call(I,_)}return h}function Pl(h){return h=h[me],h instanceof ie?h:null}var Bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ui(h){return typeof h=="function"?h:(h[Bo]||(h[Bo]=function(_){return h.handleEvent(_)}),h[Bo])}function ct(){q.call(this),this.i=new ie(this),this.M=this,this.F=null}m(ct,q),ct.prototype[X]=!0,ct.prototype.removeEventListener=function(h,_,C,I){Nt(this,h,_,C,I)};function wt(h,_){var C,I=h.F;if(I)for(C=[];I;I=I.F)C.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new re(_,h);else if(_ instanceof re)_.target=_.target||h;else{var B=_;_=new re(I,h),A(_,B)}if(B=!0,C)for(var W=C.length-1;0<=W;W--){var ee=_.g=C[W];B=pr(ee,I,!0,_)&&B}if(ee=_.g=h,B=pr(ee,I,!0,_)&&B,B=pr(ee,I,!1,_)&&B,C)for(W=0;W<C.length;W++)ee=_.g=C[W],B=pr(ee,I,!1,_)&&B}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var C=h.g[_],I=0;I<C.length;I++)G(C[I]);delete h.g[_],h.h--}}this.F=null},ct.prototype.K=function(h,_,C,I){return this.i.add(String(h),_,!1,C,I)},ct.prototype.L=function(h,_,C,I){return this.i.add(String(h),_,!0,C,I)};function pr(h,_,C,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var B=!0,W=0;W<_.length;++W){var ee=_[W];if(ee&&!ee.da&&ee.capture==C){var Fe=ee.listener,_t=ee.ha||ee.src;ee.fa&&de(h.i,ee),B=Fe.call(_t,I)!==!1&&B}}return B&&!I.defaultPrevented}function zo(h,_,C){if(typeof h=="function")C&&(h=d(h,C));else if(h&&typeof h.handleEvent=="function")h=d(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function Ux(h){h.g=zo(()=>{h.g=null,h.i&&(h.i=!1,Ux(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class TI extends q{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ux(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ol(h){q.call(this),this.h=h,this.g={}}m(Ol,q);var Bx=[];function zx(h){M(h.g,function(_,C){this.g.hasOwnProperty(C)&&Un(_)},h),h.g={}}Ol.prototype.N=function(){Ol.aa.N.call(this),zx(this)},Ol.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ip=a.JSON.stringify,EI=a.JSON.parse,kI=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Rp(){}Rp.prototype.h=null;function Vx(h){return h.h||(h.h=h.i())}function PI(){}var Al={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dp(){re.call(this,"d")}m(Dp,re);function Np(){re.call(this,"c")}m(Np,re);var Vo={},$x=null;function Mp(){return $x=$x||new ct}Vo.La="serverreachability";function Wx(h){re.call(this,Vo.La,h)}m(Wx,re);function Il(h){const _=Mp();wt(_,new Wx(_))}Vo.STAT_EVENT="statevent";function Hx(h,_){re.call(this,Vo.STAT_EVENT,h),this.stat=_}m(Hx,re);function Mt(h){const _=Mp();wt(_,new Hx(_,h))}Vo.Ma="timingevent";function Gx(h,_){re.call(this,Vo.Ma,h),this.size=_}m(Gx,re);function Rl(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Dl(){this.g=!0}Dl.prototype.xa=function(){this.g=!1};function OI(h,_,C,I,B,W){h.info(function(){if(h.g)if(W)for(var ee="",Fe=W.split("&"),_t=0;_t<Fe.length;_t++){var Re=Fe[_t].split("=");if(1<Re.length){var Et=Re[0];Re=Re[1];var kt=Et.split("_");ee=2<=kt.length&&kt[1]=="type"?ee+(Et+"="+Re+"&"):ee+(Et+"=redacted&")}}else ee=null;else ee=W;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+_+`
`+C+`
`+ee})}function AI(h,_,C,I,B,W,ee){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+_+`
`+C+`
`+W+" "+ee})}function $o(h,_,C,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+RI(h,C)+(I?" "+I:"")})}function II(h,_){h.info(function(){return"TIMEOUT: "+_})}Dl.prototype.info=function(){};function RI(h,_){if(!h.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var I=C[h];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ee=1;ee<B.length;ee++)B[ee]=""}}}}return Ip(C)}catch{return _}}var jp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lp;function Nu(){}m(Nu,Rp),Nu.prototype.g=function(){return new XMLHttpRequest},Nu.prototype.i=function(){return{}},Lp=new Nu;function Ns(h,_,C,I){this.j=h,this.i=_,this.l=C,this.R=I||1,this.U=new Ol(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xx}function Xx(){this.i=null,this.g="",this.h=!1}var Yx={},Fp={};function Up(h,_,C){h.L=1,h.v=Fu(Xr(_)),h.m=C,h.P=!0,Kx(h,null)}function Kx(h,_){h.F=Date.now(),Mu(h),h.A=Xr(h.v);var C=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),c1(C.i,"t",I),h.C=0,C=h.j.J,h.h=new Xx,h.g=k1(h.j,C?_:null,!h.m),0<h.O&&(h.M=new TI(d(h.Y,h,h.g),h.O)),_=h.U,C=h.g,I=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(Bx[0]=B.toString()),B=Bx);for(var W=0;W<B.length;W++){var ee=pt(C,B[W],I||_.handleEvent,!1,_.h||_);if(!ee)break;_.g[ee.key]=ee}_=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Il(),OI(h.i,h.u,h.A,h.l,h.R,h.m)}Ns.prototype.ca=function(h){h=h.target;const _=this.M;_&&Yr(h)==3?_.j():this.Y(h)},Ns.prototype.Y=function(h){try{if(h==this.g)e:{const kt=Yr(this.g);var _=this.g.Ba();const Go=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||m1(this.g)))){this.J||kt!=4||_==7||(_==8||0>=Go?Il(3):Il(2)),Bp(this);var C=this.g.Z();this.X=C;t:if(qx(this)){var I=m1(this.g);h="";var B=I.length,W=Yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bi(this),Nl(this);var ee="";break t}this.h.i=new a.TextDecoder}for(_=0;_<B;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(W&&_==B-1)});I.length=0,this.h.g+=h,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=C==200,AI(this.i,this.u,this.A,this.l,this.R,kt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,_t=this.g;if((Fe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Fe)){var Re=Fe;break t}}Re=null}if(C=Re)$o(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zp(this,C);else{this.o=!1,this.s=3,Mt(12),Bi(this),Nl(this);break e}}if(this.P){C=!0;let Bn;for(;!this.J&&this.C<ee.length;)if(Bn=NI(this,ee),Bn==Fp){kt==4&&(this.s=4,Mt(14),C=!1),$o(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Yx){this.s=4,Mt(15),$o(this.i,this.l,ee,"[Invalid Chunk]"),C=!1;break}else $o(this.i,this.l,Bn,null),zp(this,Bn);if(qx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ee.length!=0||this.h.h||(this.s=1,Mt(16),C=!1),this.o=this.o&&C,!C)$o(this.i,this.l,ee,"[Invalid Chunked Response]"),Bi(this),Nl(this);else if(0<ee.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Xp(Et),Et.M=!0,Mt(11))}}else $o(this.i,this.l,ee,null),zp(this,ee);kt==4&&Bi(this),this.o&&!this.J&&(kt==4?S1(this.j,this):(this.o=!1,Mu(this)))}else QI(this.g),C==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Bi(this),Nl(this)}}}catch{}finally{}};function qx(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function NI(h,_){var C=h.C,I=_.indexOf(`
`,C);return I==-1?Fp:(C=Number(_.substring(C,I)),isNaN(C)?Yx:(I+=1,I+C>_.length?Fp:(_=_.slice(I,I+C),h.C=I+C,_)))}Ns.prototype.cancel=function(){this.J=!0,Bi(this)};function Mu(h){h.S=Date.now()+h.I,Qx(h,h.I)}function Qx(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rl(d(h.ba,h),_)}function Bp(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Ns.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(II(this.i,this.A),this.L!=2&&(Il(),Mt(17)),Bi(this),this.s=2,Nl(this)):Qx(this,this.S-h)};function Nl(h){h.j.G==0||h.J||S1(h.j,h)}function Bi(h){Bp(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,zx(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function zp(h,_){try{var C=h.j;if(C.G!=0&&(C.g==h||Vp(C.h,h))){if(!h.K&&Vp(C.h,h)&&C.G==3){try{var I=C.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Wu(C),Vu(C);else break e;Gp(C),Mt(18)}}else C.za=B[1],0<C.za-C.T&&37500>B[2]&&C.F&&C.v==0&&!C.C&&(C.C=Rl(d(C.Za,C),6e3));if(1>=e1(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Vi(C,11)}else if((h.K||C.g==h)&&Wu(C),!w(_))for(B=C.Da.g.parse(_),_=0;_<B.length;_++){let Re=B[_];if(C.T=Re[0],Re=Re[1],C.G==2)if(Re[0]=="c"){C.K=Re[1],C.ia=Re[2];const Et=Re[3];Et!=null&&(C.la=Et,C.j.info("VER="+C.la));const kt=Re[4];kt!=null&&(C.Aa=kt,C.j.info("SVER="+C.Aa));const Go=Re[5];Go!=null&&typeof Go=="number"&&0<Go&&(I=1.5*Go,C.L=I,C.j.info("backChannelRequestTimeoutMs_="+I)),I=C;const Bn=h.g;if(Bn){const Hu=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hu){var W=I.h;W.g||Hu.indexOf("spdy")==-1&&Hu.indexOf("quic")==-1&&Hu.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&($p(W,W.h),W.h=null))}if(I.D){const Yp=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yp&&(I.ya=Yp,Ve(I.I,I.D,Yp))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),I=C;var ee=h;if(I.qa=E1(I,I.J?I.ia:null,I.W),ee.K){t1(I.h,ee);var Fe=ee,_t=I.L;_t&&(Fe.I=_t),Fe.B&&(Bp(Fe),Mu(Fe)),I.g=ee}else _1(I);0<C.i.length&&$u(C)}else Re[0]!="stop"&&Re[0]!="close"||Vi(C,7);else C.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Vi(C,7):Hp(C):Re[0]!="noop"&&C.l&&C.l.ta(Re),C.v=0)}}Il(4)}catch{}}var MI=class{constructor(h,_){this.g=h,this.map=_}};function Jx(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zx(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function e1(h){return h.h?1:h.g?h.g.size:0}function Vp(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function $p(h,_){h.g?h.g.add(_):h.h=_}function t1(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Jx.prototype.cancel=function(){if(this.i=n1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function n1(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const C of h.g.values())_=_.concat(C.D);return _}return v(h.i)}function jI(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var _=[],C=h.length,I=0;I<C;I++)_.push(h[I]);return _}_=[],C=0;for(I in h)_[C++]=h[I];return _}function LI(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var _=[];h=h.length;for(var C=0;C<h;C++)_.push(C);return _}_=[],C=0;for(const I in h)_[C++]=I;return _}}}function r1(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var C=LI(h),I=jI(h),B=I.length,W=0;W<B;W++)_.call(void 0,I[W],C&&C[W],h)}var s1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FI(h,_){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var I=h[C].indexOf("="),B=null;if(0<=I){var W=h[C].substring(0,I);B=h[C].substring(I+1)}else W=h[C];_(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function zi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zi){this.h=h.h,ju(this,h.j),this.o=h.o,this.g=h.g,Lu(this,h.s),this.l=h.l;var _=h.i,C=new Ll;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),i1(this,C),this.m=h.m}else h&&(_=String(h).match(s1))?(this.h=!1,ju(this,_[1]||"",!0),this.o=Ml(_[2]||""),this.g=Ml(_[3]||"",!0),Lu(this,_[4]),this.l=Ml(_[5]||"",!0),i1(this,_[6]||"",!0),this.m=Ml(_[7]||"")):(this.h=!1,this.i=new Ll(null,this.h))}zi.prototype.toString=function(){var h=[],_=this.j;_&&h.push(jl(_,o1,!0),":");var C=this.g;return(C||_=="file")&&(h.push("//"),(_=this.o)&&h.push(jl(_,o1,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(jl(C,C.charAt(0)=="/"?zI:BI,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",jl(C,$I)),h.join("")};function Xr(h){return new zi(h)}function ju(h,_,C){h.j=C?Ml(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Lu(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function i1(h,_,C){_ instanceof Ll?(h.i=_,WI(h.i,h.h)):(C||(_=jl(_,VI)),h.i=new Ll(_,h.h))}function Ve(h,_,C){h.i.set(_,C)}function Fu(h){return Ve(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ml(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function jl(h,_,C){return typeof h=="string"?(h=encodeURI(h).replace(_,UI),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function UI(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var o1=/[#\/\?@]/g,BI=/[#\?:]/g,zI=/[#\?]/g,VI=/[#\?@]/g,$I=/#/g;function Ll(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Ms(h){h.g||(h.g=new Map,h.h=0,h.i&&FI(h.i,function(_,C){h.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}n=Ll.prototype,n.add=function(h,_){Ms(this),this.i=null,h=Wo(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(_),this.h+=1,this};function a1(h,_){Ms(h),_=Wo(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function l1(h,_){return Ms(h),_=Wo(h,_),h.g.has(_)}n.forEach=function(h,_){Ms(this),this.g.forEach(function(C,I){C.forEach(function(B){h.call(_,B,I,this)},this)},this)},n.na=function(){Ms(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let I=0;I<_.length;I++){const B=h[I];for(let W=0;W<B.length;W++)C.push(_[I])}return C},n.V=function(h){Ms(this);let _=[];if(typeof h=="string")l1(this,h)&&(_=_.concat(this.g.get(Wo(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)_=_.concat(h[C])}return _},n.set=function(h,_){return Ms(this),this.i=null,h=Wo(this,h),l1(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function c1(h,_,C){a1(h,_),0<C.length&&(h.i=null,h.g.set(Wo(h,_),v(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var I=_[C];const W=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var B=W;ee[I]!==""&&(B+="="+encodeURIComponent(String(ee[I]))),h.push(B)}}return this.i=h.join("&")};function Wo(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function WI(h,_){_&&!h.j&&(Ms(h),h.i=null,h.g.forEach(function(C,I){var B=I.toLowerCase();I!=B&&(a1(this,I),c1(this,B,C))},h)),h.j=_}function HI(h,_){const C=new Dl;if(a.Image){const I=new Image;I.onload=g(js,C,"TestLoadImage: loaded",!0,_,I),I.onerror=g(js,C,"TestLoadImage: error",!1,_,I),I.onabort=g(js,C,"TestLoadImage: abort",!1,_,I),I.ontimeout=g(js,C,"TestLoadImage: timeout",!1,_,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function GI(h,_){const C=new Dl,I=new AbortController,B=setTimeout(()=>{I.abort(),js(C,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(W=>{clearTimeout(B),W.ok?js(C,"TestPingServer: ok",!0,_):js(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),js(C,"TestPingServer: error",!1,_)})}function js(h,_,C,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(C)}catch{}}function XI(){this.g=new kI}function YI(h,_,C){const I=C||"";try{r1(h,function(B,W){let ee=B;c(B)&&(ee=Ip(B)),_.push(I+W+"="+encodeURIComponent(ee))})}catch(B){throw _.push(I+"type="+encodeURIComponent("_badmap")),B}}function Uu(h){this.l=h.Ub||null,this.j=h.eb||!1}m(Uu,Rp),Uu.prototype.g=function(){return new Bu(this.l,this.j)},Uu.prototype.i=function(h){return function(){return h}}({});function Bu(h,_){ct.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Bu,ct),n=Bu.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ul(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fl(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;u1(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function u1(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Fl(this):Ul(this),this.readyState==3&&u1(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Fl(this))},n.Qa=function(h){this.g&&(this.response=h,Fl(this))},n.ga=function(){this.g&&Fl(this)};function Fl(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ul(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=_.next();return h.join(`\r
`)};function Ul(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function h1(h){let _="";return M(h,function(C,I){_+=I,_+=":",_+=C,_+=`\r
`}),_}function Wp(h,_,C){e:{for(I in C){var I=!1;break e}I=!0}I||(C=h1(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Ve(h,_,C))}function tt(h){ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(tt,ct);var KI=/^https?$/i,qI=["POST","PUT"];n=tt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,C,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lp.g(),this.v=this.o?Vx(this.o):Vx(Lp),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(W){d1(this,W);return}if(h=C||"",C=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)C.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())C.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),B=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qI,_,void 0))||I||B||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of C)this.g.setRequestHeader(W,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g1(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){d1(this,W)}};function d1(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,f1(h),zu(h)}function f1(h){h.A||(h.A=!0,wt(h,"complete"),wt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,wt(this,"complete"),wt(this,"abort"),zu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zu(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?p1(this):this.bb())},n.bb=function(){p1(this)};function p1(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Yr(h)!=4||h.Z()!=2)){if(h.u&&Yr(h)==4)zo(h.Ea,0,h);else if(wt(h,"readystatechange"),Yr(h)==4){h.h=!1;try{const ee=h.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var I;if(I=ee===0){var B=String(h.D).match(s1)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),I=!KI.test(B?B.toLowerCase():"")}C=I}if(C)wt(h,"complete"),wt(h,"success");else{h.m=6;try{var W=2<Yr(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",f1(h)}}finally{zu(h)}}}}function zu(h,_){if(h.g){g1(h);const C=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||wt(h,"ready");try{C.onreadystatechange=I}catch{}}}function g1(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Yr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Yr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),EI(_)}};function m1(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function QI(h){const _={};h=(h.g&&2<=Yr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(w(h[I]))continue;var C=D(h[I]);const B=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=_[B]||[];_[B]=W,W.push(C)}E(_,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bl(h,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||_}function v1(h){this.Aa=0,this.i=[],this.j=new Dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bl("baseRetryDelayMs",5e3,h),this.cb=Bl("retryDelaySeedMs",1e4,h),this.Wa=Bl("forwardChannelMaxRetries",2,h),this.wa=Bl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Jx(h&&h.concurrentRequestLimit),this.Da=new XI,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=v1.prototype,n.la=8,n.G=1,n.connect=function(h,_,C,I){Mt(0),this.W=h,this.H=_||{},C&&I!==void 0&&(this.H.OSID=C,this.H.OAID=I),this.F=this.X,this.I=E1(this,null,this.W),$u(this)};function Hp(h){if(y1(h),h.G==3){var _=h.U++,C=Xr(h.I);if(Ve(C,"SID",h.K),Ve(C,"RID",_),Ve(C,"TYPE","terminate"),zl(h,C),_=new Ns(h,h.j,_),_.L=2,_.v=Fu(Xr(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=_.v,C=!0),C||(_.g=k1(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Mu(_)}T1(h)}function Vu(h){h.g&&(Xp(h),h.g.cancel(),h.g=null)}function y1(h){Vu(h),h.u&&(a.clearTimeout(h.u),h.u=null),Wu(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function $u(h){if(!Zx(h.h)&&!h.s){h.s=!0;var _=h.Ga;oe||J(),U||(oe(),U=!0),$.add(_,h),h.B=0}}function JI(h,_){return e1(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rl(d(h.Ga,h,_),C1(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new Ns(this,this.j,h);let W=this.o;if(this.S&&(W?(W=T(W),A(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var I=this.i[C];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=w1(this,B,_),C=Xr(this.I),Ve(C,"RID",h),Ve(C,"CVER",22),this.D&&Ve(C,"X-HTTP-Session-Id",this.D),zl(this,C),W&&(this.O?_="headers="+encodeURIComponent(String(h1(W)))+"&"+_:this.m&&Wp(C,this.m,W)),$p(this.h,B),this.Ua&&Ve(C,"TYPE","init"),this.P?(Ve(C,"$req",_),Ve(C,"SID","null"),B.T=!0,Up(B,C,null)):Up(B,C,_),this.G=2}}else this.G==3&&(h?x1(this,h):this.i.length==0||Zx(this.h)||x1(this))};function x1(h,_){var C;_?C=_.l:C=h.U++;const I=Xr(h.I);Ve(I,"SID",h.K),Ve(I,"RID",C),Ve(I,"AID",h.T),zl(h,I),h.m&&h.o&&Wp(I,h.m,h.o),C=new Ns(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),_&&(h.i=_.D.concat(h.i)),_=w1(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$p(h.h,C),Up(C,I,_)}function zl(h,_){h.H&&M(h.H,function(C,I){Ve(_,I,C)}),h.l&&r1({},function(C,I){Ve(_,I,C)})}function w1(h,_,C){C=Math.min(h.i.length,C);var I=h.l?d(h.l.Na,h.l,h):null;e:{var B=h.i;let W=-1;for(;;){const ee=["count="+C];W==-1?0<C?(W=B[0].g,ee.push("ofs="+W)):W=0:ee.push("ofs="+W);let Fe=!0;for(let _t=0;_t<C;_t++){let Re=B[_t].g;const Et=B[_t].map;if(Re-=W,0>Re)W=Math.max(0,B[_t].g-100),Fe=!1;else try{YI(Et,ee,"req"+Re+"_")}catch{I&&I(Et)}}if(Fe){I=ee.join("&");break e}}}return h=h.i.splice(0,C),_.D=h,I}function _1(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;oe||J(),U||(oe(),U=!0),$.add(_,h),h.v=0}}function Gp(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rl(d(h.Fa,h),C1(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,b1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rl(d(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Vu(this),b1(this))};function Xp(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function b1(h){h.g=new Ns(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xr(h.qa);Ve(_,"RID","rpc"),Ve(_,"SID",h.K),Ve(_,"AID",h.T),Ve(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ve(_,"TO",h.ja),Ve(_,"TYPE","xmlhttp"),zl(h,_),h.m&&h.o&&Wp(_,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Fu(Xr(_)),C.m=null,C.P=!0,Kx(C,h)}n.Za=function(){this.C!=null&&(this.C=null,Vu(this),Gp(this),Mt(19))};function Wu(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function S1(h,_){var C=null;if(h.g==_){Wu(h),Xp(h),h.g=null;var I=2}else if(Vp(h.h,_))C=_.D,t1(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var B=h.B;I=Mp(),wt(I,new Gx(I,C)),$u(h)}else _1(h);else if(B=_.s,B==3||B==0&&0<_.X||!(I==1&&JI(h,_)||I==2&&Gp(h)))switch(C&&0<C.length&&(_=h.h,_.i=_.i.concat(C)),B){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function C1(h,_){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*_}function Vi(h,_){if(h.j.info("Error code "+_),_==2){var C=d(h.fb,h),I=h.Xa;const B=!I;I=new zi(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ju(I,"https"),Fu(I),B?HI(I.toString(),C):GI(I.toString(),C)}else Mt(2);h.G=0,h.l&&h.l.sa(_),T1(h),y1(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function T1(h){if(h.G=0,h.ka=[],h.l){const _=n1(h.h);(_.length!=0||h.i.length!=0)&&(b(h.ka,_),b(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function E1(h,_,C){var I=C instanceof zi?Xr(C):new zi(C);if(I.g!="")_&&(I.g=_+"."+I.g),Lu(I,I.s);else{var B=a.location;I=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;var W=new zi(null);I&&ju(W,I),_&&(W.g=_),B&&Lu(W,B),C&&(W.l=C),I=W}return C=h.D,_=h.ya,C&&_&&Ve(I,C,_),Ve(I,"VER",h.la),zl(h,I),I}function k1(h,_,C){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new tt(new Uu({eb:C})):new tt(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function P1(){}n=P1.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function bn(h,_){ct.call(this),this.g=new v1(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!w(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!w(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ho(this)}m(bn,ct),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Hp(this.g)},bn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Ip(h),h=C);_.i.push(new MI(_.Ya++,h)),_.G==3&&$u(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,Hp(this.g),delete this.g,bn.aa.N.call(this)};function O1(h){Dp.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const C in _){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}m(O1,Dp);function A1(){Np.call(this),this.status=1}m(A1,Np);function Ho(h){this.g=h}m(Ho,P1),Ho.prototype.ua=function(){wt(this.g,"a")},Ho.prototype.ta=function(h){wt(this.g,new O1(h))},Ho.prototype.sa=function(h){wt(this.g,new A1)},Ho.prototype.ra=function(){wt(this.g,"b")},bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,jp.NO_ERROR=0,jp.TIMEOUT=8,jp.HTTP_ERROR=6,DI.COMPLETE="complete",PI.EventType=Al,Al.OPEN="a",Al.CLOSE="b",Al.ERROR="c",Al.MESSAGE="d",ct.prototype.listen=ct.prototype.K,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const tb="@firebase/firestore",nb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Ry("@firebase/firestore");function sr(n,...e){if(nl.logLevel<=De.DEBUG){const t=e.map(Gy);nl.debug(`Firestore (${Tu}): ${n}`,...t)}}function Tk(n,...e){if(nl.logLevel<=De.ERROR){const t=e.map(Gy);nl.error(`Firestore (${Tu}): ${n}`,...t)}}function N9(n,...e){if(nl.logLevel<=De.WARN){const t=e.map(Gy);nl.warn(`Firestore (${Tu}): ${n}`,...t)}}function Gy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Ek(n,r,t)}function Ek(n,e,t){let r=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tk(r),new Error(r)}function bc(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Ek(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}}class j9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class L9{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bc(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Sc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sc,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{sr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(sr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(sr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bc(typeof r.accessToken=="string",31837,{l:r}),new kk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bc(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class F9{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U9{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new F9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bc(this.o===void 0,3512);const r=i=>{i.error!=null&&sr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,sr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{sr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):sr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bc(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=z9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function Ai(n,e){return n<e?-1:n>e?1:0}function $9(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Fg(s)===Fg(i)?Ai(s,i):Fg(s)?1:-1}return Ai(n.length,e.length)}const W9=55296,H9=57343;function Fg(n){const e=n.charCodeAt(0);return e>=W9&&e<=H9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="__name__";class yr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Jc(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Jc(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=yr.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return Ai(e.length,t.length)}static compareSegments(e,t){const r=yr.isNumericId(e),s=yr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?yr.extractNumericId(e).compare(yr.extractNumericId(t)):$9(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hy.fromString(e.substring(4,e.length-2))}}class Qn extends yr{construct(e,t,r){return new Qn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Qn(t)}static emptyPath(){return new Qn([])}}const G9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends yr{construct(e,t,r){return new Gi(e,t,r)}static isValidIdentifier(e){return G9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sb}static keyField(){return new Gi([sb])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Oe(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Oe(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Oe(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Oe(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gi(t)}static emptyPath(){return new Gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.path=e}static fromPath(e){return new Zi(Qn.fromString(e))}static fromName(e){return new Zi(Qn.fromString(e).popFirst(5))}static empty(){return new Zi(Qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zi(new Qn(e.slice()))}}function X9(n,e,t,r){if(e===!0&&r===!0)throw new Oe(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y9(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function K9(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Jc(12329,{type:typeof n})}function q9(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=K9(n);throw new Oe(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(n,e){const t={typeString:n};return e&&(t.value=e),t}function Eu(n,e){if(!Y9(n))throw new Oe(Pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new Oe(Pe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=-62135596800,ob=1e6;class Sr{static now(){return Sr.fromMillis(Date.now())}static fromDate(e){return Sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ob);return new Sr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ib)throw new Oe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ob}_compareTo(e){return this.seconds===e.seconds?Ai(this.nanoseconds,e.nanoseconds):Ai(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Sr._jsonSchema))return new Sr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Sr._jsonSchemaVersion="firestore/timestamp/1.0",Sr._jsonSchema={type:at("string",Sr._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};function Q9(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new J9("Invalid base64 string: "+i):i}}(e);return new Po(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Po(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ai(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Po.EMPTY_BYTE_STRING=new Po("");const N0="(default)";class uf{constructor(e,t){this.projectId=e,this.database=t||N0}static empty(){return new uf("","")}get isDefaultDatabase(){return this.database===N0}isEqual(e){return e instanceof uf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eU(n){return new Z9(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ab,ke;(ke=ab||(ab={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Hy([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=1048576;function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&sr("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Sc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new Xy(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var lb,cb;(cb=lb||(lb={})).Ma="default",cb.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="firestore.googleapis.com",hb=!0;class db{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pk,this.ssl=hb}else this.host=e.host,this.ssl=e.ssl??hb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nU)throw new Oe(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Oe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Oe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Oe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ok{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new db({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new db(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new M9;switch(r.type){case"firstParty":return new U9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ub.get(t);r&&(sr("ComponentProvider","Removing Datastore"),ub.delete(t),r.terminate())}(this),Promise.resolve()}}function iU(n,e,t,r={}){var c;n=q9(n,Ok);const s=ml(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;s&&(Ay(`https://${a}`),Iy("Firestore",!0)),i.host!==Pk&&i.host!==a&&N9("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!To(l,o)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=Bt.MOCK_USER;else{u=LE(r.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Oe(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Bt(d)}n._authCredentials=new j9(new kk(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yy(this.firestore,e,this._query)}}class Or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ky(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Or(this.firestore,e,this._key)}toJSON(){return{type:Or._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Eu(t,Or._jsonSchema))return new Or(e,r||null,new Zi(Qn.fromString(t.referencePath)))}}Or._jsonSchemaVersion="firestore/documentReference/1.0",Or._jsonSchema={type:at("string",Or._jsonSchemaVersion),referencePath:at("string")};class Ky extends Yy{constructor(e,t,r){super(e,t,eU(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new Zi(e))}withConverter(e){return new Ky(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="AsyncQueue";class pb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rU(this,"async_queue_retry"),this._c=()=>{const r=Ug();r&&sr(fb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Sc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Q9(e))throw e;sr(fb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tk("INTERNAL UNHANDLED ERROR: ",gb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Xy.createAndSchedule(this,e,t,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Jc(47125,{Pc:gb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class oU extends Ok{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new pb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pb(e),this._firestoreClient=void 0,await e}}}function aU(n,e){const t=typeof n=="object"?n:Ny(),r=typeof n=="string"?n:N0,s=ip(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=NE("firestore");i&&iU(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(Po.fromBase64String(e))}catch(t){throw new Oe(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rs(Po.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,rs._jsonSchema))return rs.fromBase64String(e.bytes)}}rs._jsonSchemaVersion="firestore/bytes/1.0",rs._jsonSchema={type:at("string",rs._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Oe(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ai(this._lat,e._lat)||Ai(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:po._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,po._jsonSchema))return new po(e.latitude,e.longitude)}}po._jsonSchemaVersion="firestore/geoPoint/1.0",po._jsonSchema={type:at("string",po._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:go._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,go._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new go(e.vectorValues);throw new Oe(Pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}go._jsonSchemaVersion="firestore/vectorValue/1.0",go._jsonSchema={type:at("string",go._jsonSchemaVersion),vectorValues:at("object")};const lU=new RegExp("[~\\*/\\[\\]]");function cU(n,e,t){if(e.search(lU)>=0)throw mb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new Ak(...e.split("."))._internalPath}catch{throw mb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function mb(n,e,t,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new Oe(Pe.INVALID_ARGUMENT,i+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rk("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uU extends Ik{data(){return super.data()}}function Rk(n,e){return typeof e=="string"?cU(n,e):e instanceof Ak?e._internalPath:e._delegate._internalPath}class yh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends Ik{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:at("string",ka._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class pd extends ka{data(e={}){return super.data(e)}}class Cc{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new yh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pd(this._firestore,this._userDataWriter,r.key,r,new yh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new pd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new yh(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new pd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new yh(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:hU(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=V9.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jc(61501,{type:n})}}Cc._jsonSchemaVersion="firestore/querySnapshot/1.0",Cc._jsonSchema={type:at("string",Cc._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};(function(e,t=!0){(function(s){Tu=s})(jo),Eo(new Oi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new oU(new L9(r.getProvider("auth-internal")),new B9(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Oe(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uf(c.options.projectId,u)}(o,s),o);return i={useFetchStreams:t,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Nr(tb,nb,e),Nr(tb,nb,"esm2020")})();const dU={apiKey:"GOOGLE_API_KEY",authDomain:"rug-canva.firebaseapp.com",projectId:"rug-canva",storageBucket:"rug-canva.firebasestorage.app",messagingSenderId:"1073321820843",appId:"1:1073321820843:web:140d257f1363a98f28edee",measurementId:"G-CLPET2C66J"},qy=BE(dU),Jl=t9(qy);A9(qy);aU(qy);new Er;const Dk=y.createContext(void 0);function fU({children:n}){const[e,t]=y.useState(null),[r,s]=y.useState(!0);y.useEffect(()=>{const a=VF(Jl,l=>{t(l),s(!1)});return v6(Jl).then(l=>{l!=null&&l.user&&t(l.user)}).catch(l=>{console.error("Auth redirect error:",l)}),a},[]);const i=async()=>{const a=new Er;try{await c6(Jl,a)}catch(l){if(l.code==="auth/popup-blocked")await g6(Jl,a);else throw l}},o=async()=>{await $F(Jl)};return p.jsx(Dk.Provider,{value:{user:e,loading:r,signIn:i,signOut:o},children:n})}function pU(){const n=y.useContext(Dk);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}const gU=Jf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ye=y.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?WM:"button";return p.jsx(o,{className:we(gU({variant:e,size:t,className:n})),ref:i,...s})});ye.displayName="Button";function mU({className:n="",color:e="#3b82f6",size:t=20,duration:r=600}){const s=y.useRef(null),i=y.useRef([]);return y.useEffect(()=>{const o=s.current;if(!o)return;const a=o.getContext("2d");if(!a)return;const l=()=>{o.width=window.innerWidth,o.height=window.innerHeight};l(),window.addEventListener("resize",l);const c=d=>{const g=o.getBoundingClientRect(),m=d.clientX-g.left,v=d.clientY-g.top;for(let b=0;b<6;b++)i.current.push({x:m,y:v,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4,life:r,maxLife:r,size:Math.random()*t+2})},u=d=>{const g=o.getBoundingClientRect(),m=d.clientX-g.left,v=d.clientY-g.top;for(let b=0;b<15;b++)i.current.push({x:m,y:v,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,life:r*1.5,maxLife:r*1.5,size:Math.random()*t+4})},f=()=>{a.clearRect(0,0,o.width,o.height),i.current=i.current.filter(d=>{if(d.x+=d.vx,d.y+=d.vy,d.life--,d.vy+=.1,d.vx*=.99,d.vy*=.99,d.life<=0)return!1;const g=d.life/d.maxLife,m=d.size*g;return a.save(),a.globalAlpha=g*.7,a.fillStyle=e,a.beginPath(),a.arc(d.x,d.y,m,0,Math.PI*2),a.fill(),a.restore(),!0}),requestAnimationFrame(f)};return o.addEventListener("mousemove",c),o.addEventListener("click",u),f(),()=>{window.removeEventListener("resize",l),o.removeEventListener("mousemove",c),o.removeEventListener("click",u)}},[e,t,r]),p.jsx("canvas",{ref:s,className:`fixed inset-0 pointer-events-none z-10 ${n}`,style:{mixBlendMode:"multiply",opacity:.6}})}const Zn=y.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:we("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Zn.displayName="Card";const cs=y.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:we("flex flex-col space-y-1.5 p-6",n),...e}));cs.displayName="CardHeader";const ui=y.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:we("text-2xl font-semibold leading-none tracking-tight",n),...e}));ui.displayName="CardTitle";const vU=y.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:we("text-sm text-muted-foreground",n),...e}));vU.displayName="CardDescription";const er=y.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:we("p-6 pt-0",n),...e}));er.displayName="CardContent";const yU=y.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:we("flex items-center p-6 pt-0",n),...e}));yU.displayName="CardFooter";function Nk(){const{user:n,signIn:e,signOut:t}=pU(),[r,s]=y.useState(!1),{toast:i}=ul(),o=async()=>{s(!0);try{await e(),i({title:"Signed In",description:"Welcome to DesignStudio Pro!"})}catch(l){i({variant:"destructive",title:"Sign In Failed",description:l.message||"Failed to sign in. Please try again."})}finally{s(!1)}},a=async()=>{s(!0);try{await t(),i({title:"Signed Out",description:"You have been signed out successfully."})}catch(l){i({variant:"destructive",title:"Sign Out Failed",description:l.message||"Failed to sign out. Please try again."})}finally{s(!1)}};return n?p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-400 to-blue-500 rounded-full flex items-center justify-center",children:n.photoURL?p.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-full h-full rounded-full"}):p.jsx(l4,{className:"h-4 w-4 text-white"})}),p.jsx("span",{className:"text-slate-700 dark:text-slate-300 max-w-24 truncate",children:n.displayName||n.email})]}),p.jsx(ye,{variant:"ghost",size:"sm",onClick:a,disabled:r,"data-testid":"button-sign-out",children:r?p.jsx(wi,{className:"h-4 w-4 animate-spin"}):p.jsx(qj,{className:"h-4 w-4"})})]}):p.jsxs(ye,{variant:"outline",size:"sm",onClick:o,disabled:r,"data-testid":"button-sign-in",children:[r?p.jsx(wi,{className:"h-4 w-4 mr-2 animate-spin"}):p.jsx(Kj,{className:"h-4 w-4 mr-2"}),"Sign In with Google"]})}function xU(){const[n]=y.useState("demo-user-id"),{data:e=[],isLoading:t}=DM({queryKey:["/api/designs",{userId:n}]});return t?p.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsxs("div",{className:"animate-pulse",children:[p.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-64 mb-6"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((r,s)=>p.jsx("div",{className:"h-48 bg-slate-200 dark:bg-slate-700 rounded"},s))})]})})}):p.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 relative","data-testid":"home-page",children:[p.jsx(mU,{color:"#3b82f6",size:15,duration:800}),p.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:p.jsx("div",{className:"container mx-auto px-4 py-6",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-purple-700 rounded-lg flex items-center justify-center",children:p.jsx(An,{className:"h-5 w-5 text-white"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"DesignStudio Pro"}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Professional Pattern Design Tool"})]})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Nk,{}),p.jsx(Tr,{href:"/studio",children:p.jsxs(ye,{className:"bg-primary hover:bg-primary/90","data-testid":"button-new-project",children:[p.jsx(ld,{className:"h-4 w-4 mr-2"}),"New Project"]})})]})]})})}),p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsx(Zn,{className:"hover:shadow-lg transition-shadow cursor-pointer","data-testid":"card-new-design",children:p.jsxs(Tr,{href:"/studio",children:[p.jsx(cs,{className:"pb-3",children:p.jsxs(ui,{className:"flex items-center text-lg",children:[p.jsx(ld,{className:"h-5 w-5 mr-2 text-primary"}),"Create New Design"]})}),p.jsx(er,{children:p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Start with a blank canvas and create your masterpiece"})})]})}),p.jsx(Zn,{className:"hover:shadow-lg transition-shadow cursor-pointer","data-testid":"card-templates",children:p.jsxs(Tr,{href:"/studio",children:[p.jsx(cs,{className:"pb-3",children:p.jsxs(ui,{className:"flex items-center text-lg",children:[p.jsx(WT,{className:"h-5 w-5 mr-2 text-emerald-500"}),"Browse Templates"]})}),p.jsx(er,{children:p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Choose from our collection of pre-made templates"})})]})}),p.jsx(Zn,{className:"hover:shadow-lg transition-shadow cursor-pointer","data-testid":"card-ai-generator",children:p.jsxs(Tr,{href:"/studio",children:[p.jsx(cs,{className:"pb-3",children:p.jsxs(ui,{className:"flex items-center text-lg",children:[p.jsx(An,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Pattern Generator"]})}),p.jsx(er,{children:p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Generate unique patterns using AI technology"})})]})})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Recent Designs"}),p.jsx(ye,{variant:"ghost",size:"sm","data-testid":"button-view-all",children:"View All"})]}),e.length===0?p.jsx(Zn,{className:"py-12","data-testid":"empty-state",children:p.jsxs(er,{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(An,{className:"h-8 w-8 text-slate-400"})}),p.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-2",children:"No designs yet"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Create your first design to get started"}),p.jsx(Tr,{href:"/studio",children:p.jsxs(ye,{"data-testid":"button-create-first",children:[p.jsx(ld,{className:"h-4 w-4 mr-2"}),"Create Your First Design"]})})]})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.slice(0,6).map(r=>p.jsxs(Zn,{className:"hover:shadow-lg transition-shadow cursor-pointer","data-testid":`design-card-${r.id}`,children:[p.jsx(cs,{className:"p-0",children:p.jsx("div",{className:"aspect-video bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 rounded-t-lg flex items-center justify-center",children:r.thumbnail?p.jsx("img",{src:r.thumbnail,alt:r.title,className:"w-full h-full object-cover rounded-t-lg"}):p.jsx(An,{className:"h-8 w-8 text-slate-400"})})}),p.jsxs(er,{className:"p-4",children:[p.jsx("h3",{className:"font-medium text-slate-900 dark:text-slate-100 mb-1","data-testid":`design-title-${r.id}`,children:r.title}),p.jsxs("div",{className:"flex items-center text-xs text-slate-500 dark:text-slate-400",children:[p.jsx(zj,{className:"h-3 w-3 mr-1"}),r.updatedAt?new Date(r.updatedAt).toLocaleDateString():"No date"]})]})]},r.id))})]})]})]})}const wU=Jf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function mr({className:n,variant:e,...t}){return p.jsx("div",{className:we(wU({variant:e}),n),...t})}const _U=({angle:n=65,cellSize:e=60,opacity:t=.5,lightLineColor:r="gray",darkLineColor:s="gray"})=>{const i={"--grid-angle":`${n}deg`,"--cell-size":`${e}px`,"--opacity":t,"--light-line":r,"--dark-line":s};return p.jsxs("div",{className:we("pointer-events-none absolute size-full overflow-hidden [perspective:200px]","opacity-[var(--opacity)]"),style:i,children:[p.jsx("div",{className:"absolute inset-0 [transform:rotateX(var(--grid-angle))]",children:p.jsx("div",{className:"animate-grid [background-image:linear-gradient(to_right,var(--light-line)_1px,transparent_0),linear-gradient(to_bottom,var(--light-line)_1px,transparent_0)] [background-repeat:repeat] [background-size:var(--cell-size)_var(--cell-size)] [height:300vh] [inset:0%_0px] [margin-left:-200%] [transform-origin:100%_0_0] [width:600vw] dark:[background-image:linear-gradient(to_right,var(--dark-line)_1px,transparent_0),linear-gradient(to_bottom,var(--dark-line)_1px,transparent_0)]"})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white to-transparent to-90% dark:from-black"})]})},Mk=y.forwardRef(({className:n,title:e="Build products for everyone",subtitle:t={regular:"Designing your projects faster with ",gradient:"the largest figma UI kit."},description:r="Sed ut perspiciatis unde omnis iste natus voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae.",ctaText:s="Browse courses",ctaHref:i="#",bottomImage:o={light:"https://farmui.vercel.app/dashboard-light.png",dark:"https://farmui.vercel.app/dashboard.png"},gridOptions:a,...l},c)=>p.jsxs("div",{className:we("relative",n),ref:c,...l,children:[p.jsx("div",{className:"absolute top-0 z-[0] h-screen w-screen bg-purple-950/10 dark:bg-purple-950/10 bg-[radial-gradient(ellipse_20%_80%_at_50%_-20%,rgba(120,119,198,0.15),rgba(255,255,255,0))] dark:bg-[radial-gradient(ellipse_20%_80%_at_50%_-20%,rgba(120,119,198,0.3),rgba(255,255,255,0))]"}),p.jsxs("section",{className:"relative max-w-full mx-auto z-1",children:[p.jsx(_U,{...a}),p.jsxs("div",{className:"max-w-screen-xl z-10 mx-auto px-4 py-28 gap-12 md:px-8",children:[p.jsxs("div",{className:"space-y-5 max-w-3xl leading-0 lg:leading-5 mx-auto text-center",children:[p.jsxs("h1",{className:"text-sm text-gray-600 dark:text-gray-400 group font-geist mx-auto px-5 py-2 bg-gradient-to-tr from-zinc-300/20 via-gray-400/20 to-transparent dark:from-zinc-300/5 dark:via-gray-400/5 border-[2px] border-black/5 dark:border-white/5 rounded-3xl w-fit",children:[e,p.jsx(Zf,{className:"inline w-4 h-4 ml-2 group-hover:translate-x-1 duration-300"})]}),p.jsxs("h2",{className:"text-4xl tracking-tighter font-geist bg-clip-text text-transparent mx-auto md:text-6xl bg-[linear-gradient(180deg,_#000_0%,_rgba(0,_0,_0,_0.75)_100%)] dark:bg-[linear-gradient(180deg,_#FFF_0%,_rgba(255,_255,_255,_0.00)_202.08%)]",children:[t.regular,p.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-500 dark:from-purple-300 dark:to-orange-200",children:t.gradient})]}),p.jsx("p",{className:"max-w-2xl mx-auto text-gray-600 dark:text-gray-300",children:r}),p.jsx("div",{className:"items-center justify-center gap-x-3 space-y-3 sm:flex sm:space-y-0",children:p.jsxs("span",{className:"relative inline-block overflow-hidden rounded-full p-[1.5px]",children:[p.jsx("span",{className:"absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E2CBFF_0%,#393BB2_50%,#E2CBFF_100%)]"}),p.jsx("div",{className:"inline-flex h-full w-full cursor-pointer items-center justify-center rounded-full bg-white dark:bg-gray-950 text-xs font-medium backdrop-blur-3xl",children:p.jsx("a",{href:i,className:"inline-flex rounded-full text-center group items-center w-full justify-center bg-gradient-to-tr from-zinc-300/20 via-purple-400/30 to-transparent dark:from-zinc-300/5 dark:via-purple-400/20 text-gray-900 dark:text-white border-input border-[1px] hover:bg-gradient-to-tr hover:from-zinc-300/30 hover:via-purple-400/40 hover:to-transparent dark:hover:from-zinc-300/10 dark:hover:via-purple-400/30 transition-all sm:w-auto py-4 px-10",children:s})})]})})]}),o&&p.jsxs("div",{className:"mt-32 mx-10 relative z-10",children:[p.jsx("img",{src:o.light,className:"w-full shadow-lg rounded-lg border border-gray-200 dark:hidden",alt:"Dashboard preview"}),p.jsx("img",{src:o.dark,className:"hidden w-full shadow-lg rounded-lg border border-gray-800 dark:block",alt:"Dashboard preview"})]})]})]})]}));Mk.displayName="HeroSection";function bU(){const[n,e]=y.useState(!1),[t,r]=y.useState(!1),[s,i]=y.useState(!1),o=y.useRef(null);y.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&e(!1)};return n&&(document.addEventListener("mousedown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",c),document.body.style.overflow="unset"}},[n]);const a=async()=>{i(!0);try{await new Promise(c=>setTimeout(c,1500)),console.log("Google sign-in demo completed"),e(!1)}catch(c){console.error("Google sign-in error:",c)}finally{i(!1)}},l=()=>{e(!1),r(!1)};return p.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[p.jsx(Mk,{title:" AI-Powered Rug Design Studio",subtitle:{regular:"Transform your ideas into beautiful ",gradient:"rug designs with AI"},description:"Professional vectorization, color extraction, and AI pattern generation tools for designers and creators.",ctaText:"Start Designing Free",ctaHref:"/home",bottomImage:{light:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?auto=format&fit=crop&w=1200&q=80",dark:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?auto=format&fit=crop&w=1200&q=80&brightness=0.7"},gridOptions:{angle:65,opacity:.3,cellSize:50,lightLineColor:"#9333ea",darkLineColor:"#7c3aed"}}),p.jsx("header",{className:"relative z-20 border-b border-white/20 backdrop-blur-md bg-white/10 dark:bg-slate-900/20",children:p.jsx("div",{className:"container mx-auto px-4 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center",children:p.jsx(An,{className:"h-5 w-5 text-white"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"RugStudio Pro"}),p.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"AI-Powered Design Platform"})]})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(ye,{variant:"ghost",onClick:()=>e(!0),className:"text-slate-700 dark:text-slate-300 hover:bg-white/20",children:"Sign In"}),p.jsxs(ye,{onClick:()=>{r(!0),e(!0)},className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white",children:["Get Started",p.jsx(x0,{className:"h-4 w-4 ml-2"})]})]})]})})}),p.jsxs("main",{className:"relative z-10",children:[p.jsx("section",{className:"container mx-auto px-4 py-20 text-center",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx(mr,{className:"mb-6 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:" New: AI Pattern Generation"}),p.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-slate-900 dark:text-white mb-6 leading-tight",children:["Design Beautiful",p.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-purple-700 bg-clip-text text-transparent",children:[" ","Rugs"," "]}),"with AI"]}),p.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300 mb-10 max-w-2xl mx-auto leading-relaxed",children:"Transform your ideas into stunning rug designs with our professional AI-powered vectorization, color extraction, and pattern generation tools."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[p.jsxs(ye,{size:"lg",onClick:()=>{r(!0),e(!0)},className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-8 py-4 text-lg",children:[p.jsx(Yd,{className:"h-5 w-5 mr-2"}),"Start Creating Free"]}),p.jsx(Tr,{href:"/studio",children:p.jsxs(ye,{size:"lg",variant:"outline",className:"border-slate-300 dark:border-slate-600 px-8 py-4 text-lg backdrop-blur-sm bg-white/50 dark:bg-slate-800/50",children:[p.jsx(fo,{className:"h-5 w-5 mr-2"}),"Try Demo"]})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-2xl mx-auto",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"10K+"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Designs Created"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"50+"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"AI Models"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"99.9%"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Uptime"})]})]})]})}),p.jsxs("section",{className:"container mx-auto px-4 py-20",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4",children:"Professional Tools for Every Designer"}),p.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300 max-w-2xl mx-auto",children:"Everything you need to create, edit, and perfect your rug designs"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsxs(Zn,{className:"backdrop-blur-sm bg-white/80 dark:bg-slate-800/80 border-white/20 hover:shadow-xl transition-all duration-300",children:[p.jsxs(cs,{children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mb-4",children:p.jsx(fo,{className:"h-6 w-6 text-white"})}),p.jsx(ui,{className:"text-xl",children:"Auto Vectorization"})]}),p.jsxs(er,{children:[p.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"Convert any image to editable vectors with smart color extraction and shape detection."}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx(mr,{variant:"secondary",children:"JPG/PNG Support"}),p.jsx(mr,{variant:"secondary",children:"3-10 Colors"}),p.jsx(mr,{variant:"secondary",children:"Shape Masking"})]})]})]}),p.jsxs(Zn,{className:"backdrop-blur-sm bg-white/80 dark:bg-slate-800/80 border-white/20 hover:shadow-xl transition-all duration-300",children:[p.jsxs(cs,{children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center mb-4",children:p.jsx(w0,{className:"h-6 w-6 text-white"})}),p.jsx(ui,{className:"text-xl",children:"AI Pattern Generation"})]}),p.jsxs(er,{children:[p.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"Generate unique patterns from text descriptions using advanced AI models."}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx(mr,{variant:"secondary",children:"Text to Pattern"}),p.jsx(mr,{variant:"secondary",children:"Style Control"}),p.jsx(mr,{variant:"secondary",children:"Instant Preview"})]})]})]}),p.jsxs(Zn,{className:"backdrop-blur-sm bg-white/80 dark:bg-slate-800/80 border-white/20 hover:shadow-xl transition-all duration-300",children:[p.jsxs(cs,{children:[p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center mb-4",children:p.jsx(An,{className:"h-6 w-6 text-white"})}),p.jsx(ui,{className:"text-xl",children:"Advanced Color Tools"})]}),p.jsxs(er,{children:[p.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"Professional color management with palettes, replacement, and optimization."}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx(mr,{variant:"secondary",children:"Color Palettes"}),p.jsx(mr,{variant:"secondary",children:"Smart Replace"}),p.jsx(mr,{variant:"secondary",children:"Undo/Redo"})]})]})]})]})]}),p.jsxs("section",{className:"container mx-auto px-4 py-20",children:[p.jsx("div",{className:"text-center mb-16",children:p.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-4",children:"Trusted by Designers Worldwide"})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 text-center",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx(c4,{className:"h-8 w-8 text-purple-600 mb-2"}),p.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"5000+"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Active Users"})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx(i4,{className:"h-8 w-8 text-yellow-500 mb-2"}),p.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"4.9/5"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"User Rating"})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx(Gj,{className:"h-8 w-8 text-emerald-600 mb-2"}),p.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"50+"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Countries"})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx(r4,{className:"h-8 w-8 text-purple-600 mb-2"}),p.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"100%"}),p.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Secure"})]})]})]})]}),n&&p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsxs(Zn,{ref:o,className:"w-full max-w-md mx-4 backdrop-blur-md bg-white/95 dark:bg-slate-800/95 relative",children:[p.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors z-10",children:p.jsx(yu,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"})}),p.jsxs(cs,{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center mx-auto mb-4",children:p.jsx(An,{className:"h-8 w-8 text-white"})}),p.jsx(ui,{className:"text-2xl",children:"Welcome to RugStudio Pro"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Sign in with Google to start designing beautiful rugs"})]}),p.jsxs(er,{className:"space-y-4",children:[p.jsxs(ye,{onClick:a,disabled:s,className:"w-full bg-white dark:bg-slate-700 text-slate-900 dark:text-white border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600 h-12 transition-all duration-200 hover:scale-[1.02]","data-testid":"button-google-signin",children:[s?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-slate-900 dark:border-white mr-3"}):p.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Signing in...":"Continue with Google"]}),p.jsx(Tr,{to:"/home",children:p.jsxs(ye,{variant:"outline",className:"w-full border-2 border-dashed border-slate-300 dark:border-slate-600 hover:border-purple-400 dark:hover:border-purple-500 transition-all duration-200","data-testid":"button-demo-access",children:[p.jsx(w0,{className:"h-4 w-4 mr-2"}),"Try Demo (No Sign-up Required)"]})}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-slate-300 dark:border-slate-600"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-white dark:bg-slate-800 px-2 text-slate-500 dark:text-slate-400",children:"Demo Mode"})})]}),p.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:p.jsxs("div",{className:"flex items-start space-x-2",children:[p.jsx(fy,{className:"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:[p.jsx("strong",{children:"Try all features for free:"}),p.jsxs("ul",{className:"mt-1 space-y-1 text-xs",children:[p.jsx("li",{children:" Auto-vectorization with shape detection"}),p.jsx("li",{children:" AI pattern generation"}),p.jsx("li",{children:" Advanced color manipulation tools"}),p.jsx("li",{children:" Export in multiple formats"})]})]})]})}),p.jsx("div",{className:"text-center",children:p.jsx(Tr,{href:"/studio",children:p.jsxs(ye,{variant:"ghost",onClick:l,className:"text-slate-600 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",children:["Continue as Guest",p.jsx(x0,{className:"h-4 w-4 ml-2"})]})})}),p.jsx("p",{className:"text-xs text-center text-slate-500 dark:text-slate-400",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})]})})]})}function F(n,e,t){return(e=function(r){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function L(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vb(Object(t),!0).forEach(function(r){F(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xe(n,e){if(n==null)return{};var t,r,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function Wr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class yb{constructor(){F(this,"browserShadowBlurConstant",1),F(this,"DPI",96),F(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),F(this,"perfLimitSizeTotal",2097152),F(this,"maxCacheSideLimit",4096),F(this,"minCacheSideLimit",256),F(this,"disableStyleCopyPaste",!1),F(this,"enableGLFiltering",!0),F(this,"textureSize",4096),F(this,"forceGLPutImageData",!1),F(this,"cachesBoundsOfCurve",!1),F(this,"fontPaths",{}),F(this,"NUM_FRACTION_DIGITS",4)}}const Ie=new class extends yb{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=L(L({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new yb,t=(n==null?void 0:n.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},Ts=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class Ar extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class jk extends Ar{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class SU{}class CU extends SU{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),Ts("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const TU={};let xb;const Ur=()=>xb||(xb={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new CU,dispose(){},copyPasteData:TU}),xl=()=>Ur().document,ku=()=>Ur().window,Lk=()=>{var n;return Math.max((n=Ie.devicePixelRatio)!==null&&n!==void 0?n:ku().devicePixelRatio,1)},Tc=new class{constructor(){F(this,"charWidthsCache",{}),F(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=Ie,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},M0="6.7.1";function gd(){}const Pu=Math.PI/2,hf=2*Math.PI,Qy=Math.PI/180,Gt=Object.freeze([1,0,0,1,0,0]),Jy=16,zs=.4477152502,xe="center",Ne="left",ln="top",j0="bottom",nt="right",$t="none",Zy=/\r?\n/,Fk="moving",cp="scaling",Uk="rotating",ex="rotate",Bk="skewing",Zc="resizing",EU="modifyPoly",kU="modifyPath",df="changed",up="scale",Xt="scaleX",xn="scaleY",wl="skewX",_l="skewY",lt="fill",Wt="stroke",ff="modified",Yo="json",Bg="svg",ce=new class{constructor(){this[Yo]=new Map,this[Bg]=new Map}has(n){return this[Yo].has(n)}getClass(n){const e=this[Yo].get(n);if(!e)throw new Ar("No class registered for ".concat(n));return e}setClass(n,e){e?this[Yo].set(e,n):(this[Yo].set(n.type,n),this[Yo].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[Bg].get(n)}setSVGClass(n,e){this[Bg].set(e??n.type.toLowerCase(),n)}},pf=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class PU{constructor(){F(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,i]=r;this.on(s,i)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[i,o]=s;r.push(this.once(i,o))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,i]=r;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const Zo=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Es=n=>{if(n===0)return 1;switch(Math.abs(n)/Pu){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},ks=n=>{if(n===0)return 0;const e=n/Pu,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class z{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new z(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new z(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new z(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new z(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new z(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new z(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new z(this.x/e.x,this.y/e.y)}scalarDivide(e){return new z(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new z(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new z(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new z(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new z(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tx;const r=ks(e),s=Es(e),i=this.subtract(t);return new z(i.x*s-i.y*r,i.x*r+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new z(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const tx=new z(0,0),md=n=>!!n&&Array.isArray(n._objects);function zk(n){class e extends n{constructor(){super(...arguments),F(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(r,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(r){this.getObjects().forEach((s,i,o)=>r(s,i,o))}getObjects(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Zo(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Zo(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==0){const o=this.findNewLowerIndex(r,i,s);return Zo(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(r,i,s);return Zo(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(Zo(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(r,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(r){let{left:s,top:i,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new z(s,i),f=u.add(new z(o,a));for(let d=this._objects.length-1;d>=0;d--){const g=this._objects[d];g.selectable&&g.visible&&(l&&g.intersectsWithRect(u,f)||g.isContainedWithinRect(u,f)||l&&g.containsPoint(u)||l&&g.containsPoint(f))&&c.push(g)}return c}}return e}class Vk extends PU{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function vd(n){return ku().requestAnimationFrame(n)}function OU(n){return ku().cancelAnimationFrame(n)}let AU=0;const Ii=()=>AU++,Ps=()=>{const n=xl().createElement("canvas");if(!n||n.getContext===void 0)throw new Ar("Failed to create `canvas` element");return n},IU=()=>xl().createElement("img"),Ln=n=>{const e=Ps();return e.width=n.width,e.height=n.height,e},$k=(n,e,t)=>n.toDataURL("image/".concat(e),t),Wk=(n,e,t)=>new Promise((r,s)=>{n.toBlob(r,"image/".concat(e),t)}),st=n=>n*Qy,Os=n=>n/Qy,RU=n=>n.every((e,t)=>e===Gt[t]),Zt=(n,e,t)=>new z(n).transform(e,t),In=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:s}=new z(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},vt=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],nx=(n,e)=>n.reduceRight((t,r)=>r&&t?vt(r,t,e):r||t,void 0)||Gt.concat(),Hk=n=>{let[e,t]=n;return Math.atan2(t,e)},rl=n=>{const e=Hk(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),s=(n[0]*n[3]-n[2]*n[1])/r,i=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Os(e),scaleX:r,scaleY:s,skewX:Os(i),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Ou=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function bl(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=st(n),s=Es(r),i=ks(r);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const rx=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},Gk=n=>Math.tan(st(n)),Xk=n=>[1,0,Gk(n),1,0,0],Yk=n=>[1,Gk(n),0,1,0,0],hp=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=n,a=rx(r?-e:e,s?-t:t);return i&&(a=vt(a,Xk(i),!0)),o&&(a=vt(a,Yk(o),!0)),a},DU=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let s=Ou(e,t);r&&(s=vt(s,bl({angle:r})));const i=hp(n);return RU(i)||(s=vt(s,i)),s},yd=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new jk("loadImage"));const i=IU();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(i)};n?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Ar("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=n):a()})},eu=function(n){let{signal:e,reviver:t=gd}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(n.map(o=>ce.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(r).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},dp=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const i=Object.values(n).map(a=>a&&a.type&&ce.has(a.type)?eu([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(n);Promise.all(i).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Sl=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},sx=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Be=(n,e)=>parseFloat(Number(n).toFixed(e)),tu=n=>"matrix("+n.map(e=>Be(e,Ie.NUM_FRACTION_DIGITS)).join(" ")+")",Pn=n=>!!n&&n.toLive!==void 0,wb=n=>!!n&&typeof n.toObject=="function",_b=n=>!!n&&n.offsetX!==void 0&&"source"in n,Xi=n=>!!n&&"multiSelectionStacking"in n;function Kk(n){const e=n&&tr(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let s=n;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,r=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const tr=n=>n.ownerDocument||null,qk=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},Qk=function(n,e,t){let{width:r,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=s,i>1&&(n.setAttribute("width",(r*i).toString()),n.setAttribute("height",(s*i).toString()),e.scale(i,i))},L0=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function bb(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=$t,n}class Jk{constructor(e){F(this,"_originalCanvasStyle",void 0),F(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&xl().getElementById(e)||Ps();var r;if(t.hasAttribute("data-fabric"))throw new Ar("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;Qk(r,s,e,t)}setCSSDimensions(e){L0(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&tr(e),s={left:0,top:0};if(!r)return s;const i=((t=qk(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=Kk(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){Ur().dispose(this.lower.el),delete this.lower}}const NU={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Gt]};class Au extends zk(Vk){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Au.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Jk(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Ts("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Lk():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=L({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],i=Zt(e,In(s));s[0]=t,s[3]=t;const o=Zt(i,s);s[4]+=r.x-o.x,s[5]+=r.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new z(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new z(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=vd(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=In(this.viewportTransform),s=Zt({x:0,y:0},r),i=Zt({x:e,y:t},r),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new z(a.x,o.y),bl:new z(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(OU(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!s)return;const a=Pn(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...i),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new z(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new z(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new z(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new z(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new z(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Zt(this.getCenterPoint(),In(this.viewportTransform))}_centerObject(e,t){e.setXY(t,xe,xe),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return L(L(L({version:M0},Sl(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Pn(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),Pn(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=Ie.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(Be(-l[4]/l[0],i)," ").concat(Be(-l[5]/l[3],i)," ").concat(Be(this.width/l[0],i)," ").concat(Be(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",M0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ii()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Pn(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(i,{additionalTransform:r?tu(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Ie.fontPaths;this._objects.forEach(function i(o){e.push(o),md(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:f=""}=u;!t[f]&&r[f]&&(t[f]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(r[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Pn(r)){const s=r.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?tu(In(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!_b(r)?i:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!_b(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Ar("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([eu(i,{reviver:t,signal:r}),dp({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[g,m]=d;return this.clear(),this.add(...g),this.set(s),this.set(m),this.renderOnAddRemove=f,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Ln(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return $k(this.toCanvasElement(o,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Wk(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,f=this.height,d=this.skipControlsDrawing,g=c*e,m=this.viewportTransform,v=[g,0,0,g,(m[4]-(s||0))*e,(m[5]-(i||0))*e],b=this.enableRetinaScaling,x=Ln({width:a,height:l}),w=o?this._objects.filter(S=>o(S)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=v,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),w),this.viewportTransform=m,this.width=u,this.height=f,this.calcViewportBoundaries(),this.enableRetinaScaling=b,this.skipControlsDrawing=d,x}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),pf.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}F(Au,"ownDefaults",NU);const MU=["touchstart","touchmove","touchend"],jU=n=>{const e=Kk(n.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(n);return new z(t.clientX+e.left,t.clientY+e.top)},F0=n=>MU.includes(n.type)||n.pointerType==="touch",Sb=n=>{n.preventDefault(),n.stopPropagation()},ps=n=>{let e=0,t=0,r=0,s=0;for(let i=0,o=n.length;i<o;i++){const{x:a,y:l}=n[i];(a>r||!i)&&(r=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:r-e,height:s-t}},LU=["translateX","translateY","scaleX","scaleY"],FU=(n,e)=>gf(n,vt(e,n.calcOwnMatrix())),gf=(n,e)=>{const t=rl(e),{translateX:r,translateY:s,scaleX:i,scaleY:o}=t,a=Xe(t,LU),l=new z(r,s);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:i,scaleY:o}),n.setPositionByOrigin(l,xe,xe)},UU=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},Zk=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),ix=(n,e,t)=>{const r=n/2,s=e/2,i=[new z(-r,-s),new z(r,-s),new z(-r,s),new z(r,s)].map(a=>a.transform(t)),o=ps(i);return new z(o.width,o.height)},fp=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gt;return vt(In(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gt),n)},Pa=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gt;return n.transform(fp(e,t))},BU=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gt;return n.transform(fp(e,t),!0)},zU=(n,e,t)=>{const r=fp(e,t);return gf(n,vt(r,n.calcOwnMatrix())),r},eP=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),L(L({},e),{},{target:r})),r.fire(n,e)},VU={left:-.5,top:-.5,center:0,bottom:.5,right:.5},it=n=>typeof n=="string"?VU[n]:n-.5,mf="not-allowed";function tP(n){return it(n.originX)===it(xe)&&it(n.originY)===it(xe)}function Cb(n){return .5-it(n)}const cr=(n,e)=>n[e],nP=(n,e,t,r)=>({e:n,transform:e,pointer:new z(t,r)});function rP(n,e){const t=n.getTotalAngle()+Os(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function ox(n,e,t,r,s){var i;let{target:o,corner:a}=n;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,u=o.padding/c,f=function(d,g,m,v){const b=d.getRelativeCenterPoint(),x=m!==void 0&&v!==void 0?d.translateToGivenOrigin(b,xe,xe,m,v):new z(d.left,d.top);return(d.angle?g.rotate(-st(d.angle),b):g).subtract(x)}(o,new z(r,s),e,t);return f.x>=u&&(f.x-=u),f.x<=-u&&(f.x+=u),f.y>=u&&(f.y-=u),f.y<=u&&(f.y+=u),f.x-=l.offsetX,f.y-=l.offsetY,f}const $U=(n,e,t,r)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=r-o,c=!cr(s,"lockMovementX")&&s.left!==a,u=!cr(s,"lockMovementY")&&s.top!==l;return c&&s.set(Ne,a),u&&s.set(ln,l),(c||u)&&eP(Fk,nP(n,e,t,r)),c||u},Tb={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},zg=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Eb=(n,e,t,r)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),i=Math.min(n,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},kb=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},xh=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Pb=n=>{let[e,t,r,s=1]=n;const i=Math.round(.3*e+.59*t+.11*r);return[i,i,i,s]};class je{constructor(e){if(F(this,"isUnrecognised",!1),e)if(e instanceof je)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,i=1]=e;this.setSource([t,r,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Tb&&(e=Tb[e]),e==="transparent"?[255,255,255,0]:je.sourceFromHex(e)||je.sourceFromRgb(e)||je.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Eb(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=Eb(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(xh(e)).concat(xh(t)).concat(xh(r)).concat(xh(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Pb(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Pb(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof je||(e=new je(e));const t=this.getSource(),r=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return je.fromRgba(e)}static fromRgba(e){return new je(je.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,s,i,kb(t[4])]}}static fromHsl(e){return je.fromHsla(e)}static fromHsla(e){return new je(je.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(je.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,u=2*i-c;o=zg(u,c,r+1/3),a=zg(u,c,r),l=zg(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),kb(t[4])]}static fromHex(e){return new je(je.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=r.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Os(r):t.includes("turn")?360*r:r}}const en=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jy;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),s=Ie.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},sP=n=>{const[e,t]=n.trim().split(" "),[r,s]=(i=e)&&i!==$t?[i.slice(1,4),i.slice(5,8)]:i===$t?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},nu=function(n,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new je(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(r=o.toString())}else t="none";return s?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class iP{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):$t,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",f=e?"":this.getSvgFilter(),d=nu(lt,this.fill);return[nu(Wt,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",f,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(tu(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,f=this.stroke,d=this.fill,g=this.shadow,m=[],v=e.indexOf("COMMON_PARTS");let b;l&&(l.clipPathId="CLIPPATH_".concat(Ii()),b='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&m.push("<g ",a,this.getSvgCommons(),` >
`),m.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const x=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[v]=x,Pn(d)&&m.push(d.toSVG(this)),Pn(f)&&m.push(f.toSVG(this)),g&&m.push(g.toSVG(this)),l&&m.push(b),m.push(e.join("")),m.push(`</g>
`),u&&m.push(`</g>
`),r?r(m.join("")):m.join("")}addPaintOrder(){return this.paintFirst!==lt?' paint-order="'.concat(this.paintFirst,'" '):""}}function pp(n){return new RegExp("^("+n.join("|")+")\\b","i")}const Oo="textDecorationThickness",oP=["fontSize","fontWeight","fontFamily","fontStyle"],aP=["underline","overline","linethrough"],lP=[...oP,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],cP=[...lP,...aP,"textBackgroundColor","direction",Oo],WU=[...oP,...aP,Wt,"strokeWidth",lt,"deltaY","textBackgroundColor",Oo],HU={_reNewline:Zy,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Ne,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Ne,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Oo]:66.667},kr="justify",vf="justify-left",Ec="justify-right",kc="justify-center";var Ob,Ab,Ib;const ir=String.raw(Ob||(Ob=Wr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Vg=String.raw(Ab||(Ab=Wr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),U0="http://www.w3.org/2000/svg",GU=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ir+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ir+"))?\\s+(.*)"),XU={cx:Ne,x:Ne,r:"radius",cy:ln,y:ln,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Oo},$g="font-size",Wg="clip-path",YU=pp(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),KU=pp(["symbol","image","marker","pattern","view","svg"]),Rb=pp(["symbol","g","a","svg","clipPath","defs"]),Db=new RegExp(String.raw(Ib||(Ib=Wr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),ir,Vg,ir,Vg,ir,Vg,ir)),qU=new z(1,0),uP=new z,hP=(n,e)=>n.rotate(e),B0=(n,e)=>new z(e).subtract(n),z0=n=>n.distanceFrom(uP),V0=(n,e)=>Math.atan2(Pc(n,e),JU(n,e)),QU=n=>V0(qU,n),ax=n=>n.eq(uP)?n:n.scalarDivide(z0(n)),dP=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return ax(new z(-n.y,n.x).scalarMultiply(e?1:-1))},Pc=(n,e)=>n.x*e.y-n.y*e.x,JU=(n,e)=>n.x*e.x+n.y*e.y,Nb=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Pc(e,t),s=Pc(e,n),i=Pc(t,n);return r>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Mb="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",jb=new RegExp("(?:\\s|^)"+Mb+Mb+"("+ir+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class gs{constructor(e){const t=typeof e=="string"?gs.parseShadow(e):e;Object.assign(this,gs.ownDefaults,t),this.id=Ii()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,i=0]=(jb.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(jb,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=hP(new z(this.offsetX,this.offsetY),st(-e.angle)),r=new je(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*Be((Math.abs(t.x)+this.blur)/e.width,Ie.NUM_FRACTION_DIGITS)+20,i=100*Be((Math.abs(t.y)+this.blur)/e.height,Ie.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Be(this.blur?this.blur/2:0,Ie.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Be(t.x,Ie.NUM_FRACTION_DIGITS),'" dy="').concat(Be(t.y,Ie.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=gs.ownDefaults;return this.includeDefaultValues?e:sx(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}F(gs,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),F(gs,"type","shadow"),ce.setClass(gs,"shadow");const sl=(n,e,t)=>Math.max(n,Math.min(e,t)),ZU=[ln,Ne,Xt,xn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",wl,_l],Rs=[lt,Wt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],e8={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Ne,originY:ln,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:lt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},t8=(n,e,t,r)=>-t*Math.cos(n/r*Pu)+t+e,n8=()=>!1;class lx{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:i=0,easing:o=t8,onStart:a=gd,onChange:l=gd,onComplete:c=gd,abort:u=n8,target:f}=e;F(this,"_state","pending"),F(this,"durationProgress",0),F(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=f,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>vd(e),this.delay):vd(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:i}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),vd(this.tick)))}register(){pf.push(this)}unregister(){pf.remove(this)}abort(){this._state="aborted",this.unregister()}}const r8=["startValue","endValue"];class s8 extends lx{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(L(L({},Xe(e,r8)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const i8=["startValue","endValue"];class o8 extends lx{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(L(L({},Xe(e,i8)),{},{startValue:t,byValue:r.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const a8=["startValue","endValue","easing","onChange","onComplete","abort"],l8=(n,e,t,r)=>e+t*(1-Math.cos(n/r*Pu)),Hg=n=>n&&((e,t,r)=>n(new je(e).toRgba(),t,r));class c8 extends lx{constructor(e){let{startValue:t,endValue:r,easing:s=l8,onChange:i,onComplete:o,abort:a}=e,l=Xe(e,a8);const c=new je(t).getSource(),u=new je(r).getSource();super(L(L({},l),{},{startValue:c,byValue:u.map((f,d)=>f-c[d]),easing:s,onChange:Hg(i),onComplete:Hg(o),abort:Hg(a)}))}calculate(e){const[t,r,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,s].map(Math.round),sl(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function fP(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new o8(n):new s8(n);return e.start(),e}function u8(n){const e=new c8(n);return e.start(),e}class Ye{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const i=B0(t,r),o=B0(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new z(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,r);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-r.x,u=s.y-r.y,f=e.x-r.x,d=e.y-r.y,g=c*d-u*f,m=a*d-l*f,v=u*a-c*l;if(v!==0){const b=g/v,x=m/v;return(i||0<=b&&b<=1)&&(o||0<=x&&x<=1)?new Ye("Intersection").append(new z(e.x+b*a,e.y+b*l)):new Ye}if(g===0||m===0){const b=i||o||Ye.isPointContained(e,r,s)||Ye.isPointContained(t,r,s)||Ye.isPointContained(r,e,t)||Ye.isPointContained(s,e,t);return new Ye(b?"Coincident":void 0)}return new Ye("Parallel")}static intersectSegmentLine(e,t,r,s){return Ye.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return Ye.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Ye,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=Ye.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,r){return Ye.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Ye,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=Ye.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),r.append(a,l)):r.append(...c.points)}return i.length>0&&i.length===e.length?new Ye("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),i=t.max(r),o=new z(i.x,s.y),a=new z(s.x,i.y);return Ye.intersectPolygonPolygon(e,[s,o,i,a])}}class h8 extends Vk{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Zt(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Zt(e,In(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new z(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,r,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>Zt(a,o))}return i}intersectsWithRect(e,t){return Ye.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ye.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:i,height:o}=this.getBoundingRect();return r>=e.x&&r+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ye.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return ps(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Xt,e),this._set(xn,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Os(Hk(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Gt.concat()}calcACoords(){const e=bl({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=Ou(t,r),i=vt(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Zt({x:-a,y:-l},i),tr:Zt({x:a,y:-l},i),bl:Zt({x:-a,y:l},i),br:Zt({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,it(this.originX),it(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===r[o])?s.value:(this.group&&(t=vt(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=DU(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new z(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=L({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,i=0;this.strokeUniform&&(s=0,i=r);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new z(o*t.scaleX,a*t.scaleY):ix(o,a,hp(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,r,s,i){let o=e.x,a=e.y;const l=it(s)-it(t),c=it(i)-it(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new z(o,a)}translateToCenterPoint(e,t,r){if(t===xe&&r===xe)return e;const s=this.translateToGivenOrigin(e,t,r,xe,xe);return this.angle?s.rotate(st(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,xe,xe,t,r);return this.angle?s.rotate(st(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Zt(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new z(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Ne,ln)}}const d8=["type"],f8=["extraParam"];let Qr=class xd extends h8{static getDefaults(){return xd.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Ts("warn","Setting type has no effect",e)}constructor(e){super(),F(this,"_cacheContext",null),Object.assign(this,xd.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Ps(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=Ie.maxCacheSideLimit,i=Ie.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=Ie.perfLimitSizeTotal)return t<i&&(e.width=i),r<i&&(e.height=i),e;const o=t/r,[a,l]=Tc.limitDimsByArea(o),c=sl(i,a,s),u=sl(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||s!==e.height,u=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(c||u){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const f=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-f)+f,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new z(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=rl(this.calcTransformMatrix());return new z(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Xt&&e!==xn||(t=this._constrainScale(t)),e===Xt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof gs||(t=new gs(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Wt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const r=Ln(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=In(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Pn(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Pn(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(r==null?void 0:r.viewportTransform)||Gt,a=i*s,l=o*s,c=t.nonScaling?new z(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Ie.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Pn(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===Wt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=Ln({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new z(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ce.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Zk(this),r=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?Lk():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(w=>new Au(w,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&UU(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&zU(this,this.getViewportTransform()),this.setCoords();const c=Ps(),u=this.getBoundingRect(),f=this.shadow,d=new z;if(f){const w=f.blur,S=f.nonScaling?new z(1,1):this.getObjectScaling();d.x=2*Math.round(i(f.offsetX)+w)*i(S.x),d.y=2*Math.round(i(f.offsetY)+w)*i(S.y)}const g=u.width+d.x,m=u.height+d.y;c.width=Math.ceil(g),c.height=Math.ceil(m);const v=l(c);e.format==="jpeg"&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new z(v.width/2,v.height/2),xe,xe);const b=this.canvas;v._objects=[this],this.set("canvas",v),this.setCoords();const x=v.toCanvasElement(a||1,e);return this.set("canvas",b),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),v._objects=[],v.destroy(),x}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $k(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wk(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=xe,this.originY=xe,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=i,this.top=o,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){pf.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Ur().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[i,o]=s;return r[i]=this._animate(i,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u=L(L({},r),{},{target:this,startValue:a??s.reduce((f,d)=>f[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(f,d,g)=>{s.reduce((m,v,b)=>(b===s.length-1&&(m[v]=f),m[v]),this),l&&l(f,d,g)},onComplete:(f,d,g)=>{this.setCoords(),c&&c(f,d,g)}});return i?u8(u):fP(u)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(s===r[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...r.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=r._objects.indexOf(s),a=r._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(xd.customProperties,this.constructor.customProperties||[]);let t;const r=Ie.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:f,originY:d,width:g,height:m,strokeWidth:v,strokeLineCap:b,strokeDashOffset:x,strokeLineJoin:w,strokeUniform:S,strokeMiterLimit:k,scaleX:O,scaleY:M,angle:E,flipX:T,flipY:P,opacity:A,visible:D,backgroundColor:N,fillRule:R,paintFirst:H,globalCompositeOperation:ne,skewX:Q,skewY:oe}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const U=J=>Be(J,r),$=L(L({},Sl(this,e)),{},{type:this.constructor.type,version:M0,originX:f,originY:d,left:U(c),top:U(u),width:U(g),height:U(m),fill:wb(i)?i.toObject():i,stroke:wb(o)?o.toObject():o,strokeWidth:U(v),strokeDashArray:l&&l.concat(),strokeLineCap:b,strokeDashOffset:x,strokeLineJoin:w,strokeUniform:S,strokeMiterLimit:U(k),scaleX:U(O),scaleY:U(M),angle:U(E),flipX:T,flipY:P,opacity:U(A),shadow:a&&a.toObject(),visible:D,backgroundColor:N,fillRule:R,paintFirst:H,globalCompositeOperation:ne,skewX:U(Q),skewY:U(oe)},t?{clipPath:t}:null);return this.includeDefaultValues?$:this._removeDefaultValues($)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return sx(e,(s,i)=>{if(i===Ne||i===ln||i==="type")return!0;const o=r[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Xe(e,d8),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,i=Xe(r,f8);return dp(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};F(Qr,"stateProperties",ZU),F(Qr,"cacheProperties",Rs),F(Qr,"ownDefaults",e8),F(Qr,"type","FabricObject"),F(Qr,"colorProperties",[lt,Wt,"backgroundColor"]),F(Qr,"customProperties",[]),ce.setClass(Qr),ce.setClass(Qr,"object");const Cl=(n,e,t)=>(r,s,i,o)=>{const a=e(r,s,i,o);return a&&eP(n,L(L({},nP(r,s,i,o)),t)),a};function Tl(n){return(e,t,r,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=n(e,t,r,s);return i.setPositionByOrigin(c,t.originX,t.originY),u}}const Lb=Cl(Zc,Tl((n,e,t,r)=>{const s=ox(e,e.originX,e.originY,t,r);if(it(e.originX)===it(xe)||it(e.originX)===it(nt)&&s.x<0||it(e.originX)===it(Ne)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=tP(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function p8(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?Wt:lt,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor);let u,f=e,d=t;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,n.scale(1,o/i),d=t*i/o):o>i?(u=o,n.scale(i/o,1),f=e*o/i):u=i,n.beginPath(),n.arc(f,d,u/2,0,hf,!1),n[l](),c&&n.stroke(),n.restore()}function g8(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?Wt:lt,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor),u=i/2,f=o/2;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",n.translate(e,t);const d=s.getTotalAngle();n.rotate(st(d)),n["".concat(l,"Rect")](-u,-f,i,o),c&&n.strokeRect(-u,-f,i,o),n.restore()}class $n{constructor(e){F(this,"visible",!0),F(this,"actionName",up),F(this,"angle",0),F(this,"x",0),F(this,"y",0),F(this,"offsetX",0),F(this,"offsetY",0),F(this,"sizeX",0),F(this,"sizeY",0),F(this,"touchSizeX",0),F(this,"touchSizeY",0),F(this,"cursorStyle","crosshair"),F(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&Ye.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new z(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,i,o){const a=nx([Ou(r,s),bl({angle:e}),rx((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new z(-.5,-.5).transform(a),tr:new z(.5,-.5).transform(a),br:new z(.5,.5).transform(a),bl:new z(-.5,.5).transform(a)}}render(e,t,r,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?p8.call(this,e,t,r,s,i):g8.call(this,e,t,r,s,i)}}const m8=(n,e,t)=>t.lockRotation?mf:e.cursorStyle,v8=Cl(Uk,Tl((n,e,t,r)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(cr(s,"lockRotation"))return!1;const f=Math.atan2(o-u.y,i-u.x),d=Math.atan2(r-u.y,t-u.x);let g=Os(d-f+a);if(s.snapAngle&&s.snapAngle>0){const v=s.snapAngle,b=s.snapThreshold||v,x=Math.ceil(g/v)*v,w=Math.floor(g/v)*v;Math.abs(g-w)<b?g=w:Math.abs(g-x)<b&&(g=x)}g<0&&(g=360+g),g%=360;const m=s.angle!==g;return s.angle=g,m}));function pP(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function gP(n,e,t){const r=cr(n,"lockScalingX"),s=cr(n,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=n;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const y8=["e","se","s","sw","w","nw","n","ne","e"],oc=(n,e,t)=>{const r=pP(n,t);if(gP(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return mf;const s=rP(t,e);return"".concat(y8[s],"-resize")};function cx(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=pP(n,i);let l,c,u,f,d,g;if(gP(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=ox(e,e.originX,e.originY,t,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,g=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=g),cr(i,"lockScalingFlip")&&(e.signX!==d||e.signY!==g))return!1;if(f=i._getTransformedDimensions(),a&&!o){const b=Math.abs(l.x)+Math.abs(l.y),{original:x}=e,w=b/(Math.abs(f.x*x.scaleX/i.scaleX)+Math.abs(f.y*x.scaleY/i.scaleY));c=x.scaleX*w,u=x.scaleY*w}else c=Math.abs(l.x*i.scaleX/f.x),u=Math.abs(l.y*i.scaleY/f.y);tP(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Cb(e.originX),c*=-1,e.signX=d),e.signY!==g&&o!=="x"&&(e.originY=Cb(e.originY),u*=-1,e.signY=g)}const m=i.scaleX,v=i.scaleY;return o?(o==="x"&&i.set(Xt,c),o==="y"&&i.set(xn,u)):(!cr(i,"lockScalingX")&&i.set(Xt,c),!cr(i,"lockScalingY")&&i.set(xn,u)),m!==i.scaleX||v!==i.scaleY}const wh=Cl(cp,Tl((n,e,t,r)=>cx(n,e,t,r))),x8=Cl(cp,Tl((n,e,t,r)=>cx(n,e,t,r,{by:"x"}))),w8=Cl(cp,Tl((n,e,t,r)=>cx(n,e,t,r,{by:"y"}))),_8=["target","ex","ey","skewingSide"],Gg={x:{counterAxis:"y",scale:Xt,skew:wl,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:xn,skew:_l,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},b8=["ns","nesw","ew","nwse"],S8=(n,e,t)=>{if(e.x!==0&&cr(t,"lockSkewingY")||e.y!==0&&cr(t,"lockSkewingX"))return mf;const r=rP(t,e)%4;return"".concat(b8[r],"-resize")};function mP(n,e,t,r,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=Gg[n];if(cr(i,l))return!1;const{origin:f,flip:d}=Gg[o],g=it(t[f])*(i[d]?-1:1),m=-Math.sign(g)*(i[u]?-1:1),v=.5*-((i[c]===0&&ox(t,xe,xe,r,s)[n]>0||i[c]>0?1:-1)*m)+.5;return Cl(Bk,Tl((x,w,S,k)=>function(O,M,E){let{target:T,ex:P,ey:A,skewingSide:D}=M,N=Xe(M,_8);const{skew:R}=Gg[O],H=E.subtract(new z(P,A)).divide(new z(T.scaleX,T.scaleY))[O],ne=T[R],Q=N[R],oe=Math.tan(st(Q)),U=O==="y"?T._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:T._getTransformedDimensions({scaleX:1,scaleY:1}).y,$=2*H*D/Math.max(U,1)+oe,J=Os(Math.atan($));T.set(R,J);const ue=ne!==T[R];if(ue&&O==="y"){const{skewX:q,scaleX:re}=T,V=T._getTransformedDimensions({skewY:ne}),K=T._getTransformedDimensions(),Y=q!==0?V.x/K.x:1;Y!==1&&T.set(Xt,Y*re)}return ue}(n,w,new z(S,k))))(e,L(L({},t),{},{[a]:v,skewingSide:m}),r,s)}const C8=(n,e,t,r)=>mP("x",n,e,t,r),T8=(n,e,t,r)=>mP("y",n,e,t,r);function gp(n,e){return n[e.canvas.altActionKey]}const _h=(n,e,t)=>{const r=gp(n,t);return e.x===0?r?wl:xn:e.y===0?r?_l:Xt:""},da=(n,e,t)=>gp(n,t)?S8(0,e,t):oc(n,e,t),Fb=(n,e,t,r)=>gp(n,e.target)?T8(n,e,t,r):x8(n,e,t,r),Ub=(n,e,t,r)=>gp(n,e.target)?C8(n,e,t,r):w8(n,e,t,r),vP=()=>({ml:new $n({x:-.5,y:0,cursorStyleHandler:da,actionHandler:Fb,getActionName:_h}),mr:new $n({x:.5,y:0,cursorStyleHandler:da,actionHandler:Fb,getActionName:_h}),mb:new $n({x:0,y:.5,cursorStyleHandler:da,actionHandler:Ub,getActionName:_h}),mt:new $n({x:0,y:-.5,cursorStyleHandler:da,actionHandler:Ub,getActionName:_h}),tl:new $n({x:-.5,y:-.5,cursorStyleHandler:oc,actionHandler:wh}),tr:new $n({x:.5,y:-.5,cursorStyleHandler:oc,actionHandler:wh}),bl:new $n({x:-.5,y:.5,cursorStyleHandler:oc,actionHandler:wh}),br:new $n({x:.5,y:.5,cursorStyleHandler:oc,actionHandler:wh}),mtr:new $n({x:0,y:-.5,actionHandler:v8,cursorStyleHandler:m8,offsetY:-40,withConnection:!0,actionName:ex})}),E8=()=>({mr:new $n({x:.5,y:0,actionHandler:Lb,cursorStyleHandler:da,actionName:Zc}),ml:new $n({x:-.5,y:0,actionHandler:Lb,cursorStyleHandler:da,actionName:Zc})}),k8=()=>L(L({},vP()),E8());class ru extends Qr{static getDefaults(){return L(L({},super.getDefaults()),ru.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),ru.ownDefaults),this.setOptions(e)}static createControls(){return{controls:vP()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(up))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[i,o]=r[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Ou(t.x,t.y),s=bl({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=vt(r,s),o=vt(e,i),a=vt(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?rl(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((f,d)=>{const g=f.positionHandler(c,a,this,f);u[d]=Object.assign(g,this._calcCornerCoords(f,g))}),u}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(st(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=L({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,i=L({hasBorders:r,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=vt(o,this.calcTransformMatrix()),u=rl(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(st(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const i=ix(this.width,this.height,hp(t)),o=this.isStrokeAccountedForInDimensions()?tx:(this.strokeUniform?new z().scalarAdd(this.canvas?this.canvas.getZoom():1):new z(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=L({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function yP(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}F(ru,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Rt extends ru{}yP(Rt,[iP]),ce.setClass(Rt),ce.setClass(Rt,"object");const P8=(n,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:i}=n.getImageData(e-r,t-r,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class xP{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new z(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new z(1/this.options.scaleX,1/this.options.scaleY):new z(1,1)}createSideVector(e,t){const r=B0(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new z(e);return t.y+=t.x*Math.tan(st(this.options.skewY)),t.x+=t.y*Math.tan(st(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const O8=new z;class Oa extends xP{static getOrthogonalRotationFactor(e,t){const r=t?V0(e,t):QU(e);return Math.abs(r)<Pu?-1:1}constructor(e,t,r,s){super(s),F(this,"AB",void 0),F(this,"AC",void 0),F(this,"alpha",void 0),F(this,"bisector",void 0),this.A=new z(e),this.B=new z(t),this.C=new z(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=V0(this.AB,this.AC),this.bisector=ax(hP(this.AB.eq(O8)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=dP(s),o=Oa.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,r*o)}projectBevel(){const e=[];return(this.alpha%hf==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),i=this.options.strokeUniform?z0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return z0(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new z(Oa.getOrthogonalRotationFactor(this.bisector),Oa.getOrthogonalRotationFactor(new z(this.bisector.y,this.bisector.x)));return[new z(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new z(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{Nb(i,e,t)&&r.push(this.A.add(i))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new z(Math.tan(st(s)),Math.tan(st(i))),u=this.strokeProjectionMagnitude,f=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new z(Math.sqrt(Math.max(u**2-f**2,0)),f),g=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),m=new z(g,Math.sqrt(Math.max(u**2-g**2,0)));return[m,m.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(v=>this.applySkew(l?v.multiply(this.strokeUniformScalar):v)).forEach(v=>{Nb(v,e,t)&&r.push(this.applySkew(this.A).add(v))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%hf==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),i=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Pc(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Bb extends xP{constructor(e,t,r){super(r),this.A=new z(e),this.T=new z(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(dP(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new z(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Oa(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new z(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(ax(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const A8=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const s=n.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new z(o)),i),[new z(n[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?r.push(...new Bb(i,i,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new Oa(i,l,c,e).project()):r.push(...new Bb(i,o===0?c:l,e).project())}),r},ux=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=L({},n[t][r])})}),e},I8=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Zl;const hx=n=>{if(Zl||Zl||(Zl="Intl"in ku()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Zl){const e=Zl.segment(n);return Array.from(e).map(t=>{let{segment:r}=t;return r})}return R8(n)},R8=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=D8(n,r))!==!1&&e.push(t);return e},D8=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},dx=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},N8=(n,e)=>{const t=e.split(`
`),r=[];let s=-1,i={};n=ux(n);for(let o=0;o<t.length;o++){const a=hx(t[o]);if(n[o])for(let l=0;l<a.length;l++){s++;const c=n[o][l];c&&Object.keys(c).length>0&&(dx(i,c,!0)?r.push({start:s,end:s+1,style:c}):r[r.length-1].end++),i=c||{}}else s+=a.length,i={}}return r},M8=(n,e)=>{if(!Array.isArray(n))return ux(n);const t=e.split(Zy),r={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=hx(t[o]);for(let l=0;l<a.length;l++)s++,n[i]&&n[i].start<=s&&s<n[i].end&&(r[o]=r[o]||{},r[o][l]=L({},n[i].style),s===n[i].end-1&&i++)}return r},Mi=["display","transform",lt,"fill-opacity","fill-rule","opacity",Wt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function zb(n,e){const t=n.nodeName,r=n.getAttribute("class"),s=n.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function j8(n,e){let t=!0;const r=zb(n,e.pop());return r&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=zb(s=s.parentElement,o);return i.length===0}(n,e)),r&&t&&e.length===0}const L8=n=>{var e;return(e=XU[n])!==null&&e!==void 0?e:n},F8=new RegExp("(".concat(ir,")"),"gi"),U8=n=>n.replace(F8," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Vb,$b,Wb,Hb,Gb,Xb,Yb;const zt="(".concat(ir,")"),B8=String.raw(Vb||(Vb=Wr(["(skewX)(",")"],["(skewX)\\(","\\)"])),zt),z8=String.raw($b||($b=Wr(["(skewY)(",")"],["(skewY)\\(","\\)"])),zt),V8=String.raw(Wb||(Wb=Wr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),zt,zt,zt),$8=String.raw(Hb||(Hb=Wr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),zt,zt),W8=String.raw(Gb||(Gb=Wr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),zt,zt),H8=String.raw(Xb||(Xb=Wr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),zt,zt,zt,zt,zt,zt),fx="(?:".concat(H8,"|").concat(W8,"|").concat(V8,"|").concat($8,"|").concat(B8,"|").concat(z8,")"),G8="(?:".concat(fx,"*)"),X8=String.raw(Yb||(Yb=Wr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),G8),Y8=new RegExp(X8),K8=new RegExp(fx),q8=new RegExp(fx,"g");function yf(n){const e=[];if(!(n=U8(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!Y8.test(n))return[...Gt];for(const t of n.matchAll(q8)){const r=K8.exec(t[0]);if(!r)continue;let s=Gt;const i=r.filter(m=>!!m),[,o,...a]=i,[l,c,u,f,d,g]=a.map(m=>parseFloat(m));switch(o){case"translate":s=Ou(l,c);break;case ex:s=bl({angle:l},{x:c,y:u});break;case up:s=rx(l,c);break;case wl:s=Xk(l);break;case _l:s=Yk(l);break;case"matrix":s=[l,c,u,f,d,g]}e.push(s)}return nx(e)}function Q8(n,e,t,r){const s=Array.isArray(e);let i,o=e;if(n!==lt&&n!==Wt||e!==$t){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===$t?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?vt(t.transformMatrix,yf(e)):yf(e);else if(n==="visible")o=e!==$t&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?Ne:e==="end"?nt:xe;else if(n==="charSpacing"||n===Oo)i=en(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(lt),l=e.indexOf(Wt);o=lt,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Wt)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(en):en(e,r)}}else o="";return!s&&isNaN(i)?o:i}function J8(n,e){const t=n.match(GU);if(!t)return;const r=t[1],s=t[3],i=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=en(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function $0(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function Z8(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?$0(t,e):function(r,s){Object.entries(r).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const eB={stroke:"strokeOpacity",fill:"fillOpacity"};function Ds(n,e,t){if(!n)return{};let r,s={},i=Jy;n.parentNode&&Rb.test(n.parentNode.nodeName)&&(s=Ds(n.parentElement,e,t),s.fontSize&&(r=i=en(s.fontSize)));const o=L(L(L({},e.reduce((c,u)=>{const f=n.getAttribute(u);return f&&(c[u]=f),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={};for(const d in u)j8(c,d.split(" "))&&(f=L(L({},f),u[d]));return f}(n,t)),Z8(n));o[Wg]&&n.setAttribute(Wg,o[Wg]),o[$g]&&(r=en(o[$g],i),o[$g]="".concat(r));const a={};for(const c in o){const u=L8(c),f=Q8(u,o[c],s,r);a[u]=f}a&&a.font&&J8(a.font,a);const l=L(L({},s),a);return Rb.test(n.nodeName)?l:function(c){const u=Rt.getDefaults();return Object.entries(eB).forEach(f=>{let[d,g]=f;if(c[g]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const m=new je(c[d]);c[d]=m.setAlpha(Be(m.getAlpha()*c[g],2)).toRgba()}),c}(l)}const tB=["left","top","width","height","visible"],wP=["rx","ry"];class Jn extends Rt{static getDefaults(){return L(L({},super.getDefaults()),Jn.ownDefaults)}constructor(e){super(),Object.assign(this,Jn.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,i=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-zs*o,i,s+t,i+zs*a,s+t,i+a),e.lineTo(s+t,i+r-a),l&&e.bezierCurveTo(s+t,i+r-zs*a,s+t-zs*o,i+r,s+t-o,i+r),e.lineTo(s+o,i+r),l&&e.bezierCurveTo(s+zs*o,i+r,s,i+r-zs*a,s,i+r-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+zs*a,s+zs*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...wP,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=Ds(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,u=Xe(s,tB);return new this(L(L(L({},t),u),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}F(Jn,"type","Rect"),F(Jn,"cacheProperties",[...Rs,...wP]),F(Jn,"ownDefaults",{rx:0,ry:0}),F(Jn,"ATTRIBUTE_NAMES",[...Mi,"x","y","rx","ry","width","height"]),ce.setClass(Jn),ce.setSVGClass(Jn);const us="initialization",xf="added",px="removed",wf="imperative",_P=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:i,group:o}=e,a=o&&o!==n?fp(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?BU(new z(r,r),void 0,n.calcTransformMatrix()):tx,f=!t&&c?r:0,d=ix(s+f,i+f,nx([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class mp{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===us||t===wf||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==us&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===wf&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=ps(e.map(f=>_P(s,f)).reduce((f,d)=>f.concat(d),[])),c=new z(a,l),u=new z(i,o).add(c.scalarDivide(2));if(r===us){const f=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new z(0,0),size:f}}return{center:u.transform(s.calcOwnMatrix()),size:c}}}F(mp,"type","strategy");class W0 extends mp{shouldPerformLayout(e){return!0}}F(W0,"type","fit-content"),ce.setClass(W0);const nB=["strategy"],rB=["target","strategy","bubbles","prevStrategy"],bP="layoutManager";class su{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new W0;F(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=L(L({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[ff,Fk,Zc,Uk,cp,Bk,df,EU,kU].map(s=>e.on(s,i=>this.performLayout(s===ff?{type:"object_modified",trigger:s,e:i,target:r}:{type:"object_modifying",trigger:s,e:i,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===us||r===xf?this.subscribeTargets(e):r===px&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===wf&&e.deep){const i=Xe(e,nB);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(L(L({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,i=r.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===us?new z:t.getRelativeCenterPoint(),{center:a,correction:l=new z,relativeCorrection:c=new z}=i,u=o.subtract(a).add(l).transform(s===us?Gt:In(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:i}=t;var o,a;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===us?r.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*it(r.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*it(r.originY)}):(r.setPositionByOrigin(i,xe,xe),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:i,prevStrategy:o}=e,a=Xe(e,rB),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const c=r.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(L(L({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:bP,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ce.setClass(su,bP);const sB=["type","objects","layoutManager"];class iB extends su{performLayout(){}}class Dn extends zk(Rt){static getDefaults(){return L(L({},super.getDefaults()),Dn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),F(this,"_activeObjects",[]),F(this,"__objectSelectionTracker",void 0),F(this,"__objectSelectionDisposer",void 0),Object.assign(this,Dn.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new su,this.layoutManager.performLayout({type:us,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Ts("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Ts("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(xf,s),i}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...i);return this._onAfterObjectsChange(xf,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(px,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(r);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&gf(e,vt(In(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(gf(e,vt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Rt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...In(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(L({target:this,type:wf},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=r;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return L(L(L({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Jn.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:i}=e,o=Xe(e,sB);return Promise.all([eu(s,t),dp(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,L(L(L({},o),c),{},{layoutManager:new iB}));if(i){const f=ce.getClass(i.type),d=ce.getClass(i.strategy);u.layoutManager=new f(new d)}else u.layoutManager=new su;return u.layoutManager.subscribeTargets({type:us,target:u,targets:u.getObjects()}),u.setCoords(),u})}}F(Dn,"type","Group"),F(Dn,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ce.setClass(Dn);const oB=(n,e)=>Math.min(e.width/n.width,e.height/n.height),aB=(n,e)=>Math.max(e.width/n.width,e.height/n.height),H0="\\s*,?\\s*",ec="".concat(H0,"(").concat(ir,")"),lB="".concat(ec).concat(ec).concat(ec).concat(H0,"([01])").concat(H0,"([01])").concat(ec).concat(ec),cB={m:"l",M:"L"},uB=(n,e,t,r,s,i,o,a,l,c,u)=>{const f=Es(n),d=ks(n),g=Es(e),m=ks(e),v=t*s*g-r*i*m+o,b=r*s*g+t*i*m+a;return["C",c+l*(-t*s*d-r*i*f),u+l*(-r*s*d+t*i*f),v+l*(t*s*m+r*i*g),b+l*(r*s*m-t*i*g),v,b]},Kb=(n,e,t,r)=>{const s=Math.atan2(e,n),i=Math.atan2(r,t);return i>=s?i-s:2*Math.PI-(s-i)};function qb(n,e,t,r,s,i,o,a){let l;if(Ie.cachesBoundsOfCurve&&(l=[...arguments].join(),Tc.boundsOfCurveCache[l]))return Tc.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,f=[],d=[[0,0],[0,0]];let g=6*n-12*t+6*s,m=-3*n+9*t-9*s+3*o,v=3*t-3*n;for(let k=0;k<2;++k){if(k>0&&(g=6*e-12*r+6*i,m=-3*e+9*r-9*i+3*a,v=3*r-3*e),u(m)<1e-12){if(u(g)<1e-12)continue;const P=-v/g;0<P&&P<1&&f.push(P);continue}const O=g*g-4*v*m;if(O<0)continue;const M=c(O),E=(-g+M)/(2*m);0<E&&E<1&&f.push(E);const T=(-g-M)/(2*m);0<T&&T<1&&f.push(T)}let b=f.length;const x=b,w=SP(n,e,t,r,s,i,o,a);for(;b--;){const{x:k,y:O}=w(f[b]);d[0][b]=k,d[1][b]=O}d[0][x]=n,d[1][x]=e,d[0][x+1]=o,d[1][x+1]=a;const S=[new z(Math.min(...d[0]),Math.min(...d[1])),new z(Math.max(...d[0]),Math.max(...d[1]))];return Ie.cachesBoundsOfCurve&&(Tc.boundsOfCurveCache[l]=S),S}const hB=(n,e,t)=>{let[r,s,i,o,a,l,c,u]=t;const f=((d,g,m,v,b,x,w)=>{if(m===0||v===0)return[];let S=0,k=0,O=0;const M=Math.PI,E=w*Qy,T=ks(E),P=Es(E),A=.5*(-P*d-T*g),D=.5*(-P*g+T*d),N=m**2,R=v**2,H=D**2,ne=A**2,Q=N*R-N*H-R*ne;let oe=Math.abs(m),U=Math.abs(v);if(Q<0){const G=Math.sqrt(1-Q/(N*R));oe*=G,U*=G}else O=(b===x?-1:1)*Math.sqrt(Q/(N*H+R*ne));const $=O*oe*D/U,J=-O*U*A/oe,ue=P*$-T*J+.5*d,q=T*$+P*J+.5*g;let re=Kb(1,0,(A-$)/oe,(D-J)/U),V=Kb((A-$)/oe,(D-J)/U,(-A-$)/oe,(-D-J)/U);x===0&&V>0?V-=2*M:x===1&&V<0&&(V+=2*M);const K=Math.ceil(Math.abs(V/M*2)),Y=[],X=V/K,se=8/3*Math.sin(X/4)*Math.sin(X/4)/Math.sin(X/2);let ae=re+X;for(let G=0;G<K;G++)Y[G]=uB(re,ae,P,T,oe,U,ue,q,se,S,k),S=Y[G][5],k=Y[G][6],re=ae,ae+=X;return Y})(c-n,u-e,s,i,a,l,o);for(let d=0,g=f.length;d<g;d++)f[d][1]+=n,f[d][2]+=e,f[d][3]+=n,f[d][4]+=e,f[d][5]+=n,f[d][6]+=e;return f},dB=n=>{let e=0,t=0,r=0,s=0;const i=[];let o,a=0,l=0;for(const c of n){const u=[...c];let f;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],f=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],f=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],f=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],s=u[2],f=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],f=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],f=["C",a,l,u[1],u[2],e,t],a=f[3],l=f[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],f=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],f=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":hB(e,t,u).forEach(d=>i.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=s,f=["Z"]}f?(i.push(f),o=f[0]):o=""}return i},_f=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),SP=(n,e,t,r,s,i,o,a)=>l=>{const c=l**3,u=(g=>3*g**2*(1-g))(l),f=(g=>3*g*(1-g)**2)(l),d=(g=>(1-g)**3)(l);return new z(o*c+s*u+t*f+n*d,a*c+i*u+r*f+e*d)},CP=n=>n**2,TP=n=>2*n*(1-n),EP=n=>(1-n)**2,fB=(n,e,t,r,s,i,o,a)=>l=>{const c=CP(l),u=TP(l),f=EP(l),d=3*(f*(t-n)+u*(s-t)+c*(o-s)),g=3*(f*(r-e)+u*(i-r)+c*(a-i));return Math.atan2(g,d)},pB=(n,e,t,r,s,i)=>o=>{const a=CP(o),l=TP(o),c=EP(o);return new z(s*a+t*l+n*c,i*a+r*l+e*c)},gB=(n,e,t,r,s,i)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(s-t)),c=2*(a*(r-e)+o*(i-r));return Math.atan2(c,l)},Qb=(n,e,t)=>{let r=new z(e,t),s=0;for(let i=1;i<=100;i+=1){const o=n(i/100);s+=_f(r.x,r.y,o.x,o.y),r=o}return s},mB=(n,e)=>{let t,r=0,s=0,i={x:n.x,y:n.y},o=L({},i),a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;s<e&&a>1e-4;)o=c(r),l=r,t=_f(i.x,i.y,o.x,o.y),t+s>e?(r-=a,a/=2):(i=o,r+=a,s+=t);return L(L({},o),{},{angle:u(l)})},kP=n=>{let e,t,r=0,s=0,i=0,o=0,a=0;const l=[];for(const c of n){const u={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=u,t.length=_f(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=SP(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=fB(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Qb(e,s,i),s=c[5],i=c[6];break;case"Q":e=pB(s,i,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=gB(s,i,c[1],c[2],c[3],c[4]),t.length=Qb(e,s,i),s=c[3],i=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=_f(s,i,o,a),s=o,i=a}r+=t.length,l.push(t)}return l.push({length:r,x:s,y:i}),l},vB=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kP(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],i=e/s.length,o=n[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return L(L({},new z(s.x,s.y).lerp(new z(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return L(L({},new z(s.x,s.y).lerp(new z(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return mB(s,e)}},yB=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Jb=new RegExp(lB,"g"),xB=new RegExp(ir,"gi"),wB={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_B=n=>{var e;const t=[],r=(e=n.match(yB))!==null&&e!==void 0?e:[];for(const s of r){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=wB[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){Jb.lastIndex=0;for(let l=null;l=Jb.exec(s);)a.push(...l.slice(1))}else a=s.match(xB)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=cB[i];c[0]=l>0&&u?u:i;for(let f=0;f<o;f++)c[f+1]=parseFloat(a[l+f]);t.push(c)}}return t},bB=(n,e)=>n.map(t=>t.map((r,s)=>s===0||e===void 0?r:Be(r,e)).join(" ")).join(" ");function G0(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,i]=r;return t.setProperty(s,i)}))}const Xg=(n,e)=>{let t=n._findCenterFromElement();n.transformMatrix&&((r=>{if(r.transformMatrix){const{scaleX:s,scaleY:i,angle:o,skewX:a}=rl(r.transformMatrix);r.flipX=!1,r.flipY=!1,r.set(Xt,s),r.set(xn,i),r.angle=o,r.skewX=a,r.skewY=0}})(n),t=t.transform(n.transformMatrix)),delete n.transformMatrix,e&&(n.scaleX*=e.scaleX,n.scaleY*=e.scaleY,n.cropX=e.cropX,n.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,n.width=e.width,n.height=e.height),n.setPositionByOrigin(t,xe,xe)};class SB extends Jk{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),F(this,"upper",void 0),F(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=Ps();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=xl().createElement("div");return e.setAttribute("data-fabric","wrapper"),G0(e,{position:"relative"}),bb(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;G0(e,L(L({},r),{},{"touch-action":s?"manipulation":$t})),bb(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;Qk(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),L0(this.upper.el,e),L0(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Ur().dispose(this.upper.el),delete this.upper,delete this.container}}class vp extends Au{constructor(){super(...arguments),F(this,"targets",[]),F(this,"_hoveredTargets",[]),F(this,"_objectsToRender",void 0),F(this,"_currentTransform",null),F(this,"_groupSelector",null),F(this,"contextTopDirty",!1)}static getDefaults(){return L(L({},super.getDefaults()),vp.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new SB(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-r+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return P8(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===up||t===Xt||t===xn||t===Zc?s=this.centeredScaling||e.centeredScaling:t===ex&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=nt:["mr","tr","br"].includes(t)&&(r.x=Ne),["tl","mt","tr"].includes(t)?r.y=j0:["bl","mb","br"].includes(t)&&(r.y=ln)),r}_setupCurrentTransform(e,t,r){var s;const i=t.group?Pa(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):$U,c=((g,m,v,b)=>{if(!m||!g)return"drag";const x=b.controls[m];return x.getActionName(v,x,b)})(r,o,e,t),u=e[this.centeredKey],f=this._shouldCenterTransform(t,c,u)?{x:xe,y:xe}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:f.x,originY:f.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:st(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:L(L({},Zk(t)),{},{originX:f.x,originY:f.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new z(t,r).transform(this.viewportTransform),a=new z(t+s,r+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),f=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,f-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,f-=l,d-=l,Rt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,f-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,F0(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=i,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),f=Es(u)*i,d=ks(u)*i,g=f+d,m=f-d;r=[new z(o.x-m,o.y-g),new z(a.x+g,a.y-m),new z(l.x+m,l.y+g),new z(c.x-g,c.y+m)]}return Ye.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Pa(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(md(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&md(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!md(o)||!o.interactive)return o}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let i=jU(e),o=s.width||0,a=s.height||0;o&&a||(ln in s&&j0 in s&&(a=Math.abs(s.top-s.bottom)),nt in s&&Ne in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=Pa(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new z(1,1):new z(r.width/o,r.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ps(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Xi(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Xi(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Xi(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(ff,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Xi(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,r);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Xi(t)&&this._activeObject===t){const r=Sl(e,["angle","flipX","flipY",Ne,Xt,xn,wl,_l,ln]);return FU(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}F(vp,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class CB{constructor(e){F(this,"targets",[]),F(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Zo(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const TB=["target","oldTarget","fireCanvas","e"],un={passive:!1},Ko=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Vs=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Sn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},EB={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class X0 extends vp{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),F(this,"_isClick",void 0),F(this,"textEditingManager",new CB(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Vs,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(qk(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,un),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,un)}removeListeners(){this.addOrRemove(Sn,"remove");const e=this._getEventPrefix(),t=tr(this.upperCanvasEl);Sn(t,"".concat(e,"up"),this._onMouseUp),Sn(t,"touchend",this._onTouchEnd,un),Sn(t,"".concat(e,"move"),this._onMouseMove,un),Sn(t,"touchmove",this._onMouseMove,un),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=L({e},Ko(this,e));this.fire("mouse:out",L(L({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",L({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",L(L({},r),{},{target:s})),s&&s.fire("mouseout",L({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",L({e},Ko(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Vs(this.upperCanvasEl,"drag",this._onDragProgress)}Sb(e)}_renderDragEffects(e,t,r){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==r&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==$t,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Sn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:r,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",L({e,target:t,subTargets:r,dragSource:this._dragSource},Ko(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&Sb(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=tr(s);Vs(o,"touchend",this._onTouchEnd,un),t&&Vs(o,"touchmove",this._onMouseMove,un),Sn(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Sn(t,"".concat(r,"move"),this._onMouseMove,un);const s=tr(t);Vs(s,"".concat(r,"up"),this._onMouseUp),Vs(s,"".concat(r,"move"),this._onMouseMove,un)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=tr(this.upperCanvasEl);Sn(r,"touchend",this._onTouchEnd,un),Sn(r,"touchmove",this._onMouseMove,un),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Vs(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=tr(this.upperCanvasEl);Sn(s,"".concat(r,"up"),this._onMouseUp),Sn(s,"".concat(r,"move"),this._onMouseMove,un),Vs(t,"".concat(r,"move"),this._onMouseMove,un)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!s){const u=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!u&&i===this._activeObject)}if(i){const u=i.findControl(this.getViewportPoint(e),F0(e)),{key:f,control:d}=u||{};if(l=f,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(d){const g=d.getMouseUpHandler(e,i,d);g&&(a=this.getScenePoint(e),g.call(d,e,r,a.x,a.y))}i.isMoving=!1}if(r&&(r.target!==i||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],f=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),f&&f.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire(e,t);return t}_handleEvent(e,t,r){const s=this._target,i=this.targets||[],o=L(L(L({e,target:s,subTargets:i},Ko(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),o),s&&s.fire("mouse".concat(t),o);for(let a=0;a<i.length;a++)i[a]!==s&&i[a].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),F0(e));if(t===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,t,r);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Pa(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",L(L({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",L(L({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:i,e:o}=t,a=Xe(t,TB);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:f}=EB[e],d=s!==r;if(s&&d){const g=L(L({},a),{},{e:o,target:s,nextTarget:r},Ko(this,o));i&&this.fire(f,g),s.fire(c,g)}if(r&&d){const g=L(L({},a),{},{e:o,target:r,previousTarget:s},Ko(this,o));i&&this.fire(u,g),r.fire(l,g)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,i=s.group?Pa(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,r.x,r.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=Xi(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=Xi(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const i=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{r.isEditing&&r.exitEditing();const i=new(ce.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new z(t,r),a=o.add(new z(s,i)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),f=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(f.length===1)this.setActiveObject(f[0],e);else if(f.length>1){const d=ce.getClass("ActiveSelection");this.setActiveObject(new d(f,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const PP={x1:0,y1:0,x2:0,y2:0},kB=L(L({},PP),{},{r1:0,r2:0}),fa=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,PB=/^(\d+\.\d+)%|(\d+)%$/;function OP(n){return n&&PB.test(n)}function AP(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(OP(n)?100:1):NaN;return sl(0,fa(t,e),1)}const OB=/\s*;\s*/,AB=/\s*:\s*/;function IB(n,e){let t,r;const s=n.getAttribute("style");if(s){const o=s.split(OB);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(AB).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const i=new je(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:AP(n.getAttribute("offset"),0),color:i.toRgb(),opacity:fa(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function RB(n,e){const t=[],r=n.getElementsByTagName("stop"),s=AP(e,1);for(let i=r.length;i--;)t.push(IB(r[i],s));return t}function IP(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function RP(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Vn(n,e){return n.getAttribute(e)}function DB(n,e){return function(t,r){let s,{width:i,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?s=1:u==="-Infinity"?s=0:(s=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&OP(u)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(IP(n)==="linear"?function(t){return{x1:Vn(t,"x1")||0,y1:Vn(t,"y1")||0,x2:Vn(t,"x2")||"100%",y2:Vn(t,"y2")||0}}(n):function(t){return{x1:Vn(t,"fx")||Vn(t,"cx")||"50%",y1:Vn(t,"fy")||Vn(t,"cy")||"50%",r1:0,x2:Vn(t,"cx")||"50%",y2:Vn(t,"cy")||"50%",r2:Vn(t,"r")||"50%"}}(n),L(L({},e),{},{gradientUnits:RP(n)}))}class ac{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:L(L({},t==="radial"?kB:PP),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(Ii()):Ii()})}addColorStop(e){for(const t in e){const r=new je(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return L(L({},Sl(this,e)),{},{type:this.type,coords:L({},this.coords),colorStops:this.colorStops.map(t=>L({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():Gt.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(f=>L({},f)).sort((f,d)=>f.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(tu(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:f,y1:d,x2:g,y2:m}=this.coords;r.push("<linearGradient ",u,' x1="',f,'" y1="',d,'" x2="',g,'" y2="',m,`">
`)}else if(this.type==="radial"){const{x1:f,y1:d,x2:g,y2:m,r1:v,r2:b}=this.coords,x=v>b;r.push("<radialGradient ",u,' cx="',x?f:g,'" cy="',x?d:m,'" r="',x?v:b,'" fx="',x?g:f,'" fy="',x?m:d,`">
`),x&&(o.reverse(),o.forEach(S=>{S.offset=1-S.offset}));const w=Math.min(v,b);if(w>0){const S=w/Math.max(v,b);o.forEach(k=>{k.offset+=S*(1-k.offset)})}}return o.forEach(f=>{let{color:d,offset:g,opacity:m}=f;r.push("<stop ",'offset="',100*g+"%",'" style="stop-color:',d,m!==void 0?";stop-opacity: "+m:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,s,i):e.createRadialGradient(t,r,o,s,i,a);return this.colorStops.forEach(c=>{let{color:u,opacity:f,offset:d}=c;l.addColorStop(d,f!==void 0?new je(u).setAlpha(f).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(L(L({},e),{},{colorStops:t?t.map(s=>L({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=RP(e),i=t._findCenterFromElement();return new this(L({id:e.getAttribute("id")||void 0,type:IP(e),coords:DB(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:RB(e,r.opacity),gradientUnits:s,gradientTransform:yf(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}F(ac,"type","Gradient"),ce.setClass(ac,"gradient"),ce.setClass(ac,"linear"),ce.setClass(ac,"radial");const NB=["type","source","patternTransform"];class Oc{get type(){return"pattern"}set type(e){Ts("warn","Setting type has no effect",e)}constructor(e){F(this,"repeat","repeat"),F(this,"offsetX",0),F(this,"offsetY",0),F(this,"crossOrigin",""),this.id=Ii(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return L(L({},Sl(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Be(this.offsetX,Ie.NUM_FRACTION_DIGITS),offsetY:Be(this.offsetY,Ie.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:i,id:o}=this,a=fa(this.offsetX/t,0),l=fa(this.offsetY/r,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):fa(s.width/t,0),u=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):fa(s.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:i}=e,o=Xe(e,NB);const a=await yd(s,L(L({},t),{},{crossOrigin:o.crossOrigin}));return new this(L(L({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}F(Oc,"type","Pattern"),ce.setClass(Oc),ce.setClass(Oc,"pattern");const MB=["path","left","top"],jB=["d"];class Yi extends Rt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:i}=t,o=Xe(t,MB);super(),Object.assign(this,Yi.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(Ne,s),typeof i=="number"&&this.set(ln,i)}_setPath(e,t){this.path=dB(Array.isArray(e)?e:_B(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new z(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=bB(this.path,Ie.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Ie.NUM_FRACTION_DIGITS;return" translate(".concat(Be(-this.pathOffset.x,e),", ").concat(Be(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,xe,xe)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:r},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,r=i;break;case"C":e.push(...qb(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...qb(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=r}return ps(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return L(L({},e),{},{pathOffset:new z(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=Ds(e,this.ATTRIBUTE_NAMES,r),{d:i}=s;return new this(i,L(L(L({},Xe(s,jB)),t),{},{left:void 0,top:void 0}))}}F(Yi,"type","Path"),F(Yi,"cacheProperties",[...Rs,"path","fillRule"]),F(Yi,"ATTRIBUTE_NAMES",[...Mi,"d"]),ce.setClass(Yi),ce.setSVGClass(Yi);const LB=["left","top","radius"],DP=["radius","startAngle","endAngle","counterClockwise"];class es extends Rt{static getDefaults(){return L(L({},super.getDefaults()),es.ownDefaults)}constructor(e){super(),Object.assign(this,es.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,st(this.startAngle),st(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Xt)}getRadiusY(){return this.get("radius")*this.get(xn)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...DP,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=st(this.startAngle),s=st(this.endAngle),i=Es(r)*t,o=ks(r)*t,a=Es(s)*t,l=ks(s)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=Ds(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,radius:a=0}=s;return new this(L(L({},Xe(s,LB)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}F(es,"type","Circle"),F(es,"cacheProperties",[...Rs,...DP]),F(es,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),F(es,"ATTRIBUTE_NAMES",["cx","cy","r",...Mi]),ce.setClass(es),ce.setSVGClass(es);const FB=["x1","y1","x2","y2"],UB=["x1","y1","x2","y2"],Y0=["x1","x2","y1","y2"];class ss extends Rt{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ss.ownDefaults),this.setOptions(i),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(Ne,o),typeof a=="number"&&this.set(ln,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=ps([{x:e,y:t},{x:r,y:s}]),c=new z(i+a/2,o+l/2);this.setPositionByOrigin(c,xe,xe)}_set(e,t){return super._set(e,t),Y0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;Pn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new z((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=r<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=Ds(e,this.ATTRIBUTE_NAMES,r),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],Xe(s,FB))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:i}=e,o=Xe(e,UB);return this._fromObject(L(L({},o),{},{points:[t,r,s,i]}),{extraParam:"points"})}}F(ss,"type","Line"),F(ss,"cacheProperties",[...Rs,...Y0]),F(ss,"ATTRIBUTE_NAMES",Mi.concat(Y0)),ce.setClass(ss),ce.setSVGClass(ss);class eo extends Rt{static getDefaults(){return L(L({},super.getDefaults()),eo.ownDefaults)}constructor(e){super(),Object.assign(this,eo.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}F(eo,"type","Triangle"),F(eo,"ownDefaults",{width:100,height:100}),ce.setClass(eo),ce.setSVGClass(eo);const NP=["rx","ry"];class ts extends Rt{static getDefaults(){return L(L({},super.getDefaults()),ts.ownDefaults)}constructor(e){super(),Object.assign(this,ts.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Xt)}getRy(){return this.get("ry")*this.get(xn)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...NP,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,hf,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=Ds(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function BB(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}F(ts,"type","Ellipse"),F(ts,"cacheProperties",[...Rs,...NP]),F(ts,"ownDefaults",{rx:0,ry:0}),F(ts,"ATTRIBUTE_NAMES",[...Mi,"cx","cy","rx","ry"]),ce.setClass(ts),ce.setSVGClass(ts);const zB=["left","top"],MP={exactBoundingBox:!1};class Yn extends Rt{static getDefaults(){return L(L({},super.getDefaults()),Yn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),F(this,"strokeDiff",void 0),Object.assign(this,Yn.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(Ne,r),typeof s=="number"&&this.set(ln,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return A8(this.points,e,this.isOpen())}_calcDimensions(e){e=L({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new z,strokeOffset:new z,strokeDiff:new z};const r=ps(t),s=hp(L(L({},e),{},{scaleX:1,scaleY:1})),i=ps(this.points.map(c=>Zt(c,s,!0))),o=new z(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(st(this.skewX)),l-=a*Math.tan(st(this.skewY))),L(L({},r),{},{pathOffset:new z(a,l),strokeOffset:new z(i.left,i.top).subtract(new z(r.left,r.top)).multiply(o),strokeDiff:new z(r.width,r.height).subtract(new z(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=ps(this.points);return new z(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new z(t+s/2,r+i/2),xe,xe)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new z(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new z((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var s,i;o=new z((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new z(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===Xt||e===xn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=Ie.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(Be(this.points[i].x-t,s),",",Be(this.points[i].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-r,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(BB(e.getAttribute("points")),L(L({},Xe(Ds(e,this.ATTRIBUTE_NAMES,r),zB)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}F(Yn,"ownDefaults",MP),F(Yn,"type","Polyline"),F(Yn,"layoutProperties",[wl,_l,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),F(Yn,"cacheProperties",[...Rs,"points"]),F(Yn,"ATTRIBUTE_NAMES",[...Mi]),ce.setClass(Yn),ce.setSVGClass(Yn);class bh extends Yn{isOpen(){return!1}}F(bh,"ownDefaults",MP),F(bh,"type","Polygon"),ce.setClass(bh),ce.setSVGClass(bh);class jP extends Rt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const i in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const i in r[s])if(r[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,i=0,o=!0,a=0;for(const l in t){r=0;for(const c in t[l]){const u=t[l][c]||{};i++,u[e]!==void 0?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete t[l][c]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,i;for(s in t){for(i in r=t[s],r)delete r[i][e],Object.keys(r[i]).length===0&&delete r[i];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const i=sx(L(L({},this._getStyleDeclaration(r,s)),t),o=>o!==void 0);this._setStyleDeclaration(r,s,i)}getSelectionStyles(e,t,r){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return L(L({},Sl(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}F(jP,"_styleProperties",WU);const VB=/  +/g,$B=/"/g;function Yg(n,e,t,r,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:u}=o,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ie.NUM_FRACTION_DIGITS;const d=nu(lt,i,!1),[g,m,v,b]=[a,l,c,u].map(x=>Be(x,f));return"<rect ".concat(d,' x="').concat(g,'" y="').concat(m,'" width="').concat(v,'" height="').concat(b,'"></rect>')}(n,{left:e,top:t,width:r,height:s}),`
`)}const WB=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Kg;class Ut extends jP{static getDefaults(){return L(L({},super.getDefaults()),Ut.ownDefaults)}constructor(e,t){super(),F(this,"__charBounds",[]),Object.assign(this,Ut.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=kP(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(kr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===kr||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=i.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(i[u])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Wt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case xe:e.textBaseline="middle";break;case"ascender":e.textBaseline=ln;break;case"descender":e.textBaseline=j0}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,i,o){this._renderChars(e,t,r,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let u,f,d=0,g=0,m=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let v=0;v<l;v++){const b=this.__charBounds[i][v];f=this.getValueOfPropertyAt(i,v,"textBackgroundColor"),this.path?(e.save(),e.translate(b.renderLeft,b.renderTop),e.rotate(b.angle),e.fillStyle=f,f&&e.fillRect(-b.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),b.width,a/this.lineHeight),e.restore()):f!==m?(u=r+c+g,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=m,m&&e.fillRect(u,s,d,a/this.lineHeight),g=b.left,d=b.width,m=f):d+=b.kernedWidth}f&&!this.path&&(u=r+c+g,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=f,e.fillRect(u,s,d,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const i=Tc.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let u,f,d,g;if(r&&i[r]!==void 0&&(d=i[r]),i[e]!==void 0&&(g=u=i[e]),l&&i[a]!==void 0&&(f=i[a],g=f-d),u===void 0||d===void 0||f===void 0){const m=function(){return Kg||(Kg=Ln({width:0,height:0}).getContext("2d")),Kg}();this._setTextStyles(m,t,!0),u===void 0&&(g=u=m.measureText(e).width,i[e]=u),d===void 0&&l&&r&&(d=m.measureText(r).width,i[r]=d),l&&f===void 0&&(f=m.measureText(a).width,i[a]=f,g=f-d)}return{width:u*c,kernedWidth:g*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const i=this.pathSide===nt,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const f=a[u];r=this._getGraphemeBox(f,e,u,t),c[u]=r,s+=r.kernedWidth,t=f}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const f=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case Ne:u=i?f-s:0;break;case xe:u=(f-s)/2;break;case nt:u=i?0:f-s}u+=this.pathStartOffset*(i?-1:1);for(let d=i?l-1:0;i?d>=0:d<l;i?d--:d++)r=c[d],u>f?u%=f:u<0&&(u+=f),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,i=vB(s.path,r,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===nt?Math.PI:0)}_getGraphemeBox(e,t,r,s,i){const o=this.getCompleteStyleDeclaration(t,r),a=s?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,s,a);let c,u=l.kernedWidth,f=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),f+=c,u+=c);const d={width:f,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!i){const g=this.__charBounds[t][r-1];d.left=g.left+g.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+u,i+r+c,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(lt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(kr),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,f=this.direction==="ltr",d=this.direction==="ltr"?1:-1,g=t.direction;let m,v,b,x,w,S="",k=0;if(t.save(),g!==this.direction&&(t.canvas.setAttribute("dir",f?"ltr":"rtl"),t.direction=f?"ltr":"rtl",t.textAlign=f?Ne:nt),i-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,r.join(""),s,i),void t.restore();for(let O=0,M=r.length-1;O<=M;O++)x=O===M||this.charSpacing||c,S+=r[O],b=this.__charBounds[o][O],k===0?(s+=d*(b.kernedWidth-b.width),k+=b.width):k+=b.kernedWidth,l&&!x&&this._reSpaceAndTab.test(r[O])&&(x=!0),x||(m=m||this.getCompleteStyleDeclaration(o,O),v=this.getCompleteStyleDeclaration(o,O+1),x=dx(m,v,!1)),x&&(c?(t.save(),t.translate(b.renderLeft,b.renderTop),t.rotate(b.angle),this._renderChar(e,t,o,O,S,-k/2,0),t.restore()):(w=s,this._renderChar(e,t,o,O,S,w,i)),S="",m=v,s+=d*k,k=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=Ln({width:t,height:r}),i=s.getContext("2d");return s.width=t,s.height=r,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,r),i.lineTo(0,r),i.closePath(),i.translate(t/2,r/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,i;return Pn(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:i}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,i,o,a){const l=this._getStyleDeclaration(r,s),c=this.getCompleteStyleDeclaration(r,s),u=e==="fillText"&&c.fill,f=e==="strokeText"&&c.stroke&&c.strokeWidth;if(f||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(i,o-d.offsetX,a-d.offsetY)}if(f){const d=this._setStrokeStyles(t,c);t.strokeText(i,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*r.size,deltaY:o+i*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===kr||s===kc&&!o||s===Ec&&!o||s===vf&&!o?0:(s===xe&&(a=r/2),s===nt&&(a=r),s===kc&&(a=r/2),s===Ec&&(a=r),i==="rtl"&&(s===nt||s===kr||s===Ec?a=0:s===Ne||s===vf?a=-r:s!==xe&&s!==kc||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=t==="linethrough"?.5:t==="overline"?1:0,l=this.offsets[t];for(let c=0,u=this._textLines.length;c<u;c++){const f=this.getHeightOfLine(c);if(!this[t]&&!this.styleHas(t,c)){r+=f;continue}const d=this._textLines[c],g=f/this.lineHeight,m=this._getLineLeftOffset(c);let v=0,b=0,x=this.getValueOfPropertyAt(c,0,t),w=this.getValueOfPropertyAt(c,0,lt),S=this.getValueOfPropertyAt(c,0,Oo),k=x,O=w,M=S;const E=r+g*(1-this._fontSizeFraction);let T=this.getHeightOfChar(c,0),P=this.getValueOfPropertyAt(c,0,"deltaY");for(let N=0,R=d.length;N<R;N++){const H=this.__charBounds[c][N];k=this.getValueOfPropertyAt(c,N,t),O=this.getValueOfPropertyAt(c,N,lt),M=this.getValueOfPropertyAt(c,N,Oo);const ne=this.getHeightOfChar(c,N),Q=this.getValueOfPropertyAt(c,N,"deltaY");if(i&&k&&O){const oe=this.fontSize*M/1e3;e.save(),e.fillStyle=w,e.translate(H.renderLeft,H.renderTop),e.rotate(H.angle),e.fillRect(-H.kernedWidth/2,l*ne+Q-a*oe,H.kernedWidth,oe),e.restore()}else if((k!==x||O!==w||ne!==T||M!==S||Q!==P)&&b>0){const oe=this.fontSize*S/1e3;let U=s+m+v;this.direction==="rtl"&&(U=this.width-U-b),x&&w&&S&&(e.fillStyle=w,e.fillRect(U,E+l*T+P-a*oe,b,oe)),v=H.left,b=H.width,x=k,S=M,w=O,T=ne,P=Q}else b+=H.kernedWidth}let A=s+m+v;this.direction==="rtl"&&(A=this.width-A-b),e.fillStyle=O;const D=this.fontSize*M/1e3;k&&O&&M&&e.fillRect(A,E+l*T+P-a*D,b-o,D),r+=f}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||Ut.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return hx(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),i=i.concat(r[o],s);return i.pop(),{_unwrappedLines:r,lines:t,graphemeText:i,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject([...cP,...e])),{},{styles:N8(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||r.includes(o),i=i||o==="path";else s=r.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=Ds(e,Ut.ATTRIBUTE_NAMES,r),i=L(L({},t),s),{textAnchor:o=Ne,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:f=0,fontSize:d=Jy,strokeWidth:g=1}=i,m=Xe(i,WB),v=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),L({left:f+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},m)),b=v.getScaledHeight()/v.height,x=((v.height+v.strokeWidth)*v.lineHeight-v.height)*b,w=v.getScaledHeight()+x;let S=0;return o===xe&&(S=v.getScaledWidth()/2),o===nt&&(S=v.getScaledWidth()),v.set({left:v.left-S,top:v.top-(w-v.fontSize*(.07+v._fontSizeFraction))/v.lineHeight,strokeWidth:g}),v}static fromObject(e){return this._fromObject(L(L({},e),{},{styles:M8(e.styles||{},e.text)}),{extraParam:"text"})}}F(Ut,"textLayoutProperties",lP),F(Ut,"cacheProperties",[...Rs,...cP]),F(Ut,"ownDefaults",HU),F(Ut,"type","Text"),F(Ut,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),F(Ut,"ATTRIBUTE_NAMES",Mi.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),yP(Ut,[class extends iP{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:tu(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace($B,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let s,i=n;this.backgroundColor&&r.push(...Yg(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,s){const i=Ie.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(VB)),a=o?'style="'.concat(o,'"'):"",l=e.deltaY,c=l?' dy="'.concat(Be(l,i),'" '):"",{angle:u,renderLeft:f,renderTop:d,width:g}=s;let m="";if(f!==void 0){const v=g/2;u&&(m=' rotate="'.concat(Be(Os(u),i),'"'));const b=bl({angle:Os(u)});b[4]=f,b[5]=d;const x=new z(-v,0).transform(b);t=x.x,r=x.y}return'<tspan x="'.concat(Be(t,i),'" y="').concat(Be(r,i),'" ').concat(c).concat(m).concat(a,">").concat(I8(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const s=this.getHeightOfLine(e),i=this.textAlign.includes(kr),o=this._textLines[e];let a,l,c,u,f,d="",g=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let m=0,v=o.length-1;m<=v;m++)f=m===v||this.charSpacing||this.path,d+=o[m],c=this.__charBounds[e][m],g===0?(t+=c.kernedWidth-c.width,g+=c.width):g+=c.kernedWidth,i&&!f&&this._reSpaceAndTab.test(o[m])&&(f=!0),f||(a=a||this.getCompleteStyleDeclaration(e,m),l=this.getCompleteStyleDeclaration(e,m+1),f=dx(a,l,!0)),f&&(u=this._getStyleDeclaration(e,m),n.push(this._createTextCharSpan(d,u,t,r,c)),d="",a=l,this.direction==="rtl"?t-=g:t+=g,g=0)}_setSVGTextLineBg(n,e,t,r){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:f,width:d,kernedWidth:g}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&n.push(...Yg(c,t+l,r,a,i)),l=f,a=d,c=o):a+=g}o&&n.push(...Yg(c,t+l,r,a,i))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(Be(this.textDecorationThickness*this.getObjectScaling().y/10,Ie.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:u,linethrough:f,overline:d,underline:g}=n,m=this.getSvgTextDecoration({underline:g??this.underline,overline:d??this.overline,linethrough:f??this.linethrough}),v=u||this.textDecorationThickness;return[s?nu(Wt,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",m?"text-decoration: ".concat(m,"; text-decoration-thickness: ").concat(Be(v*this.getObjectScaling().y/10,Ie.NUM_FRACTION_DIGITS),"%; "):"",i?nu(lt,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),ce.setClass(Ut),ce.setSVGClass(Ut);class HB{constructor(e){F(this,"target",void 0),F(this,"__mouseDownInPlace",!1),F(this,"__dragStartFired",!1),F(this,"__isDraggingOver",!1),F(this,"__dragStartSelection",void 0),F(this,"__dragImageDisposer",void 0),F(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new z(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),u=new z(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),f=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),g=o.getBoundingRect(),m=u.subtract(new z(g.left,g.top)),v=a.viewportTransform,b=m.add(f).transform(v,!0),x=o.backgroundColor,w=ux(o.styles);o.backgroundColor="";const S={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(S,0,s),o.setSelectionStyles(S,i,o.text.length),o.dirty=!0;const k=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=x,o.styles=w,o.dirty=!0,G0(k,{position:"fixed",left:"".concat(-k.width,"px"),border:$t,width:"".concat(k.width/d,"px"),height:"".concat(k.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{k.remove()},tr(e.target||this.target.hiddenTextarea).body.appendChild(k),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(k,b.x,b.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=L({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=i[Math.max(0,i.length-1)],f=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,g=this.__dragStartSelection.selectionEnd;l>d&&l<=g?l=d:l>g&&(l-=g-d),o.removeChars(d,g),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+f,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(df,{index:l+f,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||$t;l===$t?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(df,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Zb=/[ \n\.,;!\?\-]/;class GB extends Ut{constructor(){super(...arguments),F(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:i}=e;return fP({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!Zy.test(r[e-1]))?e-1:e,i=r[s];for(;s>0&&s<r.length&&!Zb.test(i);)s+=t,i=r[s];return t===-1&&Zb.test(i)&&s++,s}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),s=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),s=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;tr(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==i||s!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=r.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,f=c.height/l,d=u-o,g=f-o,m=new z(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new z(c.clientWidth/u,c.clientHeight/f));return m.x<0&&(m.x=0),m.x>d&&(m.x=d),m.y<0&&(m.y=0),m.y>g&&(m.y=g),m.x+=this.canvas._offset.left,m.y+=this.canvas._offset.top,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(ff),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==i){if(this.styles[r])for(let a=s;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+a-o]=l)}for(let a=r+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const a=this.styles[r],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,r,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const f in this.styles[e]){const d=parseInt(f,10);d>=t&&(l=!0,i[d-t]=this.styles[e][f],a&&t===0||delete this.styles[e][f])}let u=!1;for(l&&!a&&(this.styles[e+r]=i,u=!0),(u||o>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:L({},s[r-1])}:c?this.styles[e+r]={0:L({},c)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const i=this.styles[e],o=i?L({},i):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+r]=o[c],o[c-r]||delete i[c])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=L({},s[r]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=L({},a)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],r):r&&this.styles[s.lineIndex+o]&&r[0]&&(this.styles[s.lineIndex+o][0]=r[0]),r=r&&r.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,r,t),this._text=[...this._text.slice(0,r),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Ne:this._selectionDirection===nt&&(this._selectionDirection=Ne,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===nt?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=nt:this._selectionDirection===Ne&&(this._selectionDirection=nt,this.selectionStart=t),this.selectionEnd=r)}}class XB extends GB{initHiddenTextarea(){const e=this.canvas&&tr(this.canvas.getElement())||xl(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:s,selectionEnd:i}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(df),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,c=a.length,u=this.selectionStart,f=this.selectionEnd,d=u!==f;let g,m,v,b,x=c-l;const w=this.fromStringToGraphemeSelection(s,i,r),S=u>w.selectionStart;d?(m=this._text.slice(u,f),x+=f-u):c<l&&(m=S?this._text.slice(f+x,f):this._text.slice(u,u-x));const k=a.slice(w.selectionEnd-x,w.selectionEnd);if(m&&m.length&&(k.length&&(g=this.getSelectionStyles(u,u+1,!1),g=k.map(()=>g[0])),d?(v=u,b=f):S?(v=f-m.length,b=f):(v=f,b=f+m.length),this.removeStyleFromTo(v,b)),k.length){const{copyPasteData:O}=Ur();t&&k.join("")===O.copiedText&&!Ie.disableStyleCopyPaste&&(g=O.copiedTextStyle),this.insertNewStyleBlock(k,u,g)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Ur();e.copiedText=this.getSelectedText(),Ie.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),u=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const u=o-s,f=o,d=Math.abs(u-t);a=Math.abs(f-t)<d?l:l-1;break}return i||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===nt);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=sl(0,this.selectionStart,s),this.selectionEnd=sl(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Ne?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Ne,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===nt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Ne,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Ne&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=nt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=nt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const eS=n=>!!n.button;class YB extends XB{constructor(){super(...arguments),F(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new HB(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!eS(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||eS(t)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(In(this.calcTransformMatrix())).add(new z(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,i=0;for(let c=0;c<this._textLines.length&&r<=t.y;c++)r+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&s++;break}o=u,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const Sh="moveCursorUp",Ch="moveCursorDown",Th="moveCursorLeft",Eh="moveCursorRight",kh="exitEditing",tS=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},KB=L({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:kh,27:kh,33:Sh,34:Ch,35:Eh,36:Th,37:Th,38:Sh,39:Eh,40:Ch},keysMapRtl:{9:kh,27:kh,33:Sh,34:Ch,35:Th,36:Eh,37:Eh,38:Sh,39:Th,40:Ch},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class hs extends YB{static getDefaults(){return L(L({},super.getDefaults()),hs.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,L(L({},hs.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof X0&&this.canvas.textEditingManager.remove(this),t instanceof X0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),s=r.length>0;let i,o=e;if(s){i=Ln(e.canvas),o=i.getContext("2d"),tS(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),s)for(const a of r){const l=a.clipPath,c=Ln(e.canvas),u=c.getContext("2d");if(tS(u,this.canvas),!l.absolutePositioned){const f=a.calcTransformMatrix();u.transform(f[0],f[1],f[2],f[3],f[4],f[5])}l.transform(u),l.drawObject(u,!0,{}),this.drawClipPathOnCache(o,l,c)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(r=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===nt||this.textAlign===kr||this.textAlign===Ec?l.left*=-1:this.textAlign===Ne||this.textAlign===vf?l.left=o-(r>0?r:0):this.textAlign!==xe&&this.textAlign!==kc||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,r){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(kr),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,u=l.lineIndex,f=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let g=c;g<=u;g++){const m=this._getLineLeftOffset(g)||0;let v=this.getHeightOfLine(g),b=0,x=0,w=0;if(g===c&&(x=this.__charBounds[c][f].left),g>=c&&g<u)w=o&&!this.isEndOfWrapping(g)?this.width:this.getLineWidth(g)||5;else if(g===u)if(d===0)w=this.__charBounds[u][d].left;else{const E=this._getWidthOfCharSpacing();w=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-E}b=v,(this.lineHeight<1||g===u&&this.lineHeight>1)&&(v/=this.lineHeight);let S=r.left+m+x,k=v,O=0;const M=w-x;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",k=1,O=v):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===nt||this.textAlign===kr||this.textAlign===Ec?S=this.width-S-M:this.textAlign===Ne||this.textAlign===vf?S=r.left+m-w:this.textAlign!==xe&&this.textAlign!==kc||(S=r.left+m-w)),e.fillRect(S,r.top+r.topOffset+O,M,k),r.topOffset+=b}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,lt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}F(hs,"ownDefaults",KB),F(hs,"type","IText"),ce.setClass(hs),ce.setClass(hs,"i-text");class to extends hs{static getDefaults(){return L(L({},super.getDefaults()),to.ownDefaults)}constructor(e,t){super(e,L(L({},to.ownDefaults),t))}static createControls(){return{controls:k8()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(kr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(r++,s++),i[o]={line:t,offset:r},s+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const f=parseInt(u,10);if(f>=r&&(!i||f<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<r.wordsData.length;i++)s.push(...this._wrapLine(i,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),f=this._measureWord(u,o,a);return s=Math.max(f,s),a+=u.length+r.length,{word:u,width:f}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,r,!0).kernedWidth,r=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:i}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let f=0,d=[],g=0,m=0,v=!0;t-=o;const b=Math.max(t,s,this.dynamicMinWidth),x=i[e];let w;for(g=0,w=0;w<x.length;w++){const{word:S,width:k}=x[w];g+=S.length,f+=m+k-a,f>b&&!v?(c.push(d),d=[],f=k,v=!0):f+=a,v||l||d.push(u),d=d.concat(S),m=l?0:this._measureWord([u],e,g),g++,v=!1}return w&&c.push(d),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=r[i].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}F(to,"type","Textbox"),F(to,"textLayoutProperties",[...hs.textLayoutProperties,"width"]),F(to,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ce.setClass(to);class nS extends mp{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:i}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=ps(_P(r,s)),l=new z(o,a);if(s.absolutePositioned)return{center:Pa(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new z,correction:f=new z}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:f.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}F(nS,"type","clip-path"),ce.setClass(nS);class rS extends mp{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new z(r.width||s.x,r.height||s.y)}}F(rS,"type","fixed"),ce.setClass(rS);class qB extends su{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!r.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class no extends Dn{static getDefaults(){return L(L({},super.getDefaults()),no.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,no.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:i}=t;this.groupInit(e,{left:r,top:s,layoutManager:i??new qB})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Ts("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:i}=s;i&&r.add(i)}),e===px?r.forEach(s=>{s._onAfterObjectsChange(xf,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=L(L({hasControls:!1},r),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}F(no,"type","ActiveSelection"),F(no,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ce.setClass(no),ce.setClass(no,"activeSelection");class QB{constructor(){F(this,"resources",{})}applyFilters(e,t,r,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,s);const a={sourceWidth:r,sourceHeight:s,imageData:o.getImageData(0,0,r,s),originalEl:t,originalImageData:o.getImageData(0,0,r,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class LP{constructor(){let{tileSize:e=Ie.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};F(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),F(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Ln({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,r,s,c?void 0:t),targetTexture:this.createTexture(a,r,s),originalTexture:c||this.createTexture(a,r,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},f=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,f),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const g=d.targetCanvas,m=g.width,v=g.height,b=d.destinationWidth,x=d.destinationHeight;m===b&&v===x||(g.width=b,g.height=x)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(f),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:f,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:g,TEXTURE_WRAP_T:m}=e,v=e.createTexture();return e.bindTexture(a,v),e.texParameteri(a,f,i||o),e.texParameteri(a,d,i||o),e.texParameteri(a,g,u),e.texParameteri(a,m,u),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,r,0,l,c,null),v}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,r);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=r.height-s.height;i.drawImage(r,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let qg;function JB(){const{WebGLProbe:n}=Ur();return n.queryWebGL(Ps()),Ie.enableGLFiltering&&n.isSupported(Ie.textureSize)?new LP({tileSize:Ie.textureSize}):new QB}function Qg(){return!qg&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(qg=JB()),qg}const ZB=["filters","resizeFilter","src","crossOrigin","type"],FP=["cropX","cropY"];class tn extends Rt{static getDefaults(){return L(L({},super.getDefaults()),tn.ownDefaults)}constructor(e,t){super(),F(this,"_lastScaleX",1),F(this,"_lastScaleY",1),F(this,"_filterScalingX",1),F(this,"_filterScalingY",1),this.filters=[],Object.assign(this,tn.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ii()),this.setElement(typeof e=="string"?(this.canvas&&tr(this.canvas.getElement())||xl()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(tn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Qg(!1);t instanceof LP&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Ur().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),L(L({},super.toObject([...FP,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=Ii();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==lt?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return yd(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,i=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=Ln(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,Qg().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=Ln({width:r,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);Qg().applyFilters(e,this._originalElement,r,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,f=a*r,d=l*s,g=Math.min(i*r,c-f),m=Math.min(o*s,u-d),v=-i/2,b=-o/2,x=Math.min(i,c/r-a),w=Math.min(o,u/s-l);t&&e.drawImage(t,f,d,g,m,v,b,x,w)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=sP(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let i,o=this._element.width,a=this._element.height,l=1,c=1,u=0,f=0,d=0,g=0;return!e||e.alignX===$t&&e.alignY===$t?(l=t/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=oB(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(u=-i),e.alignX==="Max"&&(u=i),i=(r-a*c)/2,e.alignY==="Min"&&(f=-i),e.alignY==="Max"&&(f=i)),e.meetOrSlice==="slice"&&(l=c=aB(this._element,s),i=o-t/l,e.alignX==="Mid"&&(d=i/2),e.alignX==="Max"&&(d=i),i=a-r/c,e.alignY==="Mid"&&(g=i/2),e.alignY==="Max"&&(g=i),o=t/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:f,cropX:d,cropY:g}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=Xe(e,ZB);return Promise.all([yd(i,L(L({},t),{},{crossOrigin:o})),r&&eu(r,t),s&&eu([s],t),dp(l,t)]).then(c=>{let[u,f=[],[d]=[],g={}]=c;return new this(u,L(L({},l),{},{src:i,filters:f,resizeFilter:d},g))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return yd(e,{crossOrigin:t,signal:r}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=Ds(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"]||s.href,t,s).catch(i=>(Ts("log","Unable to parse Image",i),null))}}function Jg(n){if(!KU.test(n.nodeName))return{};const e=n.getAttribute("viewBox");let t,r,s=1,i=1,o=0,a=0;const l=n.getAttribute("width"),c=n.getAttribute("height"),u=n.getAttribute("x")||0,f=n.getAttribute("y")||0,d=!(e&&Db.test(e)),g=!l||!c||l==="100%"||c==="100%";let m="",v=0,b=0;if(d&&(u||f)&&n.parentNode&&n.parentNode.nodeName!=="#document"&&(m=" translate("+en(u||"0")+" "+en(f||"0")+") ",t=(n.getAttribute("transform")||"")+m,n.setAttribute("transform",t),n.removeAttribute("x"),n.removeAttribute("y")),d&&g)return{width:0,height:0};const x={width:0,height:0};if(d)return x.width=en(l),x.height=en(c),x;const w=e.match(Db);o=-parseFloat(w[1]),a=-parseFloat(w[2]);const S=parseFloat(w[3]),k=parseFloat(w[4]);x.minX=o,x.minY=a,x.viewBoxWidth=S,x.viewBoxHeight=k,g?(x.width=S,x.height=k):(x.width=en(l),x.height=en(c),s=x.width/S,i=x.height/k);const O=sP(n.getAttribute("preserveAspectRatio")||"");if(O.alignX!==$t&&(O.meetOrSlice==="meet"&&(i=s=s>i?i:s),O.meetOrSlice==="slice"&&(i=s=s>i?s:i),v=x.width-S*s,b=x.height-k*s,O.alignX==="Mid"&&(v/=2),O.alignY==="Mid"&&(b/=2),O.alignX==="Min"&&(v=0),O.alignY==="Min"&&(b=0)),s===1&&i===1&&o===0&&a===0&&u===0&&f===0)return x;if((u||f)&&n.parentNode.nodeName!=="#document"&&(m=" translate("+en(u||"0")+" "+en(f||"0")+") "),t=m+" matrix("+s+" 0 0 "+i+" "+(o*s+v)+" "+(a*i+b)+") ",n.nodeName==="svg"){for(r=n.ownerDocument.createElementNS(U0,"g");n.firstChild;)r.appendChild(n.firstChild);n.appendChild(r)}else r=n,r.removeAttribute("x"),r.removeAttribute("y"),t=r.getAttribute("transform")+t;return r.setAttribute("transform",t),x}F(tn,"type","Image"),F(tn,"cacheProperties",[...Rs,...FP]),F(tn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),F(tn,"CSS_CANVAS","canvas-img"),F(tn,"ATTRIBUTE_NAMES",[...Mi,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ce.setClass(tn),ce.setSVGClass(tn);const bf=n=>n.tagName.replace("svg:",""),ez=pp(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function UP(n,e){let t,r,s,i,o=[];for(s=0,i=e.length;s<i;s++)t=e[s],r=n.getElementsByTagNameNS("http://www.w3.org/2000/svg",t),o=o.concat(Array.from(r));return o}const tz=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Zg="xlink:href";function BP(n,e){var t;const r=((t=e.getAttribute(Zg))===null||t===void 0?void 0:t.slice(1))||"",s=n.getElementById(r);if(s&&s.getAttribute(Zg)&&BP(n,s),s&&(tz.forEach(i=>{const o=s.getAttribute(i);!e.hasAttribute(i)&&o&&e.setAttribute(i,o)}),!e.children.length)){const i=s.cloneNode(!0);for(;i.firstChild;)e.appendChild(i.firstChild)}e.removeAttribute(Zg)}const nz=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function rz(n){const e=n.getElementsByTagName("style"),t={};for(let r=0;r<e.length;r++){const s=(e[r].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");s.trim()!==""&&s.split("}").filter((i,o,a)=>a.length>1&&i.trim()).forEach(i=>{if((i.match(/{/g)||[]).length>1&&i.trim().startsWith("@"))return;const o=i.split("{"),a={},l=o[1].trim().split(";").filter(function(c){return c.trim()});for(let c=0;c<l.length;c++){const u=l[c].split(":"),f=u[0].trim(),d=u[1].trim();a[f]=d}(i=o[0].trim()).split(",").forEach(c=>{(c=c.replace(/^svg/i,"").trim())!==""&&(t[c]=L(L({},t[c]||{}),a))})})}return t}const sS=n=>ce.getSVGClass(bf(n).toLowerCase());class sz{constructor(e,t,r,s,i){this.elements=e,this.options=t,this.reviver=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s,this.clipPaths=i,this.gradientDefs=function(o){const a=UP(o,nz),l={};let c=a.length;for(;c--;){const u=a[c];u.getAttribute("xlink:href")&&BP(o,u);const f=u.getAttribute("id");f&&(l[f]=u)}return l}(s),this.cssRules=rz(s)}parse(){return Promise.all(this.elements.map(e=>this.createObject(e)))}async createObject(e){const t=sS(e);if(t){const r=await t.fromElement(e,this.options,this.cssRules);return this.resolveGradient(r,e,lt),this.resolveGradient(r,e,Wt),r instanceof tn&&r._originalElement?Xg(r,r.parsePreserveAspectRatioAttribute()):Xg(r),await this.resolveClipPath(r,e),this.reviver&&this.reviver(e,r),r}return null}extractPropertyDefinition(e,t,r){const s=e[t],i=this.regexUrl;if(!i.test(s))return;i.lastIndex=0;const o=i.exec(s)[1];return i.lastIndex=0,r[o]}resolveGradient(e,t,r){const s=this.extractPropertyDefinition(e,r,this.gradientDefs);if(s){const i=t.getAttribute(r+"-opacity"),o=ac.fromElement(s,e,L(L({},this.options),{},{opacity:i}));e.set(r,o)}}async resolveClipPath(e,t,r){const s=this.extractPropertyDefinition(e,"clipPath",this.clipPaths);if(s){const i=In(e.calcTransformMatrix()),o=s[0].parentElement;let a=t;for(;!r&&a.parentElement&&a.getAttribute("clip-path")!==e.clipPath;)a=a.parentElement;a.parentElement.appendChild(o);const l=yf("".concat(a.getAttribute("transform")||""," ").concat(o.getAttribute("originalTransform")||""));o.setAttribute("transform","matrix(".concat(l.join(","),")"));const c=await Promise.all(s.map(w=>sS(w).fromElement(w,this.options,this.cssRules).then(S=>(Xg(S),S.fillRule=S.clipRule,delete S.clipRule,S)))),u=c.length===1?c[0]:new Dn(c),f=vt(i,u.calcTransformMatrix());u.clipPath&&await this.resolveClipPath(u,a,o.getAttribute("clip-path")?a:void 0);const{scaleX:d,scaleY:g,angle:m,skewX:v,translateX:b,translateY:x}=rl(f);u.set({flipX:!1,flipY:!1}),u.set({scaleX:d,scaleY:g,angle:m,skewX:v,skewY:0}),u.setPositionByOrigin(new z(b,x),xe,xe),e.clipPath=u}else delete e.clipPath}}const iS=n=>YU.test(bf(n)),oS=()=>({objects:[],elements:[],options:{},allElements:[]});async function iz(n,e){let{crossOrigin:t,signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r&&r.aborted)return Ts("log",new jk("parseSVGDocument")),oS();const s=n.documentElement;(function(u){const f=UP(u,["use","svg:use"]),d=["x","y","xlink:href","href","transform"];for(const g of f){const m=g.attributes,v={};for(const P of m)P.value&&(v[P.name]=P.value);const b=(v["xlink:href"]||v.href||"").slice(1);if(b==="")return;const x=u.getElementById(b);if(x===null)return;let w=x.cloneNode(!0);const S=w.attributes,k={};for(const P of S)P.value&&(k[P.name]=P.value);const{x:O=0,y:M=0,transform:E=""}=v,T="".concat(E," ").concat(k.transform||""," translate(").concat(O,", ").concat(M,")");if(Jg(w),/^svg$/i.test(w.nodeName)){const P=w.ownerDocument.createElementNS(U0,"g");Object.entries(k).forEach(A=>{let[D,N]=A;return P.setAttributeNS(U0,D,N)}),P.append(...w.childNodes),w=P}for(const P of m){if(!P)continue;const{name:A,value:D}=P;if(!d.includes(A))if(A==="style"){const N={};$0(D,N),Object.entries(k).forEach(H=>{let[ne,Q]=H;N[ne]=Q}),$0(k.style||"",N);const R=Object.entries(N).map(H=>H.join(":")).join(";");w.setAttribute(A,R)}else!k[A]&&w.setAttribute(A,D)}w.setAttribute("transform",T),w.setAttribute("instantiated_by_use","1"),w.removeAttribute("id"),g.parentNode.replaceChild(w,g)}})(n);const i=Array.from(s.getElementsByTagName("*")),o=L(L({},Jg(s)),{},{crossOrigin:t,signal:r}),a=i.filter(u=>(Jg(u),iS(u)&&!function(f){let d=f;for(;d&&(d=d.parentElement);)if(d&&d.nodeName&&ez.test(bf(d))&&!d.getAttribute("instantiated_by_use"))return!0;return!1}(u)));if(!a||a&&!a.length)return L(L({},oS()),{},{options:o,allElements:i});const l={};return i.filter(u=>bf(u)==="clipPath").forEach(u=>{u.setAttribute("originalTransform",u.getAttribute("transform")||"");const f=u.getAttribute("id");l[f]=Array.from(u.getElementsByTagName("*")).filter(d=>iS(d))}),{objects:await new sz(a,o,e,n,l).parse(),elements:a,options:o,allElements:i}}function K0(n,e,t){return iz(new(ku()).DOMParser().parseFromString(n.trim(),"text/xml"),e,t)}const yp=n=>n.webgl!==void 0,gx="precision highp float",oz=`
    `.concat(gx,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),az=["type"],lz=["type"],cz=new RegExp(gx,"g");class ft{get type(){return this.constructor.type}constructor(){let e=Xe(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},az);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return oz}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Ur();s!=="highp"&&(t=t.replace(cz,gx.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new Ar("Vertex, fragment shader or program creation error");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Ar("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Ar("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Ar('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let i=0;i<r.length;i++)s[r[i]]=e.getUniformLocation(t,r[i]);return s}sendAttributeData(e,t,r){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){yp(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=Ln({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return L({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Xe(e,lz))}}F(ft,"type","BaseFilter"),F(ft,"uniformLocations",[]);const uz={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Ph extends ft{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(uz[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new je(this.color).getSource(),s=this.alpha,i=r[0]*s,o=r[1]*s,a=r[2]*s,l=1-s;for(let c=0;c<t.length;c+=4){const u=t[c],f=t[c+1],d=t[c+2];let g,m,v;switch(this.mode){case"multiply":g=u*i/255,m=f*o/255,v=d*a/255;break;case"screen":g=255-(255-u)*(255-i)/255,m=255-(255-f)*(255-o)/255,v=255-(255-d)*(255-a)/255;break;case"add":g=u+i,m=f+o,v=d+a;break;case"difference":g=Math.abs(u-i),m=Math.abs(f-o),v=Math.abs(d-a);break;case"subtract":g=u-i,m=f-o,v=d-a;break;case"darken":g=Math.min(u,i),m=Math.min(f,o),v=Math.min(d,a);break;case"lighten":g=Math.max(u,i),m=Math.max(f,o),v=Math.max(d,a);break;case"overlay":g=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,m=o<128?2*f*o/255:255-2*(255-f)*(255-o)/255,v=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":g=i+u-2*i*u/255,m=o+f-2*o*f/255,v=a+d-2*a*d/255;break;case"tint":g=i+u*l,m=o+f*l,v=a+d*l}t[c]=g,t[c+1]=m,t[c+2]=v}}sendUniformData(e,t){const r=new je(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}F(Ph,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),F(Ph,"type","BlendColor"),F(Ph,"uniformLocations",["uColor"]),ce.setClass(Ph);const hz={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},dz=["type","image"];class Oh extends ft{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return hz[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=Ps());const a=i.blendImage,l=a.getContext("2d");a.width!==r||a.height!==s?(a.width=r,a.height=s):l.clearRect(0,0,r,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,s);const c=l.getImageData(0,0,r,s).data;for(let u=0;u<t.length;u+=4){const f=t[u],d=t[u+1],g=t[u+2],m=t[u+3],v=c[u],b=c[u+1],x=c[u+2],w=c[u+3];switch(this.mode){case"multiply":t[u]=f*v/255,t[u+1]=d*b/255,t[u+2]=g*x/255,t[u+3]=m*w/255;break;case"mask":t[u+3]=w}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return L(L({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,i=Xe(e,dz);return tn.fromObject(s,t).then(o=>new this(L(L({},i),{},{image:o})))}}F(Oh,"type","BlendImage"),F(Oh,"defaults",{mode:"multiply",alpha:1}),F(Oh,"uniformLocations",["uTransformMatrix","uImage"]),ce.setClass(Oh);class Ah extends ft{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){yp(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;this.aspectRatio=r/s,this.horizontal=!0;let i=this.getBlurValue()*r;const o=new Uint8ClampedArray(t),a=15,l=4*r;for(let c=0;c<t.length;c+=4){let u=0,f=0,d=0,g=0,m=0;const v=c-c%l,b=v+l;for(let x=-14;x<a;x++){const w=x/a,S=4*Math.floor(i*w),k=1-Math.abs(w);let O=c+S;O<v?O=v:O>b&&(O=b);const M=t[O+3]*k;u+=t[O]*M,f+=t[O+1]*M,d+=t[O+2]*M,g+=M,m+=k}o[c]=u/g,o[c+1]=f/g,o[c+2]=d/g,o[c+3]=g/m}this.horizontal=!1,i=this.getBlurValue()*s;for(let c=0;c<o.length;c+=4){let u=0,f=0,d=0,g=0,m=0;const v=c%l,b=o.length-l+v;for(let x=-14;x<a;x++){const w=x/a,S=Math.floor(i*w)*l,k=1-Math.abs(w);let O=c+S;O<v?O=v:O>b&&(O=b);const M=o[O+3]*k;u+=o[O]*M,f+=o[O+1]*M,d+=o[O+2]*M,g+=M,m+=k}t[c]=u/g,t[c+1]=f/g,t[c+2]=d/g,t[c+3]=g/m}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}F(Ah,"type","Blur"),F(Ah,"defaults",{blur:0}),F(Ah,"uniformLocations",["uDelta"]),ce.setClass(Ah);class Ih extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}F(Ih,"type","Brightness"),F(Ih,"defaults",{brightness:0}),F(Ih,"uniformLocations",["uBrightness"]),ce.setClass(Ih);const zP={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class pa extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(t[i]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[i+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[i+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!s){const c=t[i+3];t[i]+=c*r[3],t[i+1]+=c*r[8],t[i+2]+=c*r[13],t[i+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return L(L({},super.toObject()),{},{matrix:[...this.matrix]})}}function Lo(n,e){var t;const r=(F(t=class extends pa{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),F(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ce.setClass(r,n),r}F(pa,"type","ColorMatrix"),F(pa,"defaults",zP),F(pa,"uniformLocations",["uColorMatrix","uConstants"]),ce.setClass(pa);Lo("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Lo("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Lo("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Lo("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Lo("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Lo("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Lo("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class aS extends ft{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){yp(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>ce.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}F(aS,"type","Composed"),ce.setClass(aS);class Rh extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}F(Rh,"type","Contrast"),F(Rh,"defaults",{contrast:0}),F(Rh,"uniformLocations",["uContrast"]),ce.setClass(Rh);const fz={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Dh extends ft{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return fz[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,f=this.opaque?1:0;let d,g,m,v,b,x,w,S,k,O,M,E,T;for(M=0;M<l;M++)for(O=0;O<a;O++){for(b=4*(M*a+O),d=0,g=0,m=0,v=0,T=0;T<i;T++)for(E=0;E<i;E++)w=M+T-o,x=O+E-o,w<0||w>=l||x<0||x>=a||(S=4*(w*a+x),k=s[T*i+E],d+=r[S]*k,g+=r[S+1]*k,m+=r[S+2]*k,f||(v+=r[S+3]*k));u[b]=d,u[b+1]=g,u[b+2]=m,u[b+3]=f?r[b+3]:v}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return L(L({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}F(Dh,"type","Convolute"),F(Dh,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),F(Dh,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ce.setClass(Dh);const VP="Gamma";class Nh extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],i=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:VP,gamma:this.gamma.concat()}}}F(Nh,"type",VP),F(Nh,"defaults",{gamma:[1,1,1]}),F(Nh,"uniformLocations",["uGamma"]),ce.setClass(Nh);const pz={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Mh extends ft{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2];switch(this.mode){case"average":r=(i+o+a)/3;break;case"lightness":r=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":r=.21*i+.72*o+.07*a}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return pz[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}F(Mh,"type","Grayscale"),F(Mh,"defaults",{mode:"average"}),F(Mh,"uniformLocations",["uMode"]),ce.setClass(Mh);const gz=L(L({},zP),{},{rotation:0});class em extends pa{calculateMatrix(){const e=this.rotation*Math.PI,t=Es(e),r=ks(e),s=1/3,i=Math.sqrt(s)*r,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}F(em,"type","HueRotation"),F(em,"defaults",gz),ce.setClass(em);class jh extends ft{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}F(jh,"type","Invert"),F(jh,"defaults",{alpha:!1,invert:!0}),F(jh,"uniformLocations",["uInvert","uAlpha"]),ce.setClass(jh);class Lh extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*r;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}F(Lh,"type","Noise"),F(Lh,"defaults",{noise:0}),F(Lh,"uniformLocations",["uNoise","uSeed"]),ce.setClass(Lh);class Fh extends ft{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*i*r+4*o,l=t[a],c=t[a+1],u=t[a+2],f=t[a+3];for(let d=i;d<Math.min(i+this.blocksize,s);d++)for(let g=o;g<Math.min(o+this.blocksize,r);g++){const m=4*d*r+4*g;t[m]=l,t[m+1]=c,t[m+2]=u,t[m+3]=f}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}F(Fh,"type","Pixelate"),F(Fh,"defaults",{blocksize:4}),F(Fh,"uniformLocations",["uBlocksize"]),ce.setClass(Fh);class Uh extends ft{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new je(this.color).getSource(),i=[s[0]-r,s[1]-r,s[2]-r],o=[s[0]+r,s[1]+r,s[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>i[0]&&c>i[1]&&u>i[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new je(this.color).getSource(),s=this.distance,i=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],o=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}F(Uh,"type","RemoveColor"),F(Uh,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),F(Uh,"uniformLocations",["uLow","uHigh"]),ce.setClass(Uh);class Bh extends ft{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let i=1;i<=r;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){yp(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*r),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,r,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,f=r*a;const d=e.filterBackend.resources;let g=0,m=0;const v=t;let b=0;d.sliceByTwo||(d.sliceByTwo=Ps());const x=d.sliceByTwo;(x.width<1.5*t||x.height<r)&&(x.width=1.5*t,x.height=r);const w=x.getContext("2d");for(w.clearRect(0,0,1.5*t,r),w.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=u,r=f,s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,l=!0),i<Math.floor(f*a)?f=Math.floor(f*a):(f=i,c=!0),w.drawImage(x,g,m,t,r,v,b,u,f),g=v,m=b,b+=f;return w.getImageData(g,m,s,i)}lanczosResize(e,t,r,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,f=this.rcpScaleY,d=2/this.rcpScaleX,g=2/this.rcpScaleY,m=Math.ceil(u*this.lanczosLobes/2),v=Math.ceil(f*this.lanczosLobes/2),b={},x={x:0,y:0},w={x:0,y:0};return function S(k){let O,M,E,T,P,A,D,N,R,H,ne;for(x.x=(k+.5)*u,w.x=Math.floor(x.x),O=0;O<i;O++){for(x.y=(O+.5)*f,w.y=Math.floor(x.y),P=0,A=0,D=0,N=0,R=0,M=w.x-m;M<=w.x+m;M++)if(!(M<0||M>=t)){H=Math.floor(1e3*Math.abs(M-x.x)),b[H]||(b[H]={});for(let Q=w.y-v;Q<=w.y+v;Q++)Q<0||Q>=r||(ne=Math.floor(1e3*Math.abs(Q-x.y)),b[H][ne]||(b[H][ne]=c(Math.sqrt(Math.pow(H*d,2)+Math.pow(ne*g,2))/1e3)),E=b[H][ne],E>0&&(T=4*(Q*t+M),P+=E,A+=E*o[T],D+=E*o[T+1],N+=E*o[T+2],R+=E*o[T+3]))}T=4*(O*s+k),l[T]=A/P,l[T+1]=D/P,l[T+2]=N/P,l[T+3]=R/P}return++k<s?S(k):a}(0)}bilinearFiltering(e,t,r,s,i){let o,a,l,c,u,f,d,g,m,v,b,x,w,S=0;const k=this.rcpScaleX,O=this.rcpScaleY,M=4*(t-1),E=e.imageData.data,T=e.ctx.createImageData(s,i),P=T.data;for(d=0;d<i;d++)for(g=0;g<s;g++)for(u=Math.floor(k*g),f=Math.floor(O*d),m=k*g-u,v=O*d-f,w=4*(f*t+u),b=0;b<4;b++)o=E[w+b],a=E[w+4+b],l=E[w+M+b],c=E[w+M+4+b],x=o*(1-m)*(1-v)+a*m*(1-v)+l*v*(1-m)+c*m*v,P[S++]=x;return T}hermiteFastResize(e,t,r,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,f=e.ctx.createImageData(s,i),d=f.data;for(let g=0;g<i;g++)for(let m=0;m<s;m++){const v=4*(m+g*s);let b=0,x=0,w=0,S=0,k=0,O=0,M=0;const E=(g+.5)*a;for(let T=Math.floor(g*a);T<(g+1)*a;T++){const P=Math.abs(E-(T+.5))/c,A=(m+.5)*o,D=P*P;for(let N=Math.floor(m*o);N<(m+1)*o;N++){let R=Math.abs(A-(N+.5))/l;const H=Math.sqrt(D+R*R);H>1&&H<-1||(b=2*H*H*H-3*H*H+1,b>0&&(R=4*(N+T*t),M+=b*u[R+3],w+=b,u[R+3]<255&&(b=b*u[R+3]/250),S+=b*u[R],k+=b*u[R+1],O+=b*u[R+2],x+=b))}}d[v]=S/x,d[v+1]=k/x,d[v+2]=O/x,d[v+3]=M/w}return f}}F(Bh,"type","Resize"),F(Bh,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),F(Bh,"uniformLocations",["uDelta","uTaps"]),ce.setClass(Bh);class zh extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a);t[s]+=l!==i?(l-i)*r:0,t[s+1]+=l!==o?(l-o)*r:0,t[s+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}F(zh,"type","Saturation"),F(zh,"defaults",{saturation:0}),F(zh,"uniformLocations",["uSaturation"]),ce.setClass(zh);class Vh extends ft{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,u=2*Math.abs(l-c)/255*r;t[s]+=l!==i?(l-i)*u:0,t[s+1]+=l!==o?(l-o)*u:0,t[s+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}F(Vh,"type","Vibrance"),F(Vh,"defaults",{vibrance:0}),F(Vh,"uniformLocations",["uVibrance"]),ce.setClass(Vh);const Ao=y.forwardRef(({className:n,type:e,...t},r)=>p.jsx("input",{type:e,className:we("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ao.displayName="Input";var mz=(n,e,t,r,s,i,o,a)=>{let l=document.documentElement,c=["light","dark"];function u(g){(Array.isArray(n)?n:[n]).forEach(m=>{let v=m==="class",b=v&&i?s.map(x=>i[x]||x):s;v?(l.classList.remove(...b),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(m,g)}),f(g)}function f(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function d(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let g=localStorage.getItem(e)||t,m=o&&g==="system"?d():g;u(m)}catch{}},vz=y.createContext(void 0),yz={setTheme:n=>{},themes:[]},xz=()=>{var n;return(n=y.useContext(vz))!=null?n:yz};y.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([t,e,i,n,a,o,r,s]).slice(1,-1);return y.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${mz.toString()})(${u})`}})});function wz({onSelectionChange:n,onCanvasChange:e}){const t=y.useRef(null),[r,s]=y.useState(null),[i,o]=y.useState(100),[a,l]=y.useState(!0);y.useEffect(()=>{if(!t.current)return;const d=t.current.parentElement,g=d.clientWidth,m=d.clientHeight,v=1e3,b=700,x=Math.max(v,g-40),w=Math.max(b,m-40),S=new X0(t.current,{width:x,height:w,backgroundColor:"#ffffff"});if(a){const O=[],M=S.width,E=S.height;for(let T=0;T<M/20;T++)O.push(new ss([T*20,0,T*20,E],{stroke:"#e2e8f0",strokeWidth:1,selectable:!1,evented:!1}));for(let T=0;T<E/20;T++)O.push(new ss([0,T*20,M,T*20],{stroke:"#e2e8f0",strokeWidth:1,selectable:!1,evented:!1}));O.forEach(T=>{S.add(T)})}return S.on("mouse:down",k=>{const O=k.target;if(O&&O.type==="group"){const M=O.getObjects().filter(E=>E.type==="path");if(M.length>0){const E=M[0];E.fill&&S.fire("color:selected",{color:E.fill,target:E,allPaths:M.filter(T=>T.fill===E.fill)})}}else O&&O.fill&&S.fire("color:selected",{color:O.fill,target:O,allPaths:[O]})}),S.on("selection:created",k=>{var O;n==null||n(((O=k.selected)==null?void 0:O[0])||null)}),S.on("selection:updated",k=>{var O;n==null||n(((O=k.selected)==null?void 0:O[0])||null)}),S.on("selection:cleared",()=>{n==null||n(null)}),s(S),e==null||e(S),()=>{S.dispose()}},[a,n,e]);const c=d=>{if(!r)return;const g=d?Math.min(i+25,200):Math.max(i-25,25);o(g),r.setZoom(g/100),r.renderAll()},u=()=>{l(!a)},f=()=>{r&&(r.discardActiveObject(),r.renderAll())};return p.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50 dark:bg-slate-900 min-h-0",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-2 flex items-center justify-between","data-testid":"canvas-toolbar",children:[p.jsx("div",{className:"flex items-center space-x-4",children:p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Zoom:"}),p.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>c(!1),"data-testid":"button-zoom-out",children:p.jsx(h4,{className:"h-4 w-4"})}),p.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300 min-w-[3rem]","data-testid":"text-zoom",children:[i,"%"]}),p.jsx(ye,{variant:"ghost",size:"sm",onClick:()=>c(!0),"data-testid":"button-zoom-in",children:p.jsx(u4,{className:"h-4 w-4"})})]})}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs(ye,{variant:a?"default":"outline",size:"sm",onClick:u,"data-testid":"button-toggle-grid",children:[p.jsx(Xj,{className:"h-4 w-4 mr-1"}),"Grid"]}),p.jsxs(ye,{variant:"outline",size:"sm",onClick:f,"data-testid":"button-preview",children:[p.jsx(Wj,{className:"h-4 w-4 mr-1"}),"Preview"]})]})]}),p.jsxs("div",{className:"flex-1 flex items-center justify-center p-4 relative min-h-0","data-testid":"canvas-container",children:[p.jsxs("div",{className:"relative",children:[p.jsx("canvas",{ref:t,className:"border border-slate-200 dark:border-slate-300 rounded-lg shadow-xl","data-testid":"design-canvas"}),p.jsx("div",{className:"absolute -right-1 -bottom-1 w-3 h-3 bg-primary rounded-full cursor-se-resize","data-testid":"resize-handle-se"}),p.jsx("div",{className:"absolute -right-1 top-1/2 transform -translate-y-1/2 w-3 h-3 bg-primary rounded-full cursor-e-resize","data-testid":"resize-handle-e"}),p.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-3 h-3 bg-primary rounded-full cursor-s-resize","data-testid":"resize-handle-s"})]}),p.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm text-white text-xs px-2 py-1 rounded","data-testid":"canvas-dimensions",children:[r?`${r.width}  ${r.height}`:"600  400"," px"]})]})]})}var _z=y.createContext(void 0);function xp(n){const e=y.useContext(_z);return n||e||"ltr"}function q0(n,[e,t]){return Math.min(t,Math.max(e,n))}function bz(n,e){return y.useReducer((t,r)=>e[t][r]??t,n)}var mx="ScrollArea",[$P,yW]=Br(mx),[Sz,Fn]=$P(mx),WP=y.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=n,[a,l]=y.useState(null),[c,u]=y.useState(null),[f,d]=y.useState(null),[g,m]=y.useState(null),[v,b]=y.useState(null),[x,w]=y.useState(0),[S,k]=y.useState(0),[O,M]=y.useState(!1),[E,T]=y.useState(!1),P=Ce(e,D=>l(D)),A=xp(s);return p.jsx(Sz,{scope:t,type:r,dir:A,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:f,onContentChange:d,scrollbarX:g,onScrollbarXChange:m,scrollbarXEnabled:O,onScrollbarXEnabledChange:M,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:E,onScrollbarYEnabledChange:T,onCornerWidthChange:w,onCornerHeightChange:k,children:p.jsx(ge.div,{dir:A,...o,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":S+"px",...n.style}})})});WP.displayName=mx;var HP="ScrollAreaViewport",GP=y.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,o=Fn(HP,t),a=y.useRef(null),l=Ce(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(ge.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GP.displayName=HP;var Hr="ScrollAreaScrollbar",vx=y.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Fn(Hr,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=n.orientation==="horizontal";return y.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?p.jsx(Cz,{...r,ref:e,forceMount:t}):s.type==="scroll"?p.jsx(Tz,{...r,ref:e,forceMount:t}):s.type==="auto"?p.jsx(XP,{...r,ref:e,forceMount:t}):s.type==="always"?p.jsx(yx,{...r,ref:e}):null});vx.displayName=Hr;var Cz=y.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Fn(Hr,n.__scopeScrollArea),[i,o]=y.useState(!1);return y.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),p.jsx(cn,{present:t||i,children:p.jsx(XP,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Tz=y.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Fn(Hr,n.__scopeScrollArea),i=n.orientation==="horizontal",o=_p(()=>l("SCROLL_END"),100),[a,l]=bz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),y.useEffect(()=>{const c=s.viewport,u=i?"scrollLeft":"scrollTop";if(c){let f=c[u];const d=()=>{const g=c[u];f!==g&&(l("SCROLL"),o()),f=g};return c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[s.viewport,i,l,o]),p.jsx(cn,{present:t||a!=="hidden",children:p.jsx(yx,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:te(n.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:te(n.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),XP=y.forwardRef((n,e)=>{const t=Fn(Hr,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,o]=y.useState(!1),a=n.orientation==="horizontal",l=_p(()=>{if(t.viewport){const c=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?c:u)}},10);return il(t.viewport,l),il(t.content,l),p.jsx(cn,{present:r||i,children:p.jsx(yx,{"data-state":i?"visible":"hidden",...s,ref:e})})}),yx=y.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=Fn(Hr,n.__scopeScrollArea),i=y.useRef(null),o=y.useRef(0),[a,l]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=JP(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:d=>i.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,g){return Iz(d,o.current,a,g)}return t==="horizontal"?p.jsx(Ez,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const d=s.viewport.scrollLeft,g=lS(d,a,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:d=>{s.viewport&&(s.viewport.scrollLeft=d)},onDragScroll:d=>{s.viewport&&(s.viewport.scrollLeft=f(d,s.dir))}}):t==="vertical"?p.jsx(kz,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const d=s.viewport.scrollTop,g=lS(d,a);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:d=>{s.viewport&&(s.viewport.scrollTop=d)},onDragScroll:d=>{s.viewport&&(s.viewport.scrollTop=f(d))}}):null}),Ez=y.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=Fn(Hr,n.__scopeScrollArea),[o,a]=y.useState(),l=y.useRef(null),c=Ce(e,l,i.onScrollbarXChange);return y.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(KP,{"data-orientation":"horizontal",...s,ref:c,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wp(t)+"px",...n.style},onThumbPointerDown:u=>n.onThumbPointerDown(u.x),onDragScroll:u=>n.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(i.viewport){const d=i.viewport.scrollLeft+u.deltaX;n.onWheelScroll(d),eO(d,f)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Cf(o.paddingLeft),paddingEnd:Cf(o.paddingRight)}})}})}),kz=y.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=Fn(Hr,n.__scopeScrollArea),[o,a]=y.useState(),l=y.useRef(null),c=Ce(e,l,i.onScrollbarYChange);return y.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(KP,{"data-orientation":"vertical",...s,ref:c,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wp(t)+"px",...n.style},onThumbPointerDown:u=>n.onThumbPointerDown(u.y),onDragScroll:u=>n.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(i.viewport){const d=i.viewport.scrollTop+u.deltaY;n.onWheelScroll(d),eO(d,f)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Cf(o.paddingTop),paddingEnd:Cf(o.paddingBottom)}})}})}),[Pz,YP]=$P(Hr),KP=y.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:f,...d}=n,g=Fn(Hr,t),[m,v]=y.useState(null),b=Ce(e,P=>v(P)),x=y.useRef(null),w=y.useRef(""),S=g.viewport,k=r.content-r.viewport,O=qe(u),M=qe(l),E=_p(f,10);function T(P){if(x.current){const A=P.clientX-x.current.left,D=P.clientY-x.current.top;c({x:A,y:D})}}return y.useEffect(()=>{const P=A=>{const D=A.target;(m==null?void 0:m.contains(D))&&O(A,k)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[S,m,k,O]),y.useEffect(M,[r,M]),il(m,E),il(g.content,E),p.jsx(Pz,{scope:t,scrollbar:m,hasThumb:s,onThumbChange:qe(i),onThumbPointerUp:qe(o),onThumbPositionChange:M,onThumbPointerDown:qe(a),children:p.jsx(ge.div,{...d,ref:b,style:{position:"absolute",...d.style},onPointerDown:te(n.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),x.current=m.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),T(P))}),onPointerMove:te(n.onPointerMove,T),onPointerUp:te(n.onPointerUp,P=>{const A=P.target;A.hasPointerCapture(P.pointerId)&&A.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Sf="ScrollAreaThumb",qP=y.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=YP(Sf,n.__scopeScrollArea);return p.jsx(cn,{present:t||s.hasThumb,children:p.jsx(Oz,{ref:e,...r})})}),Oz=y.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=Fn(Sf,t),o=YP(Sf,t),{onThumbPositionChange:a}=o,l=Ce(e,f=>o.onThumbChange(f)),c=y.useRef(void 0),u=_p(()=>{c.current&&(c.current(),c.current=void 0)},100);return y.useEffect(()=>{const f=i.viewport;if(f){const d=()=>{if(u(),!c.current){const g=Rz(f,a);c.current=g,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[i.viewport,u,a]),p.jsx(ge.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:te(n.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),m=f.clientX-g.left,v=f.clientY-g.top;o.onThumbPointerDown({x:m,y:v})}),onPointerUp:te(n.onPointerUp,o.onThumbPointerUp)})});qP.displayName=Sf;var xx="ScrollAreaCorner",QP=y.forwardRef((n,e)=>{const t=Fn(xx,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?p.jsx(Az,{...n,ref:e}):null});QP.displayName=xx;var Az=y.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=Fn(xx,t),[i,o]=y.useState(0),[a,l]=y.useState(0),c=!!(i&&a);return il(s.scrollbarX,()=>{var f;const u=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),il(s.scrollbarY,()=>{var f;const u=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),c?p.jsx(ge.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Cf(n){return n?parseInt(n,10):0}function JP(n,e){const t=n/e;return isNaN(t)?0:t}function wp(n){const e=JP(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function Iz(n,e,t,r="ltr"){const s=wp(t),i=s/2,o=e||i,a=s-o,l=t.scrollbar.paddingStart+o,c=t.scrollbar.size-t.scrollbar.paddingEnd-a,u=t.content-t.viewport,f=r==="ltr"?[0,u]:[u*-1,0];return ZP([l,c],f)(n)}function lS(n,e,t="ltr"){const r=wp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=t==="ltr"?[0,o]:[o*-1,0],c=q0(n,l);return ZP([0,o],[0,a])(c)}function ZP(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function eO(n,e){return n>0&&n<e}var Rz=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},o=t.left!==i.left,a=t.top!==i.top;(o||a)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function _p(n,e){const t=qe(n),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function il(n,e){const t=qe(e);Tt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var tO=WP,Dz=GP,Nz=QP;const nO=y.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(tO,{ref:r,className:we("relative overflow-hidden",n),...t,children:[p.jsx(Dz,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(rO,{}),p.jsx(Nz,{})]}));nO.displayName=tO.displayName;const rO=y.forwardRef(({className:n,orientation:e="vertical",...t},r)=>p.jsx(vx,{ref:r,orientation:e,className:we("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:p.jsx(qP,{className:"relative flex-1 rounded-full bg-border"})}));rO.displayName=vx.displayName;var tm=0;function wx(){y.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??cS()),document.body.insertAdjacentElement("beforeend",n[1]??cS()),tm++,()=>{tm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tm--}},[])}function cS(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var nm="focusScope.autoFocusOnMount",rm="focusScope.autoFocusOnUnmount",uS={bubbles:!1,cancelable:!0},Mz="FocusScope",bp=y.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,l]=y.useState(null),c=qe(s),u=qe(i),f=y.useRef(null),d=Ce(e,v=>l(v)),g=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let v=function(S){if(g.paused||!a)return;const k=S.target;a.contains(k)?f.current=k:Hs(f.current,{select:!0})},b=function(S){if(g.paused||!a)return;const k=S.relatedTarget;k!==null&&(a.contains(k)||Hs(f.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&Hs(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,g.paused]),y.useEffect(()=>{if(a){dS.add(g);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(nm,uS);a.addEventListener(nm,c),a.dispatchEvent(x),x.defaultPrevented||(jz(zz(sO(a)),{select:!0}),document.activeElement===v&&Hs(a))}return()=>{a.removeEventListener(nm,c),setTimeout(()=>{const x=new CustomEvent(rm,uS);a.addEventListener(rm,u),a.dispatchEvent(x),x.defaultPrevented||Hs(v??document.body,{select:!0}),a.removeEventListener(rm,u),dS.remove(g)},0)}}},[a,c,u,g]);const m=y.useCallback(v=>{if(!t&&!r||g.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(b&&x){const w=v.currentTarget,[S,k]=Lz(w);S&&k?!v.shiftKey&&x===k?(v.preventDefault(),t&&Hs(S,{select:!0})):v.shiftKey&&x===S&&(v.preventDefault(),t&&Hs(k,{select:!0})):x===w&&v.preventDefault()}},[t,r,g.paused]);return p.jsx(ge.div,{tabIndex:-1,...o,ref:d,onKeyDown:m})});bp.displayName=Mz;function jz(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Hs(r,{select:e}),document.activeElement!==t)return}function Lz(n){const e=sO(n),t=hS(e,n),r=hS(e.reverse(),n);return[t,r]}function sO(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function hS(n,e){for(const t of n)if(!Fz(t,{upTo:e}))return t}function Fz(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Uz(n){return n instanceof HTMLInputElement&&"select"in n}function Hs(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Uz(n)&&e&&n.select()}}var dS=Bz();function Bz(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=fS(n,e),n.unshift(e)},remove(e){var t;n=fS(n,e),(t=n[0])==null||t.resume()}}}function fS(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function zz(n){return n.filter(e=>e.tagName!=="A")}var sm="rovingFocusGroup.onEntryFocus",Vz={bubbles:!1,cancelable:!0},Sp="RovingFocusGroup",[Q0,iO,$z]=Kf(Sp),[Wz,oO]=Br(Sp,[$z]),[Hz,Gz]=Wz(Sp),aO=y.forwardRef((n,e)=>p.jsx(Q0.Provider,{scope:n.__scopeRovingFocusGroup,children:p.jsx(Q0.Slot,{scope:n.__scopeRovingFocusGroup,children:p.jsx(Xz,{...n,ref:e})})}));aO.displayName=Sp;var Xz=y.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=n,d=y.useRef(null),g=Ce(e,d),m=xp(i),[v=null,b]=Ja({prop:o,defaultProp:a,onChange:l}),[x,w]=y.useState(!1),S=qe(c),k=iO(t),O=y.useRef(!1),[M,E]=y.useState(0);return y.useEffect(()=>{const T=d.current;if(T)return T.addEventListener(sm,S),()=>T.removeEventListener(sm,S)},[S]),p.jsx(Hz,{scope:t,orientation:r,dir:m,loop:s,currentTabStopId:v,onItemFocus:y.useCallback(T=>b(T),[b]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>E(T=>T+1),[]),onFocusableItemRemove:y.useCallback(()=>E(T=>T-1),[]),children:p.jsx(ge.div,{tabIndex:x||M===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...n.style},onMouseDown:te(n.onMouseDown,()=>{O.current=!0}),onFocus:te(n.onFocus,T=>{const P=!O.current;if(T.target===T.currentTarget&&P&&!x){const A=new CustomEvent(sm,Vz);if(T.currentTarget.dispatchEvent(A),!A.defaultPrevented){const D=k().filter(Q=>Q.focusable),N=D.find(Q=>Q.active),R=D.find(Q=>Q.id===v),ne=[N,R,...D].filter(Boolean).map(Q=>Q.ref.current);uO(ne,u)}}O.current=!1}),onBlur:te(n.onBlur,()=>w(!1))})})}),lO="RovingFocusGroupItem",cO=y.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...o}=n,a=fs(),l=i||a,c=Gz(lO,t),u=c.currentTabStopId===l,f=iO(t),{onFocusableItemAdd:d,onFocusableItemRemove:g}=c;return y.useEffect(()=>{if(r)return d(),()=>g()},[r,d,g]),p.jsx(Q0.ItemSlot,{scope:t,id:l,focusable:r,active:s,children:p.jsx(ge.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:te(n.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:te(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:te(n.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const v=qz(m,c.orientation,c.dir);if(v!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let x=f().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(m.currentTarget);x=c.loop?Qz(x,w+1):x.slice(w+1)}setTimeout(()=>uO(x))}})})})});cO.displayName=lO;var Yz={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Kz(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function qz(n,e,t){const r=Kz(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Yz[r]}function uO(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Qz(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Jz=aO,Zz=cO,eV=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},qo=new WeakMap,$h=new WeakMap,Wh={},im=0,hO=function(n){return n&&(n.host||hO(n.parentNode))},tV=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=hO(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},nV=function(n,e,t,r){var s=tV(e,Array.isArray(n)?n:[n]);Wh[t]||(Wh[t]=new WeakMap);var i=Wh[t],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(a.has(d))u(d);else try{var g=d.getAttribute(r),m=g!==null&&g!=="false",v=(qo.get(d)||0)+1,b=(i.get(d)||0)+1;qo.set(d,v),i.set(d,b),o.push(d),v===1&&m&&$h.set(d,!0),b===1&&d.setAttribute(t,"true"),m||d.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",d,x)}})};return u(e),a.clear(),im++,function(){o.forEach(function(f){var d=qo.get(f)-1,g=i.get(f)-1;qo.set(f,d),i.set(f,g),d||($h.has(f)||f.removeAttribute(r),$h.delete(f)),g||f.removeAttribute(t)}),im--,im||(qo=new WeakMap,qo=new WeakMap,$h=new WeakMap,Wh={})}},_x=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=eV(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),nV(r,s,t,"aria-hidden")):function(){return null}},Pr=function(){return Pr=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pr.apply(this,arguments)};function dO(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function rV(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var wd="right-scroll-bar-position",_d="width-before-scroll-bar",sV="with-scroll-bars-hidden",iV="--removed-body-scroll-bar-size";function om(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function oV(n,e){var t=y.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var aV=typeof window<"u"?y.useLayoutEffect:y.useEffect,pS=new WeakMap;function lV(n,e){var t=oV(null,function(r){return n.forEach(function(s){return om(s,r)})});return aV(function(){var r=pS.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||om(a,null)}),i.forEach(function(a){s.has(a)||om(a,o)})}pS.set(t,n)},[n]),t}function cV(n){return n}function uV(n,e){e===void 0&&(e=cV);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function hV(n){n===void 0&&(n={});var e=uV(null);return e.options=Pr({async:!0,ssr:!1},n),e}var fO=function(n){var e=n.sideCar,t=dO(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Pr({},t))};fO.isSideCarExport=!0;function dV(n,e){return n.useMedium(e),fO}var pO=hV(),am=function(){},Cp=y.forwardRef(function(n,e){var t=y.useRef(null),r=y.useState({onScrollCapture:am,onWheelCapture:am,onTouchMoveCapture:am}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,f=n.shards,d=n.sideCar,g=n.noIsolation,m=n.inert,v=n.allowPinchZoom,b=n.as,x=b===void 0?"div":b,w=n.gapMode,S=dO(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=d,O=lV([t,e]),M=Pr(Pr({},S),s);return y.createElement(y.Fragment,null,u&&y.createElement(k,{sideCar:pO,removeScrollBar:c,shards:f,noIsolation:g,inert:m,setCallbacks:i,allowPinchZoom:!!v,lockRef:t,gapMode:w}),o?y.cloneElement(y.Children.only(a),Pr(Pr({},M),{ref:O})):y.createElement(x,Pr({},M,{className:l,ref:O}),a))});Cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cp.classNames={fullWidth:_d,zeroRight:wd};var fV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pV(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=fV();return e&&n.setAttribute("nonce",e),n}function gV(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function mV(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var vV=function(){var n=0,e=null;return{add:function(t){n==0&&(e=pV())&&(gV(e,t),mV(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yV=function(){var n=vV();return function(e,t){y.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},gO=function(){var n=yV(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},xV={left:0,top:0,right:0,gap:0},lm=function(n){return parseInt(n||"",10)||0},wV=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[lm(t),lm(r),lm(s)]},_V=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return xV;var e=wV(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},bV=gO(),Aa="data-scroll-locked",SV=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(sV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Aa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_d,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wd," .").concat(wd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_d," .").concat(_d,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Aa,`] {
    `).concat(iV,": ").concat(a,`px;
  }
`)},gS=function(){var n=parseInt(document.body.getAttribute(Aa)||"0",10);return isFinite(n)?n:0},CV=function(){y.useEffect(function(){return document.body.setAttribute(Aa,(gS()+1).toString()),function(){var n=gS()-1;n<=0?document.body.removeAttribute(Aa):document.body.setAttribute(Aa,n.toString())}},[])},TV=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;CV();var i=y.useMemo(function(){return _V(s)},[s]);return y.createElement(bV,{styles:SV(i,!e,s,t?"":"!important")})},J0=!1;if(typeof window<"u")try{var Hh=Object.defineProperty({},"passive",{get:function(){return J0=!0,!0}});window.addEventListener("test",Hh,Hh),window.removeEventListener("test",Hh,Hh)}catch{J0=!1}var Qo=J0?{passive:!1}:!1,EV=function(n){return n.tagName==="TEXTAREA"},mO=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!EV(n)&&t[e]==="visible")},kV=function(n){return mO(n,"overflowY")},PV=function(n){return mO(n,"overflowX")},mS=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=vO(n,r);if(s){var i=yO(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},OV=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},AV=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},vO=function(n,e){return n==="v"?kV(e):PV(e)},yO=function(n,e){return n==="v"?OV(e):AV(e)},IV=function(n,e){return n==="h"&&e==="rtl"?-1:1},RV=function(n,e,t,r,s){var i=IV(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,l=e.contains(a),c=!1,u=o>0,f=0,d=0;do{var g=yO(n,a),m=g[0],v=g[1],b=g[2],x=v-b-i*m;(m||x)&&vO(n,a)&&(f+=x,d+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(f)<1||!s)||!u&&(Math.abs(d)<1||!s))&&(c=!0),c},Gh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},vS=function(n){return[n.deltaX,n.deltaY]},yS=function(n){return n&&"current"in n?n.current:n},DV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},NV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},MV=0,Jo=[];function jV(n){var e=y.useRef([]),t=y.useRef([0,0]),r=y.useRef(),s=y.useState(MV++)[0],i=y.useState(gO)[0],o=y.useRef(n);y.useEffect(function(){o.current=n},[n]),y.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var v=rV([n.lockRef.current],(n.shards||[]).map(yS),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=y.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=Gh(v),w=t.current,S="deltaX"in v?v.deltaX:w[0]-x[0],k="deltaY"in v?v.deltaY:w[1]-x[1],O,M=v.target,E=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in v&&E==="h"&&M.type==="range")return!1;var T=mS(E,M);if(!T)return!0;if(T?O=E:(O=E==="v"?"h":"v",T=mS(E,M)),!T)return!1;if(!r.current&&"changedTouches"in v&&(S||k)&&(r.current=O),!O)return!0;var P=r.current||O;return RV(P,b,v,P==="h"?S:k,!0)},[]),l=y.useCallback(function(v){var b=v;if(!(!Jo.length||Jo[Jo.length-1]!==i)){var x="deltaY"in b?vS(b):Gh(b),w=e.current.filter(function(O){return O.name===b.type&&(O.target===b.target||b.target===O.shadowParent)&&DV(O.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(yS).filter(Boolean).filter(function(O){return O.contains(b.target)}),k=S.length>0?a(b,S[0]):!o.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),c=y.useCallback(function(v,b,x,w){var S={name:v,delta:b,target:x,should:w,shadowParent:LV(x)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(k){return k!==S})},1)},[]),u=y.useCallback(function(v){t.current=Gh(v),r.current=void 0},[]),f=y.useCallback(function(v){c(v.type,vS(v),v.target,a(v,n.lockRef.current))},[]),d=y.useCallback(function(v){c(v.type,Gh(v),v.target,a(v,n.lockRef.current))},[]);y.useEffect(function(){return Jo.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Qo),document.addEventListener("touchmove",l,Qo),document.addEventListener("touchstart",u,Qo),function(){Jo=Jo.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Qo),document.removeEventListener("touchmove",l,Qo),document.removeEventListener("touchstart",u,Qo)}},[]);var g=n.removeScrollBar,m=n.inert;return y.createElement(y.Fragment,null,m?y.createElement(i,{styles:NV(s)}):null,g?y.createElement(TV,{gapMode:n.gapMode}):null)}function LV(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const FV=dV(pO,jV);var Tp=y.forwardRef(function(n,e){return y.createElement(Cp,Pr({},n,{ref:e,sideCar:FV}))});Tp.classNames=Cp.classNames;var Z0=["Enter"," "],UV=["ArrowDown","PageUp","Home"],xO=["ArrowUp","PageDown","End"],BV=[...UV,...xO],zV={ltr:[...Z0,"ArrowRight"],rtl:[...Z0,"ArrowLeft"]},VV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Iu="Menu",[iu,$V,WV]=Kf(Iu),[Fo,wO]=Br(Iu,[WV,gl,oO]),Ep=gl(),_O=oO(),[HV,Uo]=Fo(Iu),[GV,Ru]=Fo(Iu),bO=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=Ep(e),[l,c]=y.useState(null),u=y.useRef(!1),f=qe(i),d=xp(s);return y.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),p.jsx(_E,{...a,children:p.jsx(HV,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:c,children:p.jsx(GV,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:d,modal:o,children:r})})})};bO.displayName=Iu;var XV="MenuAnchor",bx=y.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Ep(t);return p.jsx(Ty,{...s,...r,ref:e})});bx.displayName=XV;var Sx="MenuPortal",[YV,SO]=Fo(Sx,{forceMount:void 0}),CO=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Uo(Sx,e);return p.jsx(YV,{scope:e,forceMount:t,children:p.jsx(cn,{present:t||i.open,children:p.jsx(mu,{asChild:!0,container:s,children:r})})})};CO.displayName=Sx;var Nn="MenuContent",[KV,Cx]=Fo(Nn),TO=y.forwardRef((n,e)=>{const t=SO(Nn,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Uo(Nn,n.__scopeMenu),o=Ru(Nn,n.__scopeMenu);return p.jsx(iu.Provider,{scope:n.__scopeMenu,children:p.jsx(cn,{present:r||i.open,children:p.jsx(iu.Slot,{scope:n.__scopeMenu,children:o.modal?p.jsx(qV,{...s,ref:e}):p.jsx(QV,{...s,ref:e})})})})}),qV=y.forwardRef((n,e)=>{const t=Uo(Nn,n.__scopeMenu),r=y.useRef(null),s=Ce(e,r);return y.useEffect(()=>{const i=r.current;if(i)return _x(i)},[]),p.jsx(Tx,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:te(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),QV=y.forwardRef((n,e)=>{const t=Uo(Nn,n.__scopeMenu);return p.jsx(Tx,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),JV=So("MenuContent.ScrollLock"),Tx=y.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:g,disableOutsideScroll:m,...v}=n,b=Uo(Nn,t),x=Ru(Nn,t),w=Ep(t),S=_O(t),k=$V(t),[O,M]=y.useState(null),E=y.useRef(null),T=Ce(e,E,b.onContentChange),P=y.useRef(0),A=y.useRef(""),D=y.useRef(0),N=y.useRef(null),R=y.useRef("right"),H=y.useRef(0),ne=m?Tp:y.Fragment,Q=m?{as:JV,allowPinchZoom:!0}:void 0,oe=$=>{var X,se;const J=A.current+$,ue=k().filter(ae=>!ae.disabled),q=document.activeElement,re=(X=ue.find(ae=>ae.ref.current===q))==null?void 0:X.textValue,V=ue.map(ae=>ae.textValue),K=u$(V,J,re),Y=(se=ue.find(ae=>ae.textValue===K))==null?void 0:se.ref.current;(function ae(G){A.current=G,window.clearTimeout(P.current),G!==""&&(P.current=window.setTimeout(()=>ae(""),1e3))})(J),Y&&setTimeout(()=>Y.focus())};y.useEffect(()=>()=>window.clearTimeout(P.current),[]),wx();const U=y.useCallback($=>{var ue,q;return R.current===((ue=N.current)==null?void 0:ue.side)&&d$($,(q=N.current)==null?void 0:q.area)},[]);return p.jsx(KV,{scope:t,searchRef:A,onItemEnter:y.useCallback($=>{U($)&&$.preventDefault()},[U]),onItemLeave:y.useCallback($=>{var J;U($)||((J=E.current)==null||J.focus(),M(null))},[U]),onTriggerLeave:y.useCallback($=>{U($)&&$.preventDefault()},[U]),pointerGraceTimerRef:D,onPointerGraceIntentChange:y.useCallback($=>{N.current=$},[]),children:p.jsx(ne,{...Q,children:p.jsx(bp,{asChild:!0,trapped:s,onMountAutoFocus:te(i,$=>{var J;$.preventDefault(),(J=E.current)==null||J.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(hl,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:g,children:p.jsx(Jz,{asChild:!0,...S,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:M,onEntryFocus:te(l,$=>{x.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(Ey,{role:"menu","aria-orientation":"vertical","data-state":zO(b.open),"data-radix-menu-content":"",dir:x.dir,...w,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:te(v.onKeyDown,$=>{const ue=$.target.closest("[data-radix-menu-content]")===$.currentTarget,q=$.ctrlKey||$.altKey||$.metaKey,re=$.key.length===1;ue&&($.key==="Tab"&&$.preventDefault(),!q&&re&&oe($.key));const V=E.current;if($.target!==V||!BV.includes($.key))return;$.preventDefault();const Y=k().filter(X=>!X.disabled).map(X=>X.ref.current);xO.includes($.key)&&Y.reverse(),l$(Y)}),onBlur:te(n.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(P.current),A.current="")}),onPointerMove:te(n.onPointerMove,ou($=>{const J=$.target,ue=H.current!==$.clientX;if($.currentTarget.contains(J)&&ue){const q=$.clientX>H.current?"right":"left";R.current=q,H.current=$.clientX}}))})})})})})})});TO.displayName=Nn;var ZV="MenuGroup",Ex=y.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(ge.div,{role:"group",...r,ref:e})});Ex.displayName=ZV;var e$="MenuLabel",EO=y.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(ge.div,{...r,ref:e})});EO.displayName=e$;var Tf="MenuItem",xS="menu.itemSelect",kp=y.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=y.useRef(null),o=Ru(Tf,n.__scopeMenu),a=Cx(Tf,n.__scopeMenu),l=Ce(e,i),c=y.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const d=new CustomEvent(xS,{bubbles:!0,cancelable:!0});f.addEventListener(xS,g=>r==null?void 0:r(g),{once:!0}),cy(f,d),d.defaultPrevented?c.current=!1:o.onClose()}};return p.jsx(kO,{...s,ref:l,disabled:t,onClick:te(n.onClick,u),onPointerDown:f=>{var d;(d=n.onPointerDown)==null||d.call(n,f),c.current=!0},onPointerUp:te(n.onPointerUp,f=>{var d;c.current||(d=f.currentTarget)==null||d.click()}),onKeyDown:te(n.onKeyDown,f=>{const d=a.searchRef.current!=="";t||d&&f.key===" "||Z0.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});kp.displayName=Tf;var kO=y.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=Cx(Tf,t),a=_O(t),l=y.useRef(null),c=Ce(e,l),[u,f]=y.useState(!1),[d,g]=y.useState("");return y.useEffect(()=>{const m=l.current;m&&g((m.textContent??"").trim())},[i.children]),p.jsx(iu.ItemSlot,{scope:t,disabled:r,textValue:s??d,children:p.jsx(Zz,{asChild:!0,...a,focusable:!r,children:p.jsx(ge.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:te(n.onPointerMove,ou(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:te(n.onPointerLeave,ou(m=>o.onItemLeave(m))),onFocus:te(n.onFocus,()=>f(!0)),onBlur:te(n.onBlur,()=>f(!1))})})})}),t$="MenuCheckboxItem",PO=y.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return p.jsx(DO,{scope:n.__scopeMenu,checked:t,children:p.jsx(kp,{role:"menuitemcheckbox","aria-checked":Ef(t)?"mixed":t,...s,ref:e,"data-state":Px(t),onSelect:te(s.onSelect,()=>r==null?void 0:r(Ef(t)?!0:!t),{checkForDefaultPrevented:!1})})})});PO.displayName=t$;var OO="MenuRadioGroup",[n$,r$]=Fo(OO,{value:void 0,onValueChange:()=>{}}),AO=y.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=qe(r);return p.jsx(n$,{scope:n.__scopeMenu,value:t,onValueChange:i,children:p.jsx(Ex,{...s,ref:e})})});AO.displayName=OO;var IO="MenuRadioItem",RO=y.forwardRef((n,e)=>{const{value:t,...r}=n,s=r$(IO,n.__scopeMenu),i=t===s.value;return p.jsx(DO,{scope:n.__scopeMenu,checked:i,children:p.jsx(kp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Px(i),onSelect:te(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});RO.displayName=IO;var kx="MenuItemIndicator",[DO,s$]=Fo(kx,{checked:!1}),NO=y.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=s$(kx,t);return p.jsx(cn,{present:r||Ef(i.checked)||i.checked===!0,children:p.jsx(ge.span,{...s,ref:e,"data-state":Px(i.checked)})})});NO.displayName=kx;var i$="MenuSeparator",MO=y.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});MO.displayName=i$;var o$="MenuArrow",jO=y.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Ep(t);return p.jsx(ky,{...s,...r,ref:e})});jO.displayName=o$;var a$="MenuSub",[xW,LO]=Fo(a$),lc="MenuSubTrigger",FO=y.forwardRef((n,e)=>{const t=Uo(lc,n.__scopeMenu),r=Ru(lc,n.__scopeMenu),s=LO(lc,n.__scopeMenu),i=Cx(lc,n.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:n.__scopeMenu},u=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),p.jsx(bx,{asChild:!0,...c,children:p.jsx(kO,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":zO(t.open),...n,ref:Yf(e,s.onTriggerChange),onClick:f=>{var d;(d=n.onClick)==null||d.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:te(n.onPointerMove,ou(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:te(n.onPointerLeave,ou(f=>{var g,m;u();const d=(g=t.content)==null?void 0:g.getBoundingClientRect();if(d){const v=(m=t.content)==null?void 0:m.dataset.side,b=v==="right",x=b?-5:5,w=d[b?"left":"right"],S=d[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:w,y:d.top},{x:S,y:d.top},{x:S,y:d.bottom},{x:w,y:d.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:te(n.onKeyDown,f=>{var g;const d=i.searchRef.current!=="";n.disabled||d&&f.key===" "||zV[r.dir].includes(f.key)&&(t.onOpenChange(!0),(g=t.content)==null||g.focus(),f.preventDefault())})})})});FO.displayName=lc;var UO="MenuSubContent",BO=y.forwardRef((n,e)=>{const t=SO(Nn,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Uo(Nn,n.__scopeMenu),o=Ru(Nn,n.__scopeMenu),a=LO(UO,n.__scopeMenu),l=y.useRef(null),c=Ce(e,l);return p.jsx(iu.Provider,{scope:n.__scopeMenu,children:p.jsx(cn,{present:r||i.open,children:p.jsx(iu.Slot,{scope:n.__scopeMenu,children:p.jsx(Tx,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:te(n.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:te(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:te(n.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),d=VV[o.dir].includes(u.key);f&&d&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});BO.displayName=UO;function zO(n){return n?"open":"closed"}function Ef(n){return n==="indeterminate"}function Px(n){return Ef(n)?"indeterminate":n?"checked":"unchecked"}function l$(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function c$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function u$(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=c$(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function h$(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function d$(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return h$(t,e)}function ou(n){return e=>e.pointerType==="mouse"?n(e):void 0}var f$=bO,p$=bx,g$=CO,m$=TO,v$=Ex,y$=EO,x$=kp,w$=PO,_$=AO,b$=RO,S$=NO,C$=MO,T$=jO,E$=FO,k$=BO,Ox="DropdownMenu",[P$,wW]=Br(Ox,[wO]),qt=wO(),[O$,VO]=P$(Ox),$O=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,l=qt(e),c=y.useRef(null),[u=!1,f]=Ja({prop:s,defaultProp:i,onChange:o});return p.jsx(O$,{scope:e,triggerId:fs(),triggerRef:c,contentId:fs(),open:u,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(d=>!d),[f]),modal:a,children:p.jsx(f$,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:t})})};$O.displayName=Ox;var WO="DropdownMenuTrigger",HO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=VO(WO,t),o=qt(t);return p.jsx(p$,{asChild:!0,...o,children:p.jsx(ge.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Yf(e,i.triggerRef),onPointerDown:te(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:te(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});HO.displayName=WO;var A$="DropdownMenuPortal",GO=n=>{const{__scopeDropdownMenu:e,...t}=n,r=qt(e);return p.jsx(g$,{...r,...t})};GO.displayName=A$;var XO="DropdownMenuContent",YO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=VO(XO,t),i=qt(t),o=y.useRef(!1);return p.jsx(m$,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:te(n.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:te(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});YO.displayName=XO;var I$="DropdownMenuGroup",R$=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(v$,{...s,...r,ref:e})});R$.displayName=I$;var D$="DropdownMenuLabel",KO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(y$,{...s,...r,ref:e})});KO.displayName=D$;var N$="DropdownMenuItem",qO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(x$,{...s,...r,ref:e})});qO.displayName=N$;var M$="DropdownMenuCheckboxItem",QO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(w$,{...s,...r,ref:e})});QO.displayName=M$;var j$="DropdownMenuRadioGroup",L$=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(_$,{...s,...r,ref:e})});L$.displayName=j$;var F$="DropdownMenuRadioItem",JO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(b$,{...s,...r,ref:e})});JO.displayName=F$;var U$="DropdownMenuItemIndicator",ZO=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(S$,{...s,...r,ref:e})});ZO.displayName=U$;var B$="DropdownMenuSeparator",eA=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(C$,{...s,...r,ref:e})});eA.displayName=B$;var z$="DropdownMenuArrow",V$=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(T$,{...s,...r,ref:e})});V$.displayName=z$;var $$="DropdownMenuSubTrigger",tA=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(E$,{...s,...r,ref:e})});tA.displayName=$$;var W$="DropdownMenuSubContent",nA=y.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=qt(t);return p.jsx(k$,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nA.displayName=W$;var H$=$O,G$=HO,X$=GO,rA=YO,sA=KO,iA=qO,oA=QO,aA=JO,lA=ZO,cA=eA,uA=tA,hA=nA;const Y$=H$,K$=G$,q$=y.forwardRef(({className:n,inset:e,children:t,...r},s)=>p.jsxs(uA,{ref:s,className:we("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...r,children:[t,p.jsx(Zf,{className:"ml-auto"})]}));q$.displayName=uA.displayName;const Q$=y.forwardRef(({className:n,...e},t)=>p.jsx(hA,{ref:t,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...e}));Q$.displayName=hA.displayName;const dA=y.forwardRef(({className:n,sideOffset:e=4,...t},r)=>p.jsx(X$,{children:p.jsx(rA,{ref:r,sideOffset:e,className:we("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...t})}));dA.displayName=rA.displayName;const fA=y.forwardRef(({className:n,inset:e,...t},r)=>p.jsx(iA,{ref:r,className:we("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));fA.displayName=iA.displayName;const J$=y.forwardRef(({className:n,children:e,checked:t,...r},s)=>p.jsxs(oA,{ref:s,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(lA,{children:p.jsx(fy,{className:"h-4 w-4"})})}),e]}));J$.displayName=oA.displayName;const Z$=y.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(aA,{ref:r,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(lA,{children:p.jsx(Bj,{className:"h-2 w-2 fill-current"})})}),e]}));Z$.displayName=aA.displayName;const e7=y.forwardRef(({className:n,inset:e,...t},r)=>p.jsx(sA,{ref:r,className:we("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));e7.displayName=sA.displayName;const t7=y.forwardRef(({className:n,...e},t)=>p.jsx(cA,{ref:t,className:we("-mx-1 my-1 h-px bg-muted",n),...e}));t7.displayName=cA.displayName;function n7({onPatternGenerated:n}){const[e,t]=y.useState(""),{toast:r}=ul(),s=mT({mutationFn:async o=>{const a=await fetch("/api/patterns/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o})});if(!a.ok){const l=await a.json();throw new Error(l.message||"Failed to generate pattern")}return a.json()},onSuccess:o=>{n==null||n(o.svgData,o.prompt),t(""),r({title:"AI Pattern Generated!",description:"Your custom pattern created with Stability AI is ready to use!"})},onError:o=>{r({variant:"destructive",title:"Generation Failed",description:o.message||"Failed to generate pattern. Please check your API key and try again."})}}),i=()=>{if(!e.trim()){r({variant:"destructive",title:"Prompt Required",description:"Please enter a description for your pattern."});return}s.mutate(e)};return p.jsxs("div",{className:"mb-6 p-3 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg border border-purple-200 dark:border-purple-700","data-testid":"ai-pattern-generator",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx(c_,{className:"h-4 w-4 text-purple-500 mr-2"}),p.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"AI Generator"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ao,{type:"text",placeholder:"Describe your pattern...",value:e,onChange:o=>t(o.target.value),onKeyDown:o=>o.key==="Enter"&&i(),className:"text-sm bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 focus:ring-purple-500 focus:border-purple-500",disabled:s.isPending,"data-testid":"input-pattern-prompt"}),p.jsx(ye,{onClick:i,disabled:s.isPending||!e.trim(),className:"w-full bg-purple-500 hover:bg-purple-600 text-white",size:"sm","data-testid":"button-generate-pattern",children:s.isPending?p.jsxs(p.Fragment,{children:[p.jsx(wi,{className:"h-3 w-3 mr-1 animate-spin"}),"Creating with AI..."]}):p.jsxs(p.Fragment,{children:[p.jsx(c_,{className:"h-3 w-3 mr-1"}),"Generate with AI"]})})]})]})}var r7="Label",pA=y.forwardRef((n,e)=>p.jsx(ge.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));pA.displayName=r7;var gA=pA;const s7=Jf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mt=y.forwardRef(({className:n,...e},t)=>p.jsx(gA,{ref:t,className:we(s7(),n),...e}));mt.displayName=gA.displayName;function i7(n){const e=y.useRef({value:n,previous:n});return y.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var o7=[" ","Enter","ArrowUp","ArrowDown"],a7=[" ","Enter"],Du="Select",[Pp,Op,l7]=Kf(Du),[El,_W]=Br(Du,[l7,gl]),Ap=gl(),[c7,ji]=El(Du),[u7,h7]=El(Du),mA=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:d,required:g,form:m}=n,v=Ap(e),[b,x]=y.useState(null),[w,S]=y.useState(null),[k,O]=y.useState(!1),M=xp(c),[E=!1,T]=Ja({prop:r,defaultProp:s,onChange:i}),[P,A]=Ja({prop:o,defaultProp:a,onChange:l}),D=y.useRef(null),N=b?m||!!b.closest("form"):!0,[R,H]=y.useState(new Set),ne=Array.from(R).map(Q=>Q.props.value).join(";");return p.jsx(_E,{...v,children:p.jsxs(c7,{required:g,scope:e,trigger:b,onTriggerChange:x,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:O,contentId:fs(),value:P,onValueChange:A,open:E,onOpenChange:T,dir:M,triggerPointerDownPosRef:D,disabled:d,children:[p.jsx(Pp.Provider,{scope:e,children:p.jsx(u7,{scope:n.__scopeSelect,onNativeOptionAdd:y.useCallback(Q=>{H(oe=>new Set(oe).add(Q))},[]),onNativeOptionRemove:y.useCallback(Q=>{H(oe=>{const U=new Set(oe);return U.delete(Q),U})},[]),children:t})}),N?p.jsxs(zA,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:P,onChange:Q=>A(Q.target.value),disabled:d,form:m,children:[P===void 0?p.jsx("option",{value:""}):null,Array.from(R)]},ne):null]})})};mA.displayName=Du;var vA="SelectTrigger",yA=y.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Ap(t),o=ji(vA,t),a=o.disabled||r,l=Ce(e,o.onTriggerChange),c=Op(t),u=y.useRef("touch"),[f,d,g]=VA(v=>{const b=c().filter(S=>!S.disabled),x=b.find(S=>S.value===o.value),w=$A(b,v,x);w!==void 0&&o.onValueChange(w.value)}),m=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return p.jsx(Ty,{asChild:!0,...i,children:p.jsx(ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":BA(o.value)?"":void 0,...s,ref:l,onClick:te(s.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&m(v)}),onPointerDown:te(s.onPointerDown,v=>{u.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(m(v),v.preventDefault())}),onKeyDown:te(s.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&d(v.key),!(b&&v.key===" ")&&o7.includes(v.key)&&(m(),v.preventDefault())})})})});yA.displayName=vA;var xA="SelectValue",wA=y.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:o="",...a}=n,l=ji(xA,t),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,f=Ce(e,l.onValueNodeChange);return Tt(()=>{c(u)},[c,u]),p.jsx(ge.span,{...a,ref:f,style:{pointerEvents:"none"},children:BA(l.value)?p.jsx(p.Fragment,{children:o}):i})});wA.displayName=xA;var d7="SelectIcon",_A=y.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return p.jsx(ge.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});_A.displayName=d7;var f7="SelectPortal",bA=n=>p.jsx(mu,{asChild:!0,...n});bA.displayName=f7;var Io="SelectContent",SA=y.forwardRef((n,e)=>{const t=ji(Io,n.__scopeSelect),[r,s]=y.useState();if(Tt(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?Mo.createPortal(p.jsx(CA,{scope:n.__scopeSelect,children:p.jsx(Pp.Slot,{scope:n.__scopeSelect,children:p.jsx("div",{children:n.children})})}),i):null}return p.jsx(TA,{...n,ref:e})});SA.displayName=Io;var Wn=10,[CA,Li]=El(Io),p7="SelectContentImpl",g7=So("SelectContent.RemoveScroll"),TA=y.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:g,sticky:m,hideWhenDetached:v,avoidCollisions:b,...x}=n,w=ji(Io,t),[S,k]=y.useState(null),[O,M]=y.useState(null),E=Ce(e,X=>k(X)),[T,P]=y.useState(null),[A,D]=y.useState(null),N=Op(t),[R,H]=y.useState(!1),ne=y.useRef(!1);y.useEffect(()=>{if(S)return _x(S)},[S]),wx();const Q=y.useCallback(X=>{const[se,...ae]=N().map(de=>de.ref.current),[G]=ae.slice(-1),ie=document.activeElement;for(const de of X)if(de===ie||(de==null||de.scrollIntoView({block:"nearest"}),de===se&&O&&(O.scrollTop=0),de===G&&O&&(O.scrollTop=O.scrollHeight),de==null||de.focus(),document.activeElement!==ie))return},[N,O]),oe=y.useCallback(()=>Q([T,S]),[Q,T,S]);y.useEffect(()=>{R&&oe()},[R,oe]);const{onOpenChange:U,triggerPointerDownPosRef:$}=w;y.useEffect(()=>{if(S){let X={x:0,y:0};const se=G=>{var ie,de;X={x:Math.abs(Math.round(G.pageX)-(((ie=$.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(G.pageY)-(((de=$.current)==null?void 0:de.y)??0))}},ae=G=>{X.x<=10&&X.y<=10?G.preventDefault():S.contains(G.target)||U(!1),document.removeEventListener("pointermove",se),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",ae,{capture:!0})}}},[S,U,$]),y.useEffect(()=>{const X=()=>U(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[U]);const[J,ue]=VA(X=>{const se=N().filter(ie=>!ie.disabled),ae=se.find(ie=>ie.ref.current===document.activeElement),G=$A(se,X,ae);G&&setTimeout(()=>G.ref.current.focus())}),q=y.useCallback((X,se,ae)=>{const G=!ne.current&&!ae;(w.value!==void 0&&w.value===se||G)&&(P(X),G&&(ne.current=!0))},[w.value]),re=y.useCallback(()=>S==null?void 0:S.focus(),[S]),V=y.useCallback((X,se,ae)=>{const G=!ne.current&&!ae;(w.value!==void 0&&w.value===se||G)&&D(X)},[w.value]),K=r==="popper"?ev:EA,Y=K===ev?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:g,sticky:m,hideWhenDetached:v,avoidCollisions:b}:{};return p.jsx(CA,{scope:t,content:S,viewport:O,onViewportChange:M,itemRefCallback:q,selectedItem:T,onItemLeave:re,itemTextRefCallback:V,focusSelectedItem:oe,selectedItemText:A,position:r,isPositioned:R,searchRef:J,children:p.jsx(Tp,{as:g7,allowPinchZoom:!0,children:p.jsx(bp,{asChild:!0,trapped:w.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:te(s,X=>{var se;(se=w.trigger)==null||se.focus({preventScroll:!0}),X.preventDefault()}),children:p.jsx(hl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:p.jsx(K,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:X=>X.preventDefault(),...x,...Y,onPlaced:()=>H(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:te(x.onKeyDown,X=>{const se=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!se&&X.key.length===1&&ue(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let G=N().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(X.key)&&(G=G.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const ie=X.target,de=G.indexOf(ie);G=G.slice(de+1)}setTimeout(()=>Q(G)),X.preventDefault()}})})})})})})});TA.displayName=p7;var m7="SelectItemAlignedPosition",EA=y.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=ji(Io,t),o=Li(Io,t),[a,l]=y.useState(null),[c,u]=y.useState(null),f=Ce(e,E=>u(E)),d=Op(t),g=y.useRef(!1),m=y.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=o,S=y.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&v&&b&&x){const E=i.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(i.dir!=="rtl"){const ie=A.left-T.left,de=P.left-ie,Se=E.left-de,me=E.width+Se,Ue=Math.max(me,T.width),pt=window.innerWidth-Wn,xt=q0(de,[Wn,Math.max(Wn,pt-Ue)]);a.style.minWidth=me+"px",a.style.left=xt+"px"}else{const ie=T.right-A.right,de=window.innerWidth-P.right-ie,Se=window.innerWidth-E.right-de,me=E.width+Se,Ue=Math.max(me,T.width),pt=window.innerWidth-Wn,xt=q0(de,[Wn,Math.max(Wn,pt-Ue)]);a.style.minWidth=me+"px",a.style.right=xt+"px"}const D=d(),N=window.innerHeight-Wn*2,R=v.scrollHeight,H=window.getComputedStyle(c),ne=parseInt(H.borderTopWidth,10),Q=parseInt(H.paddingTop,10),oe=parseInt(H.borderBottomWidth,10),U=parseInt(H.paddingBottom,10),$=ne+Q+R+U+oe,J=Math.min(b.offsetHeight*5,$),ue=window.getComputedStyle(v),q=parseInt(ue.paddingTop,10),re=parseInt(ue.paddingBottom,10),V=E.top+E.height/2-Wn,K=N-V,Y=b.offsetHeight/2,X=b.offsetTop+Y,se=ne+Q+X,ae=$-se;if(se<=V){const ie=D.length>0&&b===D[D.length-1].ref.current;a.style.bottom="0px";const de=c.clientHeight-v.offsetTop-v.offsetHeight,Se=Math.max(K,Y+(ie?re:0)+de+oe),me=se+Se;a.style.height=me+"px"}else{const ie=D.length>0&&b===D[0].ref.current;a.style.top="0px";const Se=Math.max(V,ne+v.offsetTop+(ie?q:0)+Y)+ae;a.style.height=Se+"px",v.scrollTop=se-V+v.offsetTop}a.style.margin=`${Wn}px 0`,a.style.minHeight=J+"px",a.style.maxHeight=N+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[d,i.trigger,i.valueNode,a,c,v,b,x,i.dir,r]);Tt(()=>S(),[S]);const[k,O]=y.useState();Tt(()=>{c&&O(window.getComputedStyle(c).zIndex)},[c]);const M=y.useCallback(E=>{E&&m.current===!0&&(S(),w==null||w(),m.current=!1)},[S,w]);return p.jsx(y7,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:p.jsx(ge.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});EA.displayName=m7;var v7="SelectPopperPosition",ev=y.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Wn,...i}=n,o=Ap(t);return p.jsx(Ey,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ev.displayName=v7;var[y7,Ax]=El(Io,{}),tv="SelectViewport",kA=y.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Li(tv,t),o=Ax(tv,t),a=Ce(e,i.onViewportChange),l=y.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(Pp.Slot,{scope:t,children:p.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:te(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=o;if(d!=null&&d.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const m=window.innerHeight-Wn*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),x=Math.max(v,b);if(x<m){const w=x+g,S=Math.min(m,w),k=w-S;f.style.height=S+"px",f.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});kA.displayName=tv;var PA="SelectGroup",[x7,w7]=El(PA),_7=y.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=fs();return p.jsx(x7,{scope:t,id:s,children:p.jsx(ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});_7.displayName=PA;var OA="SelectLabel",AA=y.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=w7(OA,t);return p.jsx(ge.div,{id:s.id,...r,ref:e})});AA.displayName=OA;var kf="SelectItem",[b7,IA]=El(kf),RA=y.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...o}=n,a=ji(kf,t),l=Li(kf,t),c=a.value===r,[u,f]=y.useState(i??""),[d,g]=y.useState(!1),m=Ce(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,s)}),v=fs(),b=y.useRef("touch"),x=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(b7,{scope:t,value:r,disabled:s,textId:v,isSelected:c,onItemTextChange:y.useCallback(w=>{f(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:p.jsx(Pp.ItemSlot,{scope:t,value:r,disabled:s,textValue:u,children:p.jsx(ge.div,{role:"option","aria-labelledby":v,"data-highlighted":d?"":void 0,"aria-selected":c&&d,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:m,onFocus:te(o.onFocus,()=>g(!0)),onBlur:te(o.onBlur,()=>g(!1)),onClick:te(o.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:te(o.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:te(o.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:te(o.onPointerMove,w=>{var S;b.current=w.pointerType,s?(S=l.onItemLeave)==null||S.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:te(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:te(o.onKeyDown,w=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(a7.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});RA.displayName=kf;var cc="SelectItemText",DA=y.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,o=ji(cc,t),a=Li(cc,t),l=IA(cc,t),c=h7(cc,t),[u,f]=y.useState(null),d=Ce(e,x=>f(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,x,l.value,l.disabled)}),g=u==null?void 0:u.textContent,m=y.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=c;return Tt(()=>(v(m),()=>b(m)),[v,b,m]),p.jsxs(p.Fragment,{children:[p.jsx(ge.span,{id:l.textId,...i,ref:d}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Mo.createPortal(i.children,o.valueNode):null]})});DA.displayName=cc;var NA="SelectItemIndicator",MA=y.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return IA(NA,t).isSelected?p.jsx(ge.span,{"aria-hidden":!0,...r,ref:e}):null});MA.displayName=NA;var nv="SelectScrollUpButton",jA=y.forwardRef((n,e)=>{const t=Li(nv,n.__scopeSelect),r=Ax(nv,n.__scopeSelect),[s,i]=y.useState(!1),o=Ce(e,r.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?p.jsx(FA,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});jA.displayName=nv;var rv="SelectScrollDownButton",LA=y.forwardRef((n,e)=>{const t=Li(rv,n.__scopeSelect),r=Ax(rv,n.__scopeSelect),[s,i]=y.useState(!1),o=Ce(e,r.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?p.jsx(FA,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});LA.displayName=rv;var FA=y.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Li("SelectScrollButton",t),o=y.useRef(null),a=Op(t),l=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),Tt(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),p.jsx(ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:te(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:te(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:te(s.onPointerLeave,()=>{l()})})}),S7="SelectSeparator",UA=y.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return p.jsx(ge.div,{"aria-hidden":!0,...r,ref:e})});UA.displayName=S7;var sv="SelectArrow",C7=y.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Ap(t),i=ji(sv,t),o=Li(sv,t);return i.open&&o.position==="popper"?p.jsx(ky,{...s,...r,ref:e}):null});C7.displayName=sv;function BA(n){return n===""||n===void 0}var zA=y.forwardRef((n,e)=>{const{value:t,...r}=n,s=y.useRef(null),i=Ce(e,s),o=i7(t);return y.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const f=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(f)}},[o,t]),p.jsx(vu,{asChild:!0,children:p.jsx("select",{...r,ref:i,defaultValue:t})})});zA.displayName="BubbleSelect";function VA(n){const e=qe(n),t=y.useRef(""),r=y.useRef(0),s=y.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=y.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function $A(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=T7(n,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function T7(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var E7=mA,WA=yA,k7=wA,P7=_A,O7=bA,HA=SA,A7=kA,GA=AA,XA=RA,I7=DA,R7=MA,YA=jA,KA=LA,qA=UA;const iv=E7,ov=k7,Pf=y.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(WA,{ref:r,className:we("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,p.jsx(P7,{asChild:!0,children:p.jsx(py,{className:"h-4 w-4 opacity-50"})})]}));Pf.displayName=WA.displayName;const QA=y.forwardRef(({className:n,...e},t)=>p.jsx(YA,{ref:t,className:we("flex cursor-default items-center justify-center py-1",n),...e,children:p.jsx(Fj,{className:"h-4 w-4"})}));QA.displayName=YA.displayName;const JA=y.forwardRef(({className:n,...e},t)=>p.jsx(KA,{ref:t,className:we("flex cursor-default items-center justify-center py-1",n),...e,children:p.jsx(py,{className:"h-4 w-4"})}));JA.displayName=KA.displayName;const Of=y.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>p.jsx(O7,{children:p.jsxs(HA,{ref:s,className:we("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[p.jsx(QA,{}),p.jsx(A7,{className:we("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(JA,{})]})}));Of.displayName=HA.displayName;const D7=y.forwardRef(({className:n,...e},t)=>p.jsx(GA,{ref:t,className:we("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));D7.displayName=GA.displayName;const hi=y.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(XA,{ref:r,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(R7,{children:p.jsx(fy,{className:"h-4 w-4"})})}),p.jsx(I7,{children:e})]}));hi.displayName=XA.displayName;const N7=y.forwardRef(({className:n,...e},t)=>p.jsx(qA,{ref:t,className:we("-mx-1 my-1 h-px bg-muted",n),...e}));N7.displayName=qA.displayName;var Ix="Dialog",[ZA,bW]=Br(Ix),[M7,fr]=ZA(Ix),eI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=n,a=y.useRef(null),l=y.useRef(null),[c=!1,u]=Ja({prop:r,defaultProp:s,onChange:i});return p.jsx(M7,{scope:e,triggerRef:a,contentRef:l,contentId:fs(),titleId:fs(),descriptionId:fs(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(f=>!f),[u]),modal:o,children:t})};eI.displayName=Ix;var tI="DialogTrigger",nI=y.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=fr(tI,t),i=Ce(e,s.triggerRef);return p.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Nx(s.open),...r,ref:i,onClick:te(n.onClick,s.onOpenToggle)})});nI.displayName=tI;var Rx="DialogPortal",[j7,rI]=ZA(Rx,{forceMount:void 0}),sI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=fr(Rx,e);return p.jsx(j7,{scope:e,forceMount:t,children:y.Children.map(r,o=>p.jsx(cn,{present:t||i.open,children:p.jsx(mu,{asChild:!0,container:s,children:o})}))})};sI.displayName=Rx;var Af="DialogOverlay",iI=y.forwardRef((n,e)=>{const t=rI(Af,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=fr(Af,n.__scopeDialog);return i.modal?p.jsx(cn,{present:r||i.open,children:p.jsx(F7,{...s,ref:e})}):null});iI.displayName=Af;var L7=So("DialogOverlay.RemoveScroll"),F7=y.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=fr(Af,t);return p.jsx(Tp,{as:L7,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(ge.div,{"data-state":Nx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ro="DialogContent",oI=y.forwardRef((n,e)=>{const t=rI(Ro,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=fr(Ro,n.__scopeDialog);return p.jsx(cn,{present:r||i.open,children:i.modal?p.jsx(U7,{...s,ref:e}):p.jsx(B7,{...s,ref:e})})});oI.displayName=Ro;var U7=y.forwardRef((n,e)=>{const t=fr(Ro,n.__scopeDialog),r=y.useRef(null),s=Ce(e,t.contentRef,r);return y.useEffect(()=>{const i=r.current;if(i)return _x(i)},[]),p.jsx(aI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:te(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:te(n.onFocusOutside,i=>i.preventDefault())})}),B7=y.forwardRef((n,e)=>{const t=fr(Ro,n.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return p.jsx(aI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),aI=y.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=n,a=fr(Ro,t),l=y.useRef(null),c=Ce(e,l);return wx(),p.jsxs(p.Fragment,{children:[p.jsx(bp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(hl,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Nx(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(z7,{titleId:a.titleId}),p.jsx($7,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Dx="DialogTitle",lI=y.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=fr(Dx,t);return p.jsx(ge.h2,{id:s.titleId,...r,ref:e})});lI.displayName=Dx;var cI="DialogDescription",uI=y.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=fr(cI,t);return p.jsx(ge.p,{id:s.descriptionId,...r,ref:e})});uI.displayName=cI;var hI="DialogClose",dI=y.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=fr(hI,t);return p.jsx(ge.button,{type:"button",...r,ref:e,onClick:te(n.onClick,()=>s.onOpenChange(!1))})});dI.displayName=hI;function Nx(n){return n?"open":"closed"}var fI="DialogTitleWarning",[SW,pI]=VM(fI,{contentName:Ro,titleName:Dx,docsSlug:"dialog"}),z7=({titleId:n})=>{const e=pI(fI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},V7="DialogDescriptionWarning",$7=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pI(V7).contentName}}.`;return y.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},W7=eI,H7=nI,G7=sI,gI=iI,mI=oI,vI=lI,yI=uI,X7=dI;const xI=W7,Y7=H7,K7=G7,wI=y.forwardRef(({className:n,...e},t)=>p.jsx(gI,{ref:t,className:we("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));wI.displayName=gI.displayName;const Mx=y.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(K7,{children:[p.jsx(wI,{}),p.jsxs(mI,{ref:r,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,p.jsxs(X7,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(yu,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mx.displayName=mI.displayName;const jx=({className:n,...e})=>p.jsx("div",{className:we("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});jx.displayName="DialogHeader";const Lx=y.forwardRef(({className:n,...e},t)=>p.jsx(vI,{ref:t,className:we("text-lg font-semibold leading-none tracking-tight",n),...e}));Lx.displayName=vI.displayName;const Fx=y.forwardRef(({className:n,...e},t)=>p.jsx(yI,{ref:t,className:we("text-sm text-muted-foreground",n),...e}));Fx.displayName=yI.displayName;const q7=(n,e=8)=>new Promise(t=>{try{const r=document.createElement("canvas"),s=r.getContext("2d");r.width=100,r.height=100,s.drawImage(n,0,0,100,100);const o=s.getImageData(0,0,100,100).data,a={};for(let c=0;c<o.length;c+=16){const u=o[c],f=o[c+1],d=o[c+2];if(o[c+3]>128){const m=Math.floor(u/32)*32,v=Math.floor(f/32)*32,b=Math.floor(d/32)*32,x=`${m},${v},${b}`;a[x]=(a[x]||0)+1}}const l=Object.entries(a).sort(([,c],[,u])=>u-c).slice(0,e).map(([c])=>{const[u,f,d]=c.split(",").map(Number);return`#${u.toString(16).padStart(2,"0")}${f.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`});t(l.length>0?l:["#000000","#ffffff"])}catch(r){console.error("Color extraction failed:",r),t(["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00"])}}),Q7=async(n,e={})=>{const{colorCount:t=8,maxSize:r=800,timeout:s=1e4}=e,i=new Image;i.crossOrigin="anonymous",await new Promise((x,w)=>{i.onload=x,i.onerror=w,i.src=n});const o=await q7(i,t),a=document.createElement("canvas"),l=a.getContext("2d");let{width:c,height:u}=i;if(c>r||u>r){const x=Math.min(r/c,r/u);c=Math.floor(c*x),u=Math.floor(u*x)}a.width=c,a.height=u,l.drawImage(i,0,0,c,u),console.log("Skipping ImageTracer, using direct image conversion...");let f;const d=a.toDataURL();f=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 ${a.width} ${a.height}" width="${a.width}" height="${a.height}">
    <image href="${d}" x="0" y="0" width="${a.width}" height="${a.height}"/>
  </svg>`;const g=f;console.log("Converting SVG to fabric object...");const m=await K0(g);console.log("SVG loaded, result:",m);const v=m.objects.filter(x=>x!==null);if(console.log("Filtered objects:",v,"count:",v.length),!v||v.length===0)throw console.error("No valid objects created from SVG"),new Error("Failed to create vectorized object");let b;return v.length===1?(b=v[0],console.log("Single object created:",b)):(b=new Dn(v,{interactive:!0,subTargetCheck:!0}),console.log("Group object created:",b,"with",v.length,"children")),{vectorizedObject:b,extractedColors:o,svgString:g}},J7=(n,e,t=!1)=>{console.log("addVectorizedObjectToCanvas called:",{canvas:n,vectorizedObject:e,clearCanvas:t}),t&&(console.log("Clearing canvas"),n.clear());const r=n.getWidth(),s=n.getHeight(),i=e.width||1,o=e.height||1;console.log("Canvas dimensions:",{canvasWidth:r,canvasHeight:s}),console.log("Object dimensions:",{objWidth:i,objHeight:o});const a=r*.9/i,l=s*.9/o,c=Math.min(a,l,1);return console.log("Calculated scale:",{scaleX:a,scaleY:l,finalScale:c}),e.set({left:r/2,top:s/2,originX:"center",originY:"center",scaleX:c,scaleY:c,selectable:!0,evented:!0,hasControls:!0,hasBorders:!0}),console.log("Adding object to canvas:",e),n.add(e),console.log("Objects on canvas after add:",n.getObjects().length),n.renderAll(),console.log("Canvas render complete"),e};function Z7({onVectorizeComplete:n,canvas:e}){const[t,r]=y.useState(!1),[s,i]=y.useState(!1),[o,a]=y.useState("rectangle"),[l,c]=y.useState(200),[u,f]=y.useState(150),[d,g]=y.useState("cm"),[m,v]=y.useState("auto"),[b,x]=y.useState(6),[w,S]=y.useState(null),[k,O]=y.useState(""),[M,E]=y.useState(!1),[T,P]=y.useState(null),A=y.useRef(null),D=y.useRef(null),N=y.useRef(null),{toast:R}=ul();y.useEffect(()=>{(o==="square"||o==="round")&&f(l)},[o,l]),y.useEffect(()=>{e&&t&&U()},[l,u,o,d,e,t]),y.useEffect(()=>{const G=ie=>{N.current&&!N.current.contains(ie.target)&&!s&&r(!1)};return t&&!s&&(document.addEventListener("mousedown",G),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",G),s||(document.body.style.overflow="unset")}},[t,s]);const H=G=>Math.round(G/30.48*100)/100,ne=G=>Math.round(G*30.48),Q=y.useCallback(G=>{G!==d&&(G==="ft"?(c(H(l)),f(H(u))):(c(ne(l)),f(ne(u))),g(G))},[d,l,u,H,ne]),oe=y.useCallback(G=>{a(G),(G==="square"||G==="round")&&f(l)},[l]),U=y.useCallback(()=>{if(!e||!e.lowerCanvasEl)return;const G=d==="cm"?3.78:115,ie=Math.max(800,l*G),de=Math.max(600,u*G);e.setDimensions({width:ie,height:de}),e.renderAll()},[e,l,u,d]),$=y.useCallback(G=>["image/jpeg","image/jpg","image/png","image/webp","image/bmp"].includes(G.type)?G.size>10485760?(R({title:"File too large",description:"Please upload an image smaller than 10MB.",variant:"destructive"}),!1):!0:(R({title:"Invalid file type",description:"Please upload a JPG, PNG, WebP, or BMP image.",variant:"destructive"}),!1),[R]),J=y.useCallback(G=>{if(!$(G))return;O(G.name);const ie=new FileReader;ie.onload=de=>{var me;const Se=(me=de.target)==null?void 0:me.result;S(Se),P(Se)},ie.readAsDataURL(G)},[$]),ue=y.useCallback(G=>{const ie=G.target.files;ie&&ie.length>0&&J(ie[0])},[J]),q=y.useCallback(G=>{G.preventDefault(),E(!0)},[]),re=y.useCallback(G=>{G.preventDefault(),E(!1)},[]),V=y.useCallback(G=>{G.preventDefault(),E(!1);const ie=G.dataTransfer.files;ie&&ie.length>0&&J(ie[0])},[J]),K=y.useCallback(()=>{const G=[];return w||G.push("Please upload an image"),(!l||l<=0)&&G.push("Please set a valid width"),(!u||u<=0)&&G.push("Please set a valid height"),o||G.push("Please select a shape"),m||G.push("Please select color extraction mode"),G},[w,l,u,o,m]),Y=y.useCallback(async G=>{if(!e)throw new Error("Canvas not available");try{const ie=new Image;ie.crossOrigin="anonymous",await new Promise((pr,zo)=>{ie.onload=pr,ie.onerror=zo,ie.src=G});let de=l,Se=u;(o==="square"||o==="round")&&(Se=l);const me=document.createElement("canvas"),Ue=me.getContext("2d");if(!Ue)throw new Error("Could not get canvas context");const pt=2;switch(me.width=de*pt,me.height=Se*pt,Ue.save(),o){case"round":const pr=Math.min(me.width,me.height)/2;Ue.beginPath(),Ue.arc(me.width/2,me.height/2,pr,0,2*Math.PI),Ue.clip();break;case"runner":const zo=Math.min(me.width,me.height)*.15;Ue.beginPath(),Ue.roundRect(0,0,me.width,me.height,zo),Ue.clip();break;default:break}const xt=ie.width/ie.height,Fi=me.width/me.height;let Nt,Un,Gr,kl;xt>Fi?(Un=me.height,Nt=Un*xt,Gr=(me.width-Nt)/2,kl=0):(Nt=me.width,Un=Nt/xt,Gr=0,kl=(me.height-Un)/2),Ue.drawImage(ie,Gr,kl,Nt,Un),Ue.restore();const Pl=me.toDataURL();let Bo=6;m!=="auto"&&(Bo=b),console.log("Starting vectorization process...");const{vectorizedObject:Ui,extractedColors:ct}=await Q7(Pl,{colorCount:Bo,maxSize:800,timeout:1e4});console.log("Vectorization completed successfully",{vectorizedObject:Ui,extractedColors:ct}),U(),e&&e.lowerCanvasEl?(console.log("Canvas is valid, adding vectorized object:",{canvas:e,vectorizedObject:Ui}),J7(e,Ui,!0),console.log("Object added to canvas, current objects count:",e.getObjects().length),e.renderAll(),console.log("Canvas rendered")):console.error("Canvas is not valid:",{canvas:e,hasLowerCanvas:e==null?void 0:e.lowerCanvasEl});const wt=ct.map(pr=>({hex:pr,layer:"normal"}));n==null||n(Ui,wt)}catch(ie){console.error("Vectorization error:",ie),G&&e&&e.lowerCanvasEl&&tn.fromURL(G).then(de=>{const Se=Math.min(e.width*.6/de.width,e.height*.6/de.height);de.set({left:e.width/2,top:e.height/2,originX:"center",originY:"center",scaleX:Se,scaleY:Se}),e.clear(),e.add(de),e.renderAll()})}finally{i(!1)}},[e,o,l,u,m,b,U,n,d]),X=y.useCallback(async()=>{if(!e||!w)return;const G=K();if(G.length>0){console.error("Validation errors:",G);return}i(!0);try{await Y(w),setTimeout(()=>{r(!1),i(!1)},500)}catch(ie){console.error("Processing error:",ie),i(!1)}},[w,e,K]),se=y.useCallback(G=>{r(G),G&&(S(null),O(""),P(null),i(!1))},[]),ae=w&&l>0&&u>0&&o&&m;return p.jsxs(xI,{open:t,onOpenChange:se,children:[p.jsx(Y7,{asChild:!0,children:p.jsxs(ye,{className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white",size:"lg",children:[p.jsx(fo,{className:"h-4 w-4 mr-2"}),p.jsx(Yd,{className:"h-4 w-4 mr-1"}),"Upload Rug Design (Auto Vectorize + Refine)"]})}),p.jsxs(Mx,{ref:N,className:"max-w-lg animate-in fade-in-0 zoom-in-95 duration-300",children:[p.jsxs(jx,{children:[p.jsxs(Lx,{className:"flex items-center",children:[p.jsx(n4,{className:"h-5 w-5 mr-2"}),"Rug Upload Settings"]}),p.jsx(Fx,{children:"Configure your rug design settings before uploading and vectorizing your image."})]}),p.jsxs("div",{className:"space-y-6",children:[s&&p.jsx("div",{className:"absolute inset-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("div",{className:"w-16 h-16 mx-auto",children:p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600"})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Processing your rug..."}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Hang tight! We're making magic happen"}),p.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-slate-500",children:[p.jsx("span",{children:" Vectorizing image"}),p.jsx("span",{children:" Extracting colors"}),p.jsx("span",{children:" Resizing canvas"})]})]})]})}),p.jsx("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-300",children:p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx(mt,{className:"text-sm font-medium",children:"1. Choose Shape & Size"}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(mt,{className:"text-xs text-slate-600 dark:text-slate-400",children:"Unit:"}),p.jsxs(iv,{value:d,onValueChange:G=>Q(G),children:[p.jsx(Pf,{className:"w-16 h-7 text-xs",children:p.jsx(ov,{})}),p.jsxs(Of,{children:[p.jsx(hi,{value:"cm",children:"cm"}),p.jsx(hi,{value:"ft",children:"ft"})]})]})]})]}),p.jsx("div",{className:"relative bg-slate-100 dark:bg-slate-800 rounded-lg p-1 mb-4",children:p.jsxs("div",{className:"grid grid-cols-4 gap-1 relative",children:[p.jsx("div",{className:"absolute inset-y-1 bg-white dark:bg-slate-700 rounded-md shadow-sm transition-transform duration-200 ease-out",style:{transform:`translateX(${["rectangle","square","round","runner"].indexOf(o)*100}%)`,width:"calc(25% - 2px)"}}),[{value:"rectangle",label:"Rectangle"},{value:"square",label:"Square"},{value:"round",label:"Round"},{value:"runner",label:"Runner"}].map(G=>p.jsx("button",{onClick:()=>oe(G.value),className:`relative z-10 px-2 py-2 text-xs font-medium rounded-md transition-colors duration-200 ${o===G.value?"text-slate-900 dark:text-slate-100":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:G.label},G.value))]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs(mt,{className:"text-xs text-slate-600 dark:text-slate-400",children:["Rug Size (",d,"):"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx(mt,{className:"text-xs",children:o==="round"?"Diameter":"Width"}),p.jsx(Ao,{type:"number",value:l,onChange:G=>c(Number(G.target.value)),className:"text-sm transition-all duration-200",min:d==="cm"?"50":"1.5",max:d==="cm"?"500":"16",step:d==="cm"?"1":"0.1"})]}),p.jsxs("div",{className:`transition-all duration-300 ${o==="square"||o==="round"?"opacity-30 pointer-events-none":"opacity-100"}`,children:[p.jsx(mt,{className:"text-xs",children:"Height"}),p.jsx(Ao,{type:"number",value:u,onChange:G=>f(Number(G.target.value)),className:"text-sm transition-all duration-200",min:d==="cm"?"50":"1.5",max:d==="cm"?"500":"16",step:d==="cm"?"1":"0.1",disabled:o==="square"||o==="round"})]})]}),(o==="square"||o==="round")&&p.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 animate-in fade-in duration-300",children:[o==="square"?"Square":"Round"," rugs have equal width and height"]})]})]})}),p.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-4 duration-500",children:[p.jsx(mt,{className:"text-sm font-medium block",children:"2. Color Extraction Options"}),p.jsxs(iv,{value:m,onValueChange:v,children:[p.jsx(Pf,{className:"transition-all duration-200 hover:border-blue-300",children:p.jsx(ov,{})}),p.jsxs(Of,{children:[p.jsx(hi,{value:"auto",children:"Auto (Smart Detection)"}),[3,4,5,6,7,8,9,10].map(G=>p.jsxs(hi,{value:G.toString(),children:[G," colors"]},G))]})]}),m!=="auto"&&p.jsx("div",{className:"hidden",children:(()=>{const G=Number(m);return G&&b!==G&&x(G),null})()})]}),p.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-6 duration-700",children:[p.jsx(mt,{className:"text-sm font-medium block",children:"3. Upload Image"}),p.jsxs("div",{ref:D,onDragOver:q,onDragLeave:re,onDrop:V,className:`border-2 border-dashed rounded-lg p-6 text-center transition-all duration-300 ${M?"border-blue-400 bg-blue-50 dark:bg-blue-900/20 scale-105":"border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800"}`,children:[p.jsx("input",{ref:A,type:"file",accept:".jpg,.jpeg,.png,.webp,.bmp",onChange:ue,className:"hidden"}),w?p.jsxs("div",{className:"space-y-3 animate-in slide-in-from-bottom-2 duration-500",children:[T&&p.jsx("div",{className:"w-20 h-20 mx-auto rounded-lg overflow-hidden border-2 border-green-200 dark:border-green-700",children:p.jsx("img",{src:T,alt:"Preview",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Hj,{className:"h-6 w-6 mx-auto text-green-600"}),p.jsx("p",{className:"text-sm font-medium text-green-600",children:k}),p.jsx("p",{className:"text-xs text-slate-600",children:"Image uploaded successfully"})]})]}):p.jsxs("div",{className:"space-y-3",children:[p.jsx(fo,{className:"h-8 w-8 mx-auto text-slate-400"}),p.jsx("div",{children:p.jsxs(ye,{onClick:()=>{var G;return(G=A.current)==null?void 0:G.click()},variant:"outline",size:"sm",disabled:s,className:"transition-all duration-200 hover:scale-105",children:[p.jsx(fo,{className:"h-4 w-4 mr-2"}),"Select Image File"]})}),p.jsxs("p",{className:"text-xs text-slate-500",children:["Drag & drop or click to upload",p.jsx("br",{}),"Supports .jpg, .png, .webp, .bmp"]})]})]}),m!=="auto"&&p.jsx("div",{className:"hidden",children:(()=>{const G=Number(m);return G&&b!==G&&x(G),null})()})]}),p.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[p.jsx(ye,{onClick:X,disabled:!ae||s,className:`w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white transition-all duration-300 ${ae?"hover:scale-105":"opacity-50"}`,size:"lg",children:s?p.jsxs(p.Fragment,{children:[p.jsx(wi,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):p.jsxs(p.Fragment,{children:[p.jsx(Yd,{className:"h-4 w-4 mr-2"}),"Let's Go!",p.jsx(x0,{className:"h-4 w-4 ml-2"})]})}),!ae&&p.jsx("p",{className:"text-xs text-slate-500 text-center mt-2",children:"Please upload an image and set dimensions to continue"})]})]})]})]})}function eW({onAIPatternGenerated:n,onAutoVectorize:e,canvas:t}){const[r,s]=y.useState(!1);y.useState(!1),y.useState(!1);const[i,o]=y.useState(new Set(["uploads"])),[a,l]=y.useState([]),c=()=>{const d=document.createElement("input");d.type="file",d.accept="image/*",d.onchange=async g=>{const m=g.target.files;if(m&&m.length>0){const v=m[0],b=new FileReader;b.onload=async x=>{var k;const w=(k=x.target)==null?void 0:k.result;if(l(O=>[w,...O]),confirm(` AI Refinement Available

Would you like to clean up this image with AI before vectorization?

 Removes noise and artifacts
 Smooths edges and details
 Enhances pattern clarity

Click OK for AI refinement, or Cancel to vectorize as-is.`))try{const O=await fetch("/api/refine-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:w,prompt:"clean refined rug pattern design, remove noise and dust, smooth edges, high quality textile pattern"})});if(O.ok){const{refinedImage:M}=await O.json();e==null||e(M,`refined_${v.name}`)}else console.warn("AI refinement failed, using original image"),e==null||e(w,v.name)}catch(O){console.warn("AI refinement error, using original image:",O),e==null||e(w,v.name)}else e==null||e(w,v.name)},b.readAsDataURL(v)}},d.click()},u=["floral mughal rug with antique wash","berber geometric neutral tones","ikat textile with earthy colors","minimalist scandinavian pattern","vintage medallion faded palette","moroccan geometric tiles","art deco golden patterns","japanese wave motifs"],f=d=>{const g=new Set(i);g.has(d)?g.delete(d):g.add(d),o(g)};return p.jsxs("div",{className:"w-80 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex flex-col","data-testid":"pattern-library",children:[p.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[p.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Pattern Library"}),p.jsx("div",{className:"mb-4",children:p.jsx(Z7,{canvas:t,onVectorizeComplete:(d,g)=>{console.log("Rug upload complete:",{colors:g})}})}),p.jsxs("div",{className:"grid grid-cols-1 gap-2 mb-4",children:[p.jsxs(ye,{variant:"outline",size:"sm",onClick:()=>s(!r),className:"flex items-center justify-center text-xs","data-testid":"button-generate-ai",children:[p.jsx(w0,{className:"h-3 w-3 mr-1"}),"Generate with AI"]}),p.jsxs(ye,{variant:"outline",size:"sm",onClick:c,className:"flex items-center justify-center text-xs","data-testid":"button-upload-auto-vectorize",children:[p.jsx(Yd,{className:"h-3 w-3 mr-1"}),"Quick Upload (Legacy)",p.jsx("span",{className:"ml-1 text-xs bg-gray-100 dark:bg-gray-900/30 text-gray-600 dark:text-gray-400 px-1 rounded",children:"Fast"})]})]}),r&&p.jsxs("div",{className:"space-y-3 mb-4 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[p.jsx(n7,{onPatternGenerated:n}),p.jsxs(Y$,{children:[p.jsx(K$,{asChild:!0,children:p.jsxs(ye,{variant:"ghost",size:"sm",className:"w-full justify-between text-xs","data-testid":"button-examples",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(An,{className:"h-3 w-3 mr-1"})," Examples"]}),p.jsx(py,{className:"h-3 w-3"})]})}),p.jsx(dA,{className:"w-64",children:u.map((d,g)=>p.jsx(fA,{onClick:()=>{const m=document.querySelector('[data-testid="input-pattern-prompt"]');if(m){m.value=d,m.focus();const v=new Event("input",{bubbles:!0});m.dispatchEvent(v)}},className:"text-xs cursor-pointer hover:bg-primary/10",children:d},g))})]})]})]}),p.jsx(nO,{className:"flex-1",children:p.jsx("div",{className:"p-4 space-y-4",children:p.jsxs("div",{children:[p.jsxs(ye,{variant:"ghost",size:"sm",onClick:()=>f("uploads"),className:"w-full justify-between p-2 h-auto text-left font-medium","data-testid":"button-toggle-uploads",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(WT,{className:"h-4 w-4"}),p.jsx("span",{children:"My Uploads"}),p.jsxs("span",{className:"text-xs text-slate-500",children:["(",a.length,")"]})]}),p.jsx(Zf,{className:`h-4 w-4 transition-transform ${i.has("uploads")?"rotate-90":""}`})]}),i.has("uploads")&&p.jsx("div",{className:"ml-4 mt-2 grid grid-cols-2 gap-2",children:a.length===0?p.jsxs("div",{className:"col-span-2 text-center py-8 text-slate-500 dark:text-slate-400",children:[p.jsx(fo,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),p.jsx("p",{className:"text-xs",children:"No uploads yet"})]}):a.map((d,g)=>p.jsx("div",{className:"aspect-square bg-slate-100 dark:bg-slate-700 rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary transition-all","data-testid":`uploaded-pattern-${g}`,children:p.jsx("img",{src:d,alt:`Upload ${g+1}`,className:"w-full h-full object-cover"})},g))})]})})})]})}var tW="Separator",wS="horizontal",nW=["horizontal","vertical"],_I=y.forwardRef((n,e)=>{const{decorative:t,orientation:r=wS,...s}=n,i=rW(r)?r:wS,a=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(ge.div,{"data-orientation":i,...a,...s,ref:e})});_I.displayName=tW;function rW(n){return nW.includes(n)}var bI=_I;const SI=y.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},s)=>p.jsx(bI,{ref:s,decorative:t,orientation:e,className:we("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));SI.displayName=bI.displayName;function sW({canvas:n,onHistoryAction:e}){const[t,r]=y.useState(!1),[s,i]=y.useState(null);y.useState(new Map);const[o,a]=y.useState(!1),[l,c]=y.useState([]),u=y.useRef(null),{toast:f}=ul(),d=[{name:"Wool",description:"Matte, soft texture",imageUrl:"/api/textures/wool.jpg",type:"wool",blendMode:"multiply",opacity:.3},{name:"Viscose",description:"Shiny, smooth texture",imageUrl:"/api/textures/viscose.jpg",type:"viscose",blendMode:"overlay",opacity:.25},{name:"Jute",description:"Grainy, rough texture",imageUrl:"/api/textures/jute.jpg",type:"jute",blendMode:"multiply",opacity:.4}],g=y.useCallback(w=>{switch(w){case"wool":return`
          <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <pattern id="wool" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                <circle cx="5" cy="5" r="1" fill="rgba(0,0,0,0.1)"/>
                <circle cx="15" cy="8" r="0.8" fill="rgba(0,0,0,0.08)"/>
                <circle cx="8" cy="15" r="1.2" fill="rgba(0,0,0,0.06)"/>
                <circle cx="12" cy="3" r="0.6" fill="rgba(0,0,0,0.09)"/>
              </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#wool)"/>
          </svg>
        `;case"viscose":return`
          <svg width="8" height="20" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <pattern id="viscose" x="0" y="0" width="8" height="20" patternUnits="userSpaceOnUse">
                <line x1="2" y1="0" x2="2" y2="20" stroke="rgba(255,255,255,0.15)" stroke-width="0.5"/>
                <line x1="6" y1="0" x2="6" y2="20" stroke="rgba(255,255,255,0.08)" stroke-width="0.3"/>
              </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#viscose)"/>
          </svg>
        `;case"jute":return`
          <svg width="12" height="12" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <pattern id="jute" x="0" y="0" width="12" height="12" patternUnits="userSpaceOnUse">
                <line x1="0" y1="3" x2="12" y2="3" stroke="rgba(0,0,0,0.1)" stroke-width="0.5"/>
                <line x1="0" y1="9" x2="12" y2="9" stroke="rgba(0,0,0,0.08)" stroke-width="0.5"/>
                <line x1="3" y1="0" x2="3" y2="12" stroke="rgba(0,0,0,0.06)" stroke-width="0.5"/>
                <line x1="9" y1="0" x2="9" y2="12" stroke="rgba(0,0,0,0.08)" stroke-width="0.5"/>
              </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#jute)"/>
          </svg>
        `;default:return""}},[]),m=y.useCallback(async w=>{if(n){a(!0),e==null||e(`Apply Texture: ${w.name}`);try{n.getObjects().forEach(O=>{O.name==="texture-overlay"&&n.remove(O)});let S=null;if(w.type==="custom"&&w.imageUrl){const O=new Image;O.crossOrigin="anonymous",await new Promise((M,E)=>{O.onload=M,O.onerror=E,O.src=w.imageUrl}),S=new Oc({source:O,repeat:"repeat"})}else{const O=g(w.type),M=new Blob([O],{type:"image/svg+xml"}),E=URL.createObjectURL(M),T=new Image;await new Promise((P,A)=>{T.onload=P,T.onerror=A,T.src=E}),S=new Oc({source:T,repeat:"repeat"}),URL.revokeObjectURL(E)}if(!S)return;const k=new Jn({left:0,top:0,width:n.width,height:n.height,fill:S,opacity:w.opacity,selectable:!1,evented:!1,name:"texture-overlay"});k.globalCompositeOperation=w.blendMode,k.name="texture-overlay",n.add(k),n.sendObjectToBack(k),n.renderAll(),i(w),f({title:"Texture Applied",description:`${w.name} texture has been applied to your rug design.`})}catch(S){console.error("Failed to apply texture:",S),f({title:"Texture Error",description:"Failed to apply texture. Please try again.",variant:"destructive"})}finally{a(!1)}}},[n,e,g,f]),v=y.useCallback(()=>{n&&(e==null||e("Remove Texture"),n.getObjects().forEach(w=>{w.name==="texture-overlay"&&n.remove(w)}),n.renderAll(),i(null),f({title:"Texture Removed",description:"Texture overlay has been removed from your design."}))},[n,e,f]),b=y.useCallback(w=>{if(!["image/jpeg","image/jpg","image/png","image/webp","image/bmp"].includes(w.type)){f({title:"Invalid file type",description:"Please upload a JPG, PNG, WebP, or BMP image.",variant:"destructive"});return}if(w.size>5242880){f({title:"File too large",description:"Please upload a texture smaller than 5MB.",variant:"destructive"});return}const O=new FileReader;O.onload=M=>{var P;const E=(P=M.target)==null?void 0:P.result,T={name:w.name.split(".")[0],description:"Custom uploaded texture",imageUrl:E,type:"custom",blendMode:"multiply",opacity:.3};c(A=>[...A,T]),f({title:"Texture Uploaded",description:`${T.name} texture has been added.`})},O.readAsDataURL(w)},[f]),x=y.useCallback(w=>{const S=w.target.files;S&&S.length>0&&b(S[0])},[b]);return[...d,...l],p.jsxs("div",{className:"space-y-3",children:[p.jsxs(ye,{size:"sm",variant:"outline",onClick:()=>r(!0),className:"w-full text-xs","data-testid":"button-apply-texture",children:[p.jsx(An,{className:"w-3 h-3 mr-1"}),"Apply Texture"]}),s&&p.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:["Active: ",s.name]}),p.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:s.description})]}),p.jsx(ye,{size:"sm",variant:"ghost",onClick:v,className:"h-6 w-6 p-0 text-blue-700 hover:text-blue-900 dark:text-blue-300",children:p.jsx(yu,{className:"h-3 w-3"})})]})}),p.jsx(xI,{open:t,onOpenChange:r,children:p.jsxs(Mx,{className:"max-w-md",children:[p.jsxs(jx,{children:[p.jsxs(Lx,{className:"flex items-center",children:[p.jsx(An,{className:"h-5 w-5 mr-2"}),"Apply Texture"]}),p.jsx(Fx,{children:"Choose a texture to overlay on your rug design. Textures blend subtly with your colors."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(mt,{className:"text-sm font-medium mb-2 block",children:"Default Textures"}),p.jsx("div",{className:"grid grid-cols-1 gap-2",children:d.map(w=>p.jsxs("button",{onClick:()=>m(w),disabled:o,className:"flex items-center p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors disabled:opacity-50",children:[p.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-700 dark:to-slate-600 rounded border mr-3 flex items-center justify-center",children:p.jsx(Yj,{className:"h-4 w-4 text-slate-500"})}),p.jsxs("div",{className:"flex-1 text-left",children:[p.jsx("div",{className:"text-sm font-medium",children:w.name}),p.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:w.description})]})]},w.type))})]}),l.length>0&&p.jsxs("div",{children:[p.jsx(mt,{className:"text-sm font-medium mb-2 block",children:"Custom Textures"}),p.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map((w,S)=>p.jsxs("button",{onClick:()=>m(w),disabled:o,className:"flex items-center p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors disabled:opacity-50",children:[p.jsx("div",{className:"w-10 h-10 rounded border mr-3 overflow-hidden",children:p.jsx("img",{src:w.imageUrl,alt:w.name,className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"flex-1 text-left",children:[p.jsx("div",{className:"text-sm font-medium",children:w.name}),p.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:w.description})]})]},S))})]}),p.jsxs("div",{children:[p.jsx(mt,{className:"text-sm font-medium mb-2 block",children:"Upload Custom Texture"}),p.jsx("input",{ref:u,type:"file",accept:".jpg,.jpeg,.png,.webp,.bmp",onChange:x,className:"hidden"}),p.jsxs(ye,{variant:"outline",onClick:()=>{var w;return(w=u.current)==null?void 0:w.click()},className:"w-full",disabled:o,children:[p.jsx(fo,{className:"h-4 w-4 mr-2"}),"Upload Texture Image"]}),p.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"JPG, PNG, WebP, or BMP up to 5MB"})]}),o&&p.jsxs("div",{className:"flex items-center justify-center py-4",children:[p.jsx(wi,{className:"h-6 w-6 animate-spin mr-2"}),p.jsx("span",{className:"text-sm",children:"Applying texture..."})]})]})]})})]})}function iW({onColorSelect:n,onColorReplace:e,canvas:t,onHistoryAction:r}){const[s,i]=y.useState("#6366f1"),[o,a]=y.useState("#ef4444"),[l,c]=y.useState("#3b82f6"),[u,f]=y.useState([]),[d,g]=y.useState([]),[m,v]=y.useState(null),[b,x]=y.useState(!1),[w,S]=y.useState(null),[k,O]=y.useState(null),M={"Earthy Mughal":["#8B4513","#D2691E","#CD853F","#F4A460","#DEB887","#BC8F8F"],"Pastel Nordic":["#E6E6FA","#F0F8FF","#F5F5DC","#FFF8DC","#E0FFFF","#F0FFFF"],"Desert Rose":["#BC8F8F","#F4A460","#DEB887","#D2B48C","#F5DEB3","#FFE4B5"],"Ocean Blues":["#4682B4","#5F9EA0","#87CEEB","#B0C4DE","#ADD8E6","#E0F6FF"],"Forest Earth":["#228B22","#32CD32","#90EE90","#8FBC8F","#98FB98","#F0FFF0"]},E=["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#ec4899","#f43f5e","#64748b","#475569","#374151","#1f2937"],T=["#6366f1","#10b981","#f43f5e","#f59e0b"];y.useState("Earthy Mughal");const[P,A]=y.useState(!1),D=V=>{const K=new Set;return V&&V.getObjects().forEach(Y=>{Y.fill&&K.add(Y.fill.toLowerCase()),Y.type==="group"&&Y.getObjects&&Y.getObjects().forEach(X=>{X.fill&&K.add(X.fill.toLowerCase())})}),Array.from(K).map(Y=>({hex:Y,layer:"normal"}))},N=y.useCallback((V,K,Y)=>{if(!V)return;let X=!1;V.getObjects().forEach(se=>{se.fill&&se.fill.toLowerCase()===K.toLowerCase()&&(se.set({fill:Y}),X=!0),se.type==="group"&&se.getObjects&&se.getObjects().forEach(ae=>{ae.fill&&ae.fill.toLowerCase()===K.toLowerCase()&&(ae.set({fill:Y}),X=!0)})}),X&&V.requestRenderAll()},[]),R=y.useCallback(()=>{var Y;if(!t||u.length===0)return;const V={};t.getObjects().forEach(X=>{if(X.fill){const se=X.fill.toLowerCase();V[se]=(V[se]||0)+1}});const K=(Y=Object.entries(V).sort(([,X],[,se])=>se-X)[0])==null?void 0:Y[0];if(K){r==null||r("Remove Background"),t.getObjects().filter(ae=>ae.fill&&ae.fill.toLowerCase()===K).forEach(ae=>{t.remove(ae)}),t.requestRenderAll();const se=D(t);f(se)}},[t,u,r]),H=y.useCallback(()=>{if(!t||u.length<2)return;x(!0),r==null||r("Shuffle Colors");const V=[...u].sort(()=>Math.random()-.5),K={};u.forEach((Y,X)=>{K[Y.hex]=V[X].hex}),t.getObjects().forEach(Y=>{Y.fill&&K[Y.fill.toLowerCase()]&&Y.set({fill:K[Y.fill.toLowerCase()]}),Y.type==="group"&&Y.getObjects&&Y.getObjects().forEach(X=>{X.fill&&K[X.fill.toLowerCase()]&&X.set({fill:K[X.fill.toLowerCase()]})})}),t.requestRenderAll(),setTimeout(()=>{const Y=D(t);f(Y),x(!1)},200)},[t,u,r]),ne=y.useCallback(()=>{!t||d.length===0||(x(!0),r==null||r("Reset Colors"),setTimeout(()=>{f([...d]),v(null),x(!1)},500))},[t,d,r]),Q=(V,K)=>{const Y=ae=>{const G=parseInt(ae.slice(1,3),16),ie=parseInt(ae.slice(3,5),16),de=parseInt(ae.slice(5,7),16);return{r:G,g:ie,b:de}},X=Y(V),se=Y(K);return Math.sqrt(Math.pow(X.r-se.r,2)+Math.pow(X.g-se.g,2)+Math.pow(X.b-se.b,2))},oe=(V,K)=>{let Y=K[0],X=1/0;return K.forEach(se=>{const ae=Q(V,se);ae<X&&(X=ae,Y=se)}),Y},U=y.useCallback(async V=>{if(!t||u.length<=2)return;O(V),x(!0),r==null||r(`Remove Color: ${V}`);const K=u.filter(se=>se.hex.toLowerCase()!==V.toLowerCase()),Y=K.map(se=>se.hex),X=oe(V,Y);t.getObjects().forEach(se=>{se.fill&&se.fill.toLowerCase()===V.toLowerCase()&&se.set({fill:X}),se.type==="group"&&se.getObjects&&se.getObjects().forEach(ae=>{ae.fill&&ae.fill.toLowerCase()===V.toLowerCase()&&ae.set({fill:X})})}),t.requestRenderAll(),setTimeout(()=>{f(K),O(null),x(!1)},150)},[t,u,r]);y.useEffect(()=>{if(t){const V=D(t);f(V),d.length===0&&g([...V]);const K=()=>{const Y=D(t);f(Y)};return t.on("object:added",K),t.on("object:removed",K),t.on("object:modified",K),()=>{t.off("object:added",K),t.off("object:removed",K),t.off("object:modified",K)}}},[t,d.length]);const $=V=>{i(V),n==null||n(V)},J=V=>{v(V.hex),a(V.hex),i(V.hex)},ue=y.useCallback((V,K)=>{r==null||r(`Change Layer: ${V} to ${K}`),f(Y=>Y.map(X=>X.hex===V?{...X,layer:K}:X)),t&&(t.getObjects().forEach(Y=>{if(Y.fill&&Y.fill.toLowerCase()===V.toLowerCase()){Y.set({shadow:null,opacity:1});try{switch(K){case"high":Y.set({shadow:{color:"rgba(255, 255, 255, 0.6)",blur:8,offsetX:0,offsetY:0}});break;case"low":Y.set({shadow:{color:"rgba(0, 0, 0, 0.4)",blur:4,offsetX:2,offsetY:2},opacity:.85});break;case"normal":default:break}}catch(X){console.warn("Failed to apply layer effect:",X)}}Y.type==="group"&&Y.getObjects&&Y.getObjects().forEach(X=>{if(X.fill&&X.fill.toLowerCase()===V.toLowerCase()){X.set({shadow:null,opacity:1});try{switch(K){case"high":X.set({shadow:{color:"rgba(255, 255, 255, 0.6)",blur:8,offsetX:0,offsetY:0}});break;case"low":X.set({shadow:{color:"rgba(0, 0, 0, 0.4)",blur:4,offsetX:2,offsetY:2},opacity:.85});break;case"normal":default:break}}catch(se){console.warn("Failed to apply layer effect to grouped object:",se)}}})}),t.requestRenderAll())},[t,r]),q=y.useCallback(V=>{if(i(V),m&&t){x(!0),w&&clearTimeout(w);const K=setTimeout(()=>{N(t,m,V),e==null||e(m,V);const Y=D(t);f(Y),v(V),x(!1)},150);S(K)}},[m,t,w,N,e]),re=()=>{if(m&&t){N(t,m,s),e==null||e(m,s);const V=D(t);f(V),v(s)}else e==null||e(o,l)};return p.jsxs("div",{className:"w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 flex flex-col","data-testid":"color-palette",children:[p.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Properties"}),p.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[p.jsx("i",{className:"fas fa-mouse-pointer text-2xl mb-2 opacity-50"}),p.jsx("p",{className:"text-sm",children:"Select an element to edit properties"})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Colors"}),u.length>0&&p.jsxs("div",{className:"mb-4",children:[p.jsxs(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2 block",children:["Design Colors (",u.length,")"]}),p.jsx("div",{className:"space-y-2","data-testid":"extracted-colors",children:u.map((V,K)=>p.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg border border-slate-200 dark:border-slate-600",children:[p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:`w-8 h-8 rounded cursor-pointer border-2 transition-all hover:scale-110 ${m===V.hex?"border-blue-500 shadow-lg":"border-slate-300 dark:border-slate-600"} ${k===V.hex?"opacity-50 pointer-events-none":""}`,style:{backgroundColor:V.hex},title:V.hex,onClick:()=>J(V),"data-testid":`color-swatch-${K}`}),u.length>2&&p.jsx("button",{onClick:Y=>{Y.stopPropagation(),U(V.hex)},disabled:k===V.hex||b,className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Remove this color","data-testid":`remove-color-${K}`,children:k===V.hex?p.jsx(wi,{className:"h-2 w-2 animate-spin"}):p.jsx(yu,{className:"h-2 w-2"})})]}),p.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 font-mono flex-1",children:V.hex}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(iv,{value:V.layer,onValueChange:Y=>ue(V.hex,Y),children:[p.jsx(Pf,{className:"w-20 h-8 text-xs",children:p.jsx(ov,{})}),p.jsxs(Of,{children:[p.jsx(hi,{value:"high",className:"text-xs",children:" High"}),p.jsx(hi,{value:"normal",className:"text-xs",children:" Normal"}),p.jsx(hi,{value:"low",className:"text-xs",children:" Low"})]})]}),p.jsxs("div",{className:"text-slate-500 dark:text-slate-400",children:[V.layer==="high"&&p.jsx(Mj,{className:"h-3 w-3"}),V.layer==="normal"&&p.jsx(Qj,{className:"h-3 w-3"}),V.layer==="low"&&p.jsx(Nj,{className:"h-3 w-3"})]})]})]},K))}),m&&p.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[b&&p.jsx(wi,{className:"w-3 h-3 animate-spin"}),p.jsxs("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:["Selected: ",m]})]}),p.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Click on this color to recolor it"})]}),p.jsxs("div",{className:"mt-3 space-y-2",children:[p.jsxs(ye,{size:"sm",variant:"outline",onClick:H,disabled:u.length<2||b,className:"w-full text-xs","data-testid":"button-shuffle-colors",children:[p.jsx(s4,{className:"w-3 h-3 mr-1"}),"Shuffle Colors"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(ye,{size:"sm",variant:"outline",onClick:R,disabled:u.length===0,className:"flex-1 text-xs","data-testid":"button-remove-background",children:[p.jsx($j,{className:"w-3 h-3 mr-1"}),"Remove BG"]}),p.jsxs(ye,{size:"sm",variant:"outline",onClick:ne,disabled:d.length===0,className:"flex-1 text-xs","data-testid":"button-reset-colors",children:[p.jsx(e4,{className:"w-3 h-3 mr-1"}),"Reset"]})]})]}),p.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700",children:p.jsx(sW,{canvas:t,onHistoryAction:r})})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2 block uppercase tracking-wide",children:"ARS Palette"}),p.jsx("div",{className:"grid grid-cols-6 gap-2",children:E.map((V,K)=>p.jsx("button",{className:"aspect-square rounded-md border-2 border-transparent hover:border-slate-300 dark:hover:border-slate-500 transition-colors",style:{backgroundColor:V},onClick:()=>$(V),"data-testid":`ars-color-${K}`,title:V},K))})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 uppercase tracking-wide",children:"Rug Themes"}),p.jsxs(ye,{size:"sm",variant:"ghost",onClick:()=>A(!P),className:"h-6 px-2 text-xs","data-testid":"button-toggle-palettes",children:[p.jsx(An,{className:"w-3 h-3 mr-1"}),P?"Hide":"Show"]})]}),P&&p.jsx("div",{className:"space-y-2",children:Object.entries(M).map(([V,K])=>p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:V}),p.jsx("div",{className:"flex gap-1",children:K.map((Y,X)=>p.jsx("button",{className:"w-6 h-6 rounded border border-slate-200 dark:border-slate-600 hover:scale-110 transition-transform",style:{backgroundColor:Y},onClick:()=>q(Y),title:`${V}: ${Y}`,"data-testid":`palette-${V}-${X}`},X))})]},V))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2 block uppercase tracking-wide",children:"Recent"}),p.jsx("div",{className:"flex space-x-2",children:T.map((V,K)=>p.jsx("button",{className:"w-8 h-8 rounded-md border-2 border-transparent hover:border-slate-300 dark:hover:border-slate-500 transition-colors",style:{backgroundColor:V},onClick:()=>$(V),"data-testid":`recent-color-${K}`,title:V},K))})]}),p.jsx(SI,{className:"mb-4"}),p.jsxs("div",{children:[p.jsx(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-3 block uppercase tracking-wide",children:"Color Replace"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-1 block",children:"From Color"}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("div",{className:"w-8 h-8 rounded border border-slate-200 dark:border-slate-600",style:{backgroundColor:m||o},"data-testid":"replace-from-color"}),p.jsx(Ao,{type:"text",value:m||o,onChange:V=>a(V.target.value),className:"flex-1 text-sm",placeholder:"Click design color above","data-testid":"input-replace-from"})]})]}),p.jsxs("div",{children:[p.jsx(mt,{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-1 block",children:"To Color"}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("input",{type:"color",value:s,onChange:V=>q(V.target.value),className:"w-8 h-8 rounded border border-slate-200 dark:border-slate-600 cursor-pointer","data-testid":"input-color-picker"}),p.jsx(Ao,{type:"text",value:s,onChange:V=>q(V.target.value),className:"flex-1 text-sm font-mono",placeholder:"#0000ff","data-testid":"input-replace-to"})]})]}),p.jsx(ye,{onClick:re,className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",size:"sm",disabled:!m&&!o||b,"data-testid":"button-replace-color",children:b?p.jsxs(p.Fragment,{children:[p.jsx(wi,{className:"w-3 h-3 mr-1 animate-spin"}),"Updating..."]}):"Replace Color"})]})]})]})})]})}var CI={exports:{}};(function(n){(function(){function e(){var t=this;this.versionnumber="1.2.6",this.imageToSVG=function(r,s,i){i=t.checkoptions(i),t.loadImage(r,function(o){s(t.imagedataToSVG(t.getImgdata(o),i))},i)},this.imagedataToSVG=function(r,s){s=t.checkoptions(s);var i=t.imagedataToTracedata(r,s);return t.getsvgstring(i,s)},this.imageToTracedata=function(r,s,i){i=t.checkoptions(i),t.loadImage(r,function(o){s(t.imagedataToTracedata(t.getImgdata(o),i))},i)},this.imagedataToTracedata=function(r,s){s=t.checkoptions(s);var i=t.colorquantization(r,s);if(s.layering===0)for(var o={layers:[],palette:i.palette,width:i.array[0].length-2,height:i.array.length-2},a=0;a<i.palette.length;a++){var l=t.batchtracepaths(t.internodes(t.pathscan(t.layeringstep(i,a),s.pathomit),s),s.ltres,s.qtres);o.layers.push(l)}else{var c=t.layering(i);s.layercontainerid&&t.drawLayers(c,t.specpalette,s.scale,s.layercontainerid);var u=t.batchpathscan(c,s.pathomit),f=t.batchinternodes(u,s),o={layers:t.batchtracelayers(f,s.ltres,s.qtres),palette:i.palette,width:r.width,height:r.height}}return o},this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.checkoptions=function(r){r=r||{},typeof r=="string"&&(r=r.toLowerCase(),t.optionpresets[r]?r=t.optionpresets[r]:r={});for(var s=Object.keys(t.optionpresets.default),i=0;i<s.length;i++)r.hasOwnProperty(s[i])||(r[s[i]]=t.optionpresets.default[s[i]]);return r},this.colorquantization=function(r,s){var i=[],o=0,a,l,c,u=[],f=r.width*r.height,d,g,m,v,b;if(r.data.length<f*4){for(var x=new Uint8ClampedArray(f*4),w=0;w<f;w++)x[w*4]=r.data[w*3],x[w*4+1]=r.data[w*3+1],x[w*4+2]=r.data[w*3+2],x[w*4+3]=255;r.data=x}for(g=0;g<r.height+2;g++)for(i[g]=[],d=0;d<r.width+2;d++)i[g][d]=-1;for(s.pal?b=s.pal:s.colorsampling===0?b=t.generatepalette(s.numberofcolors):s.colorsampling===1?b=t.samplepalette(s.numberofcolors,r):b=t.samplepalette2(s.numberofcolors,r),s.blurradius>0&&(r=t.blur(r,s.blurradius,s.blurdelta)),v=0;v<s.colorquantcycles;v++){if(v>0)for(m=0;m<b.length;m++)u[m].n>0&&(b[m]={r:Math.floor(u[m].r/u[m].n),g:Math.floor(u[m].g/u[m].n),b:Math.floor(u[m].b/u[m].n),a:Math.floor(u[m].a/u[m].n)}),u[m].n/f<s.mincolorratio&&v<s.colorquantcycles-1&&(b[m]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(d=0;d<b.length;d++)u[d]={r:0,g:0,b:0,a:0,n:0};for(g=0;g<r.height;g++)for(d=0;d<r.width;d++){for(o=(g*r.width+d)*4,c=0,l=1024,m=0;m<b.length;m++)a=Math.abs(b[m].r-r.data[o])+Math.abs(b[m].g-r.data[o+1])+Math.abs(b[m].b-r.data[o+2])+Math.abs(b[m].a-r.data[o+3]),a<l&&(l=a,c=m);u[c].r+=r.data[o],u[c].g+=r.data[o+1],u[c].b+=r.data[o+2],u[c].a+=r.data[o+3],u[c].n++,i[g+1][d+1]=c}}return{array:i,palette:b}},this.samplepalette=function(r,s){for(var i,o=[],a=0;a<r;a++)i=Math.floor(Math.random()*s.data.length/4)*4,o.push({r:s.data[i],g:s.data[i+1],b:s.data[i+2],a:s.data[i+3]});return o},this.samplepalette2=function(r,s){for(var i,o=[],a=Math.ceil(Math.sqrt(r)),l=Math.ceil(r/a),c=s.width/(a+1),u=s.height/(l+1),f=0;f<l;f++)for(var d=0;d<a&&o.length!==r;d++)i=Math.floor((f+1)*u*s.width+(d+1)*c)*4,o.push({r:s.data[i],g:s.data[i+1],b:s.data[i+2],a:s.data[i+3]});return o},this.generatepalette=function(r){var s=[],i,o,a;if(r<8)for(var l=Math.floor(255/(r-1)),c=0;c<r;c++)s.push({r:c*l,g:c*l,b:c*l,a:255});else{var u=Math.floor(Math.pow(r,.3333333333333333)),f=Math.floor(255/(u-1)),d=r-u*u*u;for(i=0;i<u;i++)for(o=0;o<u;o++)for(a=0;a<u;a++)s.push({r:i*f,g:o*f,b:a*f,a:255});for(i=0;i<d;i++)s.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return s},this.layering=function(r){var s=[],i=0,o=r.array.length,a=r.array[0].length,l,c,u,f,d,g,m,v,b,x,w;for(w=0;w<r.palette.length;w++)for(s[w]=[],x=0;x<o;x++)for(s[w][x]=[],b=0;b<a;b++)s[w][x][b]=0;for(x=1;x<o-1;x++)for(b=1;b<a-1;b++)i=r.array[x][b],l=r.array[x-1][b-1]===i?1:0,c=r.array[x-1][b]===i?1:0,u=r.array[x-1][b+1]===i?1:0,f=r.array[x][b-1]===i?1:0,d=r.array[x][b+1]===i?1:0,g=r.array[x+1][b-1]===i?1:0,m=r.array[x+1][b]===i?1:0,v=r.array[x+1][b+1]===i?1:0,s[i][x+1][b+1]=1+d*2+v*4+m*8,f||(s[i][x+1][b]=2+m*4+g*8),c||(s[i][x][b+1]=0+u*2+d*4+8),l||(s[i][x][b]=0+c*2+4+f*8);return s},this.layeringstep=function(r,s){var i=[],o=r.array.length,a=r.array[0].length,l,c;for(c=0;c<o;c++)for(i[c]=[],l=0;l<a;l++)i[c][l]=0;for(c=1;c<o;c++)for(l=1;l<a;l++)i[c][l]=(r.array[c-1][l-1]===s?1:0)+(r.array[c-1][l]===s?2:0)+(r.array[c][l-1]===s?8:0)+(r.array[c][l]===s?4:0);return i},this.pointinpoly=function(r,s){for(var i=!1,o=0,a=s.length-1;o<s.length;a=o++)i=s[o].y>r.y!=s[a].y>r.y&&r.x<(s[a].x-s[o].x)*(r.y-s[o].y)/(s[a].y-s[o].y)+s[o].x?!i:i;return i},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.pathscan=function(r,s){for(var i=[],o=0,a=0,l=0,c=0,u=r[0].length,f=r.length,d=0,g=!0,m=!1,v,b=0;b<f;b++)for(var x=0;x<u;x++)if(r[b][x]==4||r[b][x]==11)for(l=x,c=b,i[o]={},i[o].points=[],i[o].boundingbox=[l,c,l,c],i[o].holechildren=[],g=!1,a=0,m=r[b][x]==11,d=1;!g;){if(i[o].points[a]={},i[o].points[a].x=l-1,i[o].points[a].y=c-1,i[o].points[a].t=r[c][l],l-1<i[o].boundingbox[0]&&(i[o].boundingbox[0]=l-1),l-1>i[o].boundingbox[2]&&(i[o].boundingbox[2]=l-1),c-1<i[o].boundingbox[1]&&(i[o].boundingbox[1]=c-1),c-1>i[o].boundingbox[3]&&(i[o].boundingbox[3]=c-1),v=t.pathscan_combined_lookup[r[c][l]][d],r[c][l]=v[0],d=v[1],l+=v[2],c+=v[3],l-1===i[o].points[0].x&&c-1===i[o].points[0].y)if(g=!0,i[o].points.length<s)i.pop();else{if(i[o].isholepath=!!m,m){for(var w=0,S=[-1,-1,u+1,f+1],k=0;k<o;k++)!i[k].isholepath&&t.boundingboxincludes(i[k].boundingbox,i[o].boundingbox)&&t.boundingboxincludes(S,i[k].boundingbox)&&t.pointinpoly(i[o].points[0],i[k].points)&&(w=k,S=i[k].boundingbox);i[w].holechildren.push(o)}o++}a++}return i},this.boundingboxincludes=function(r,s){return r[0]<s[0]&&r[1]<s[1]&&r[2]>s[2]&&r[3]>s[3]},this.batchpathscan=function(r,s){var i=[];for(var o in r)r.hasOwnProperty(o)&&(i[o]=t.pathscan(r[o],s));return i},this.internodes=function(r,s){var i=[],o=0,a=0,l=0,c=0,u=0,f,d;for(f=0;f<r.length;f++)for(i[f]={},i[f].points=[],i[f].boundingbox=r[f].boundingbox,i[f].holechildren=r[f].holechildren,i[f].isholepath=r[f].isholepath,o=r[f].points.length,d=0;d<o;d++)a=(d+1)%o,l=(d+2)%o,c=(d-1+o)%o,u=(d-2+o)%o,s.rightangleenhance&&t.testrightangle(r[f],u,c,d,a,l)&&(i[f].points.length>0&&(i[f].points[i[f].points.length-1].linesegment=t.getdirection(i[f].points[i[f].points.length-1].x,i[f].points[i[f].points.length-1].y,r[f].points[d].x,r[f].points[d].y)),i[f].points.push({x:r[f].points[d].x,y:r[f].points[d].y,linesegment:t.getdirection(r[f].points[d].x,r[f].points[d].y,(r[f].points[d].x+r[f].points[a].x)/2,(r[f].points[d].y+r[f].points[a].y)/2)})),i[f].points.push({x:(r[f].points[d].x+r[f].points[a].x)/2,y:(r[f].points[d].y+r[f].points[a].y)/2,linesegment:t.getdirection((r[f].points[d].x+r[f].points[a].x)/2,(r[f].points[d].y+r[f].points[a].y)/2,(r[f].points[a].x+r[f].points[l].x)/2,(r[f].points[a].y+r[f].points[l].y)/2)});return i},this.testrightangle=function(r,s,i,o,a,l){return r.points[o].x===r.points[s].x&&r.points[o].x===r.points[i].x&&r.points[o].y===r.points[a].y&&r.points[o].y===r.points[l].y||r.points[o].y===r.points[s].y&&r.points[o].y===r.points[i].y&&r.points[o].x===r.points[a].x&&r.points[o].x===r.points[l].x},this.getdirection=function(r,s,i,o){var a=8;return r<i?s<o?a=1:s>o?a=7:a=0:r>i?s<o?a=3:s>o?a=5:a=4:s<o?a=2:s>o?a=6:a=8,a},this.batchinternodes=function(r,s){var i=[];for(var o in r)r.hasOwnProperty(o)&&(i[o]=t.internodes(r[o],s));return i},this.tracepath=function(r,s,i){var o=0,a,l,c,u={};for(u.segments=[],u.boundingbox=r.boundingbox,u.holechildren=r.holechildren,u.isholepath=r.isholepath;o<r.points.length;){for(a=r.points[o].linesegment,l=-1,c=o+1;(r.points[c].linesegment===a||r.points[c].linesegment===l||l===-1)&&c<r.points.length-1;)r.points[c].linesegment!==a&&l===-1&&(l=r.points[c].linesegment),c++;c===r.points.length-1&&(c=0),u.segments=u.segments.concat(t.fitseq(r,s,i,o,c)),c>0?o=c:o=r.points.length}return u},this.fitseq=function(r,s,i,o,a){if(a>r.points.length||a<0)return[];var l=o,c=0,u=!0,f,d,g,m=a-o;m<0&&(m+=r.points.length);for(var v=(r.points[a].x-r.points[o].x)/m,b=(r.points[a].y-r.points[o].y)/m,x=(o+1)%r.points.length,w;x!=a;)w=x-o,w<0&&(w+=r.points.length),f=r.points[o].x+v*w,d=r.points[o].y+b*w,g=(r.points[x].x-f)*(r.points[x].x-f)+(r.points[x].y-d)*(r.points[x].y-d),g>s&&(u=!1),g>c&&(l=x,c=g),x=(x+1)%r.points.length;if(u)return[{type:"L",x1:r.points[o].x,y1:r.points[o].y,x2:r.points[a].x,y2:r.points[a].y}];var S=l;u=!0,c=0;var k=(S-o)/m,O=(1-k)*(1-k),M=2*(1-k)*k,E=k*k,T=(O*r.points[o].x+E*r.points[a].x-r.points[S].x)/-M,P=(O*r.points[o].y+E*r.points[a].y-r.points[S].y)/-M;for(x=o+1;x!=a;)k=(x-o)/m,O=(1-k)*(1-k),M=2*(1-k)*k,E=k*k,f=O*r.points[o].x+M*T+E*r.points[a].x,d=O*r.points[o].y+M*P+E*r.points[a].y,g=(r.points[x].x-f)*(r.points[x].x-f)+(r.points[x].y-d)*(r.points[x].y-d),g>i&&(u=!1),g>c&&(l=x,c=g),x=(x+1)%r.points.length;if(u)return[{type:"Q",x1:r.points[o].x,y1:r.points[o].y,x2:T,y2:P,x3:r.points[a].x,y3:r.points[a].y}];var A=S;return t.fitseq(r,s,i,o,A).concat(t.fitseq(r,s,i,A,a))},this.batchtracepaths=function(r,s,i){var o=[];for(var a in r)r.hasOwnProperty(a)&&o.push(t.tracepath(r[a],s,i));return o},this.batchtracelayers=function(r,s,i){var o=[];for(var a in r)r.hasOwnProperty(a)&&(o[a]=t.batchtracepaths(r[a],s,i));return o},this.roundtodec=function(r,s){return+r.toFixed(s)},this.svgpathstring=function(r,s,i,o){var a=r.layers[s],l=a[i],c="",u;if(o.linefilter&&l.segments.length<3)return c;if(c="<path "+(o.desc?'desc="l '+s+" p "+i+'" ':"")+t.tosvgcolorstr(r.palette[s],o)+'d="',o.roundcoords===-1){for(c+="M "+l.segments[0].x1*o.scale+" "+l.segments[0].y1*o.scale+" ",u=0;u<l.segments.length;u++)c+=l.segments[u].type+" "+l.segments[u].x2*o.scale+" "+l.segments[u].y2*o.scale+" ",l.segments[u].hasOwnProperty("x3")&&(c+=l.segments[u].x3*o.scale+" "+l.segments[u].y3*o.scale+" ");c+="Z "}else{for(c+="M "+t.roundtodec(l.segments[0].x1*o.scale,o.roundcoords)+" "+t.roundtodec(l.segments[0].y1*o.scale,o.roundcoords)+" ",u=0;u<l.segments.length;u++)c+=l.segments[u].type+" "+t.roundtodec(l.segments[u].x2*o.scale,o.roundcoords)+" "+t.roundtodec(l.segments[u].y2*o.scale,o.roundcoords)+" ",l.segments[u].hasOwnProperty("x3")&&(c+=t.roundtodec(l.segments[u].x3*o.scale,o.roundcoords)+" "+t.roundtodec(l.segments[u].y3*o.scale,o.roundcoords)+" ");c+="Z "}for(var f=0;f<l.holechildren.length;f++){var d=a[l.holechildren[f]];if(o.roundcoords===-1)for(d.segments[d.segments.length-1].hasOwnProperty("x3")?c+="M "+d.segments[d.segments.length-1].x3*o.scale+" "+d.segments[d.segments.length-1].y3*o.scale+" ":c+="M "+d.segments[d.segments.length-1].x2*o.scale+" "+d.segments[d.segments.length-1].y2*o.scale+" ",u=d.segments.length-1;u>=0;u--)c+=d.segments[u].type+" ",d.segments[u].hasOwnProperty("x3")&&(c+=d.segments[u].x2*o.scale+" "+d.segments[u].y2*o.scale+" "),c+=d.segments[u].x1*o.scale+" "+d.segments[u].y1*o.scale+" ";else for(d.segments[d.segments.length-1].hasOwnProperty("x3")?c+="M "+t.roundtodec(d.segments[d.segments.length-1].x3*o.scale)+" "+t.roundtodec(d.segments[d.segments.length-1].y3*o.scale)+" ":c+="M "+t.roundtodec(d.segments[d.segments.length-1].x2*o.scale)+" "+t.roundtodec(d.segments[d.segments.length-1].y2*o.scale)+" ",u=d.segments.length-1;u>=0;u--)c+=d.segments[u].type+" ",d.segments[u].hasOwnProperty("x3")&&(c+=t.roundtodec(d.segments[u].x2*o.scale)+" "+t.roundtodec(d.segments[u].y2*o.scale)+" "),c+=t.roundtodec(d.segments[u].x1*o.scale)+" "+t.roundtodec(d.segments[u].y1*o.scale)+" ";c+="Z "}if(c+='" />',o.lcpr||o.qcpr){for(u=0;u<l.segments.length;u++)l.segments[u].hasOwnProperty("x3")&&o.qcpr&&(c+='<circle cx="'+l.segments[u].x2*o.scale+'" cy="'+l.segments[u].y2*o.scale+'" r="'+o.qcpr+'" fill="cyan" stroke-width="'+o.qcpr*.2+'" stroke="black" />',c+='<circle cx="'+l.segments[u].x3*o.scale+'" cy="'+l.segments[u].y3*o.scale+'" r="'+o.qcpr+'" fill="white" stroke-width="'+o.qcpr*.2+'" stroke="black" />',c+='<line x1="'+l.segments[u].x1*o.scale+'" y1="'+l.segments[u].y1*o.scale+'" x2="'+l.segments[u].x2*o.scale+'" y2="'+l.segments[u].y2*o.scale+'" stroke-width="'+o.qcpr*.2+'" stroke="cyan" />',c+='<line x1="'+l.segments[u].x2*o.scale+'" y1="'+l.segments[u].y2*o.scale+'" x2="'+l.segments[u].x3*o.scale+'" y2="'+l.segments[u].y3*o.scale+'" stroke-width="'+o.qcpr*.2+'" stroke="cyan" />'),!l.segments[u].hasOwnProperty("x3")&&o.lcpr&&(c+='<circle cx="'+l.segments[u].x2*o.scale+'" cy="'+l.segments[u].y2*o.scale+'" r="'+o.lcpr+'" fill="white" stroke-width="'+o.lcpr*.2+'" stroke="black" />');for(var f=0;f<l.holechildren.length;f++){var d=a[l.holechildren[f]];for(u=0;u<d.segments.length;u++)d.segments[u].hasOwnProperty("x3")&&o.qcpr&&(c+='<circle cx="'+d.segments[u].x2*o.scale+'" cy="'+d.segments[u].y2*o.scale+'" r="'+o.qcpr+'" fill="cyan" stroke-width="'+o.qcpr*.2+'" stroke="black" />',c+='<circle cx="'+d.segments[u].x3*o.scale+'" cy="'+d.segments[u].y3*o.scale+'" r="'+o.qcpr+'" fill="white" stroke-width="'+o.qcpr*.2+'" stroke="black" />',c+='<line x1="'+d.segments[u].x1*o.scale+'" y1="'+d.segments[u].y1*o.scale+'" x2="'+d.segments[u].x2*o.scale+'" y2="'+d.segments[u].y2*o.scale+'" stroke-width="'+o.qcpr*.2+'" stroke="cyan" />',c+='<line x1="'+d.segments[u].x2*o.scale+'" y1="'+d.segments[u].y2*o.scale+'" x2="'+d.segments[u].x3*o.scale+'" y2="'+d.segments[u].y3*o.scale+'" stroke-width="'+o.qcpr*.2+'" stroke="cyan" />'),!d.segments[u].hasOwnProperty("x3")&&o.lcpr&&(c+='<circle cx="'+d.segments[u].x2*o.scale+'" cy="'+d.segments[u].y2*o.scale+'" r="'+o.lcpr+'" fill="white" stroke-width="'+o.lcpr*.2+'" stroke="black" />')}}return c},this.getsvgstring=function(r,s){s=t.checkoptions(s);for(var i=r.width*s.scale,o=r.height*s.scale,a="<svg "+(s.viewbox?'viewBox="0 0 '+i+" "+o+'" ':'width="'+i+'" height="'+o+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+t.versionnumber+'" >',l=0;l<r.layers.length;l++)for(var c=0;c<r.layers[l].length;c++)r.layers[l][c].isholepath||(a+=t.svgpathstring(r,l,c,s));return a+="</svg>",a},this.compareNumbers=function(r,s){return r-s},this.torgbastr=function(r){return"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"},this.tosvgcolorstr=function(r,s){return'fill="rgb('+r.r+","+r.g+","+r.b+')" stroke="rgb('+r.r+","+r.g+","+r.b+')" stroke-width="'+s.strokewidth+'" opacity="'+r.a/255+'" '},this.appendSVGString=function(r,s){var i;s?(i=document.getElementById(s),i||(i=document.createElement("div"),i.id=s,document.body.appendChild(i))):(i=document.createElement("div"),document.body.appendChild(i)),i.innerHTML+=r},this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.blur=function(r,s,i){var o,a,l,c,u,f,d,g,m,v,b={width:r.width,height:r.height,data:[]};if(s=Math.floor(s),s<1)return r;s>5&&(s=5),i=Math.abs(i),i>1024&&(i=1024);var x=t.gks[s-1];for(a=0;a<r.height;a++)for(o=0;o<r.width;o++){for(f=0,d=0,g=0,m=0,v=0,l=-s;l<s+1;l++)o+l>0&&o+l<r.width&&(u=(a*r.width+o+l)*4,f+=r.data[u]*x[l+s],d+=r.data[u+1]*x[l+s],g+=r.data[u+2]*x[l+s],m+=r.data[u+3]*x[l+s],v+=x[l+s]);u=(a*r.width+o)*4,b.data[u]=Math.floor(f/v),b.data[u+1]=Math.floor(d/v),b.data[u+2]=Math.floor(g/v),b.data[u+3]=Math.floor(m/v)}var w=new Uint8ClampedArray(b.data);for(a=0;a<r.height;a++)for(o=0;o<r.width;o++){for(f=0,d=0,g=0,m=0,v=0,l=-s;l<s+1;l++)a+l>0&&a+l<r.height&&(u=((a+l)*r.width+o)*4,f+=w[u]*x[l+s],d+=w[u+1]*x[l+s],g+=w[u+2]*x[l+s],m+=w[u+3]*x[l+s],v+=x[l+s]);u=(a*r.width+o)*4,b.data[u]=Math.floor(f/v),b.data[u+1]=Math.floor(d/v),b.data[u+2]=Math.floor(g/v),b.data[u+3]=Math.floor(m/v)}for(a=0;a<r.height;a++)for(o=0;o<r.width;o++)u=(a*r.width+o)*4,c=Math.abs(b.data[u]-r.data[u])+Math.abs(b.data[u+1]-r.data[u+1])+Math.abs(b.data[u+2]-r.data[u+2])+Math.abs(b.data[u+3]-r.data[u+3]),c>i&&(b.data[u]=r.data[u],b.data[u+1]=r.data[u+1],b.data[u+2]=r.data[u+2],b.data[u+3]=r.data[u+3]);return b},this.loadImage=function(r,s,i){var o=new Image;i&&i.corsenabled&&(o.crossOrigin="Anonymous"),o.onload=function(){var a=document.createElement("canvas");a.width=o.width,a.height=o.height;var l=a.getContext("2d");l.drawImage(o,0,0),s(a)},o.src=r},this.getImgdata=function(r){var s=r.getContext("2d");return s.getImageData(0,0,r.width,r.height)},this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}],this.drawLayers=function(r,s,i,o){i=i||1;var a,l,c,u,f,d;o?(d=document.getElementById(o),d||(d=document.createElement("div"),d.id=o,document.body.appendChild(d))):(d=document.createElement("div"),document.body.appendChild(d));for(f in r)if(r.hasOwnProperty(f)){a=r[f][0].length,l=r[f].length;var g=document.createElement("canvas");g.width=a*i,g.height=l*i;var m=g.getContext("2d");for(u=0;u<l;u++)for(c=0;c<a;c++)m.fillStyle=t.torgbastr(s[r[f][u][c]%s.length]),m.fillRect(c*i,u*i,i,i);d.appendChild(g)}}}n.exports=new e})()})(CI);var oW=CI.exports;function aW(){const[n,e]=y.useState(null),[t,r]=y.useState(null),[s,i]=y.useState("Untitled Design"),[o]=y.useState("demo-user-id"),[a,l]=y.useState(!1),[c,u]=y.useState(7),[f,d]=y.useState(!1),[g,m]=y.useState(null),[v,b]=y.useState([]),[x,w]=y.useState(!1),S=y.useCallback(q=>{const re=new Set;return q&&q.getObjects().forEach(V=>{V.fill&&re.add(V.fill.toLowerCase()),V.type==="group"&&V.getObjects&&V.getObjects().forEach(K=>{K.fill&&re.add(K.fill.toLowerCase())})}),Array.from(re)},[]);y.useEffect(()=>{if(n){const q=()=>{const re=S(n);b(re)};return n.on("object:added",q),n.on("object:removed",q),n.on("object:modified",q),q(),()=>{n.off("object:added",q),n.off("object:removed",q),n.off("object:modified",q)}}},[n,S]);const[k,O]=y.useState([]),[M,E]=y.useState(-1),{theme:T,setTheme:P}=xz(),A=()=>{P(T==="dark"?"light":"dark")},{toast:D}=ul(),N=ly(),R=y.useCallback(q=>{if(n)try{const re=n.toJSON(),V={canvasState:JSON.stringify(re),timestamp:Date.now(),action:q},K=k.slice(0,M+1);K.push(V),K.length>50?K.shift():E(Y=>Y+1),O(K),console.log("Saved to history:",q,"Total states:",K.length)}catch(re){console.error("Error saving to history:",re)}},[n,k,M]),H=y.useCallback(()=>{if(!n||M<=0)return;const q=k[M-1];if(q)try{n.loadFromJSON(q.canvasState,()=>{n.renderAll(),E(V=>V-1),console.log("Undo action:",q.action);const re=S(n);b(re)})}catch(re){console.error("Undo error:",re),D({variant:"destructive",title:"Undo Failed",description:"Could not undo the last action. Please try again."})}},[n,k,M,S,D]),ne=y.useCallback(()=>{if(!n||M>=k.length-1)return;const q=k[M+1];if(q)try{n.loadFromJSON(q.canvasState,()=>{n.renderAll(),E(V=>V+1),console.log("Redo action:",q.action);const re=S(n);b(re)})}catch(re){console.error("Redo error:",re),D({variant:"destructive",title:"Redo Failed",description:"Could not redo the action. Please try again."})}},[n,k,M,S,D]),Q=mT({mutationFn:async q=>(await NM("POST","/api/designs",q)).json(),onSuccess:()=>{D({title:"Design Saved",description:"Your design has been saved successfully."}),N.invalidateQueries({queryKey:["/api/designs"]})},onError:()=>{D({variant:"destructive",title:"Save Failed",description:"Failed to save your design. Please try again."})}}),oe=y.useCallback(async(q,re)=>{if(n){l(!0);try{D({title:"Processing Image",description:"Starting auto-vectorization..."});const V=new Image;V.crossOrigin="anonymous",await new Promise((de,Se)=>{V.onload=de,V.onerror=Se,V.src=q});const K=document.createElement("canvas"),Y=K.getContext("2d"),X=800;let{width:se,height:ae}=V;if(se>X||ae>X){const de=Math.min(X/se,X/ae);se=Math.floor(se*de),ae=Math.floor(ae*de)}K.width=se,K.height=ae,Y.drawImage(V,0,0,se,ae);const G={numberofcolors:c,mincolorratio:.02,colorsampling:1,scale:1,simplifytolerance:0,roundcoords:1,ltres:1,qtres:1,pathomit:8,blurradius:0,blurdelta:20,linefilter:!1,specklefilter:!0,colorquantcycles:3,layering:0,strokewidth:1,linefilter_strength:.01,desc:!1,viewbox:!1};let ie;try{const de=Y.getImageData(0,0,K.width,K.height),Se=new Promise((Ue,pt)=>{try{const xt=oW.imagedataToSVG(de,G);Ue(xt)}catch(xt){pt(xt)}}),me=new Promise((Ue,pt)=>{setTimeout(()=>pt(new Error("Vectorization timeout")),1e4)});ie=await Promise.race([Se,me])}catch(de){throw console.warn("ImageTracer failed:",de),new Error("Vectorization failed")}K0(ie).then(de=>{const Se=de.objects;if(!n||!Se||Se.length===0)return;let me;Se.length===1?me=Se[0]:me=new Dn(Se,{interactive:!0,subTargetCheck:!0});const Ue=n.getWidth(),pt=n.getHeight(),xt=me.width||1,Fi=me.height||1,Nt=Ue*.9/xt,Un=pt*.9/Fi,Gr=Math.min(Nt,Un,1);me.set({left:Ue/2,top:pt/2,originX:"center",originY:"center",scaleX:Gr,scaleY:Gr,selectable:!0,evented:!0,hasControls:!0,hasBorders:!0}),n.add(me),R("Auto-Vectorize Complete"),n.renderAll(),m(me),d(!0),D({title:"Vectorization Complete",description:"Image successfully converted to editable vector format"})})}catch(V){console.error("Auto-vectorization error:",V),D({variant:"destructive",title:"Vectorization Failed",description:"Could not process the image. Please try again."})}finally{l(!1)}}},[n,c,D]),U=y.useCallback(async()=>{if(!n||!g)return;const q=g.left,re=g.top,V=g.scaleX,K=g.scaleY;try{D({title:"Refining Vector",description:"Removing small artifacts and noise..."});let Y=[];if(g.type==="group"?Y=g.getObjects():Y=[g],Y.length===0)return;const X=n.getWidth()*n.getHeight(),se=Math.sqrt(X*1e-4),ae=Y.filter(ie=>{const de=ie.getBoundingRect();return Math.max(de.width,de.height)>=se}),G=Y.length-ae.length;if(G>0){n.remove(g);let ie;if(ae.length===1)ie=ae[0];else if(ae.length>1)ie=new Dn(ae,{interactive:!0,subTargetCheck:!0});else{ie=g,n.add(ie),D({title:"Vector Already Clean",description:"No artifacts found to remove"}),d(!1),m(null);return}ie.set({left:q,top:re,scaleX:V,scaleY:K,selectable:!0,evented:!0,hasControls:!0,hasBorders:!0}),n.add(ie),R("Vector Refined"),n.renderAll(),D({title:"Vector Refined",description:`Removed ${G} small artifacts and dust particles`})}else D({title:"Vector Already Clean",description:"No small artifacts found to remove"});d(!1),m(null)}catch(Y){console.error("Vector refinement error:",Y),D({variant:"destructive",title:"Refinement Failed",description:"Could not refine the vector. Please try again."})}},[n,g,D]),$=y.useCallback(q=>{!n||!t||(t.type==="path"||t.type==="circle"||t.type==="rect")&&(R(`Color Select: ${q}`),t.set("fill",q),n.renderAll())},[n,t,R]),J=y.useCallback((q,re)=>{if(!n)return;R(`Color Replace: ${q}  ${re}`),n.getObjects().forEach(K=>{K.fill===q&&K.set("fill",re)}),n.renderAll()},[n,R]),ue=()=>{if(!n)return;const q=n.toJSON(),re={title:s,userId:o,canvasData:q,thumbnail:n.toDataURL({format:"png",quality:.8,multiplier:1})};Q.mutate(re)};return p.jsxs("div",{className:"h-screen flex flex-col bg-slate-50 dark:bg-slate-900 overflow-hidden","data-testid":"design-studio",children:[p.jsxs("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-2 flex items-center justify-between flex-shrink-0","data-testid":"top-navigation",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:p.jsx(An,{className:"h-4 w-4 text-white"})}),p.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent",children:"Rug Canva"})]}),p.jsxs("div",{className:"hidden md:flex items-center space-x-4 ml-8",children:[p.jsx(Tr,{href:"/",children:p.jsxs(ye,{variant:"ghost",size:"sm","data-testid":"button-home",children:[p.jsx(l_,{className:"h-3 w-3 mr-1"}),"Home"]})}),(a||v.length===0)&&p.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[p.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 whitespace-nowrap",children:["Colors: ",c]}),p.jsx("input",{type:"range",min:"4",max:"10",value:c,onChange:q=>u(parseInt(q.target.value)),className:"w-20 h-1 bg-blue-200 rounded-lg appearance-none cursor-pointer slider","data-testid":"slider-color-count",title:`Extract ${c} dominant colors`}),p.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400",children:c===4?"Min":c===10?"Max":""})]}),f&&p.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700",children:[p.jsx(ye,{size:"sm",variant:"outline",onClick:U,className:"text-xs h-6 border-green-300 text-green-700 hover:bg-green-100 dark:border-green-600 dark:text-green-400 dark:hover:bg-green-900/30","data-testid":"button-refine-vector",children:" Remove Dust/Noise"}),p.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{d(!1),m(null)},className:"h-6 w-6 p-0 text-green-600 hover:bg-green-100 dark:text-green-400 dark:hover:bg-green-900/30","data-testid":"button-dismiss-refine",children:""})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(ye,{size:"sm",variant:"outline",onClick:H,disabled:M<=0,className:"h-8 w-8 p-0",title:"Undo","data-testid":"button-undo",children:p.jsx(a4,{className:"h-3 w-3"})}),p.jsx(ye,{size:"sm",variant:"outline",onClick:ne,disabled:M>=k.length-1,className:"h-8 w-8 p-0",title:"Redo","data-testid":"button-redo",children:p.jsx(Zj,{className:"h-3 w-3"})})]}),p.jsxs(ye,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-new-project",children:[p.jsx(ld,{className:"h-3 w-3 mr-1"}),"New"]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ao,{value:s,onChange:q=>i(q.target.value),className:"w-48 text-sm",placeholder:"Design title...","data-testid":"input-design-title"}),p.jsxs(ye,{size:"sm",onClick:ue,disabled:Q.isPending,"data-testid":"button-save",children:[p.jsx(t4,{className:"h-3 w-3 mr-1"}),Q.isPending?"Saving...":"Save"]}),p.jsxs(ye,{size:"sm",variant:"outline","data-testid":"button-download",children:[p.jsx(Vj,{className:"h-3 w-3 mr-1"}),"Export"]}),p.jsx("div",{className:"md:hidden flex items-center space-x-1",children:p.jsx(Tr,{href:"/",children:p.jsx(ye,{variant:"ghost",size:"sm","data-testid":"button-home-mobile",children:p.jsx(l_,{className:"h-4 w-4"})})})}),p.jsx(ye,{variant:"ghost",size:"sm",onClick:A,"data-testid":"button-theme-toggle",children:T==="dark"?p.jsx(o4,{className:"h-4 w-4"}):p.jsx(Jj,{className:"h-4 w-4"})}),p.jsx(ye,{variant:"ghost",size:"sm","data-testid":"button-notifications",children:p.jsx(jj,{className:"h-4 w-4"})}),p.jsx(Nk,{})]})]}),p.jsxs("div",{className:"flex-1 flex overflow-hidden h-full relative",children:[p.jsx("div",{className:`bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex flex-col transition-all duration-300 ${x?"w-0":"w-80"} overflow-hidden`,children:p.jsx(eW,{onAutoVectorize:oe,canvas:n,onAIPatternGenerated:(q,re)=>{n&&K0(q).then(V=>{const K=V.objects;if(K&&K.length>0){let Y;K.length===1?Y=K[0]:Y=new Dn(K),Y.set({left:Math.random()*(n.width-200),top:Math.random()*(n.height-200),scaleX:.2,scaleY:.2}),n.add(Y),n.renderAll()}D({title:"AI Pattern Added",description:`Generated pattern "${re}" added to canvas`})}).catch(V=>{console.error("Error loading AI pattern:",V),D({variant:"destructive",title:"Error",description:"Failed to add AI pattern to canvas"})})}})}),p.jsx(ye,{variant:"outline",size:"sm",onClick:()=>w(!x),className:`absolute ${x?"left-2":"left-[310px]"} bottom-4 z-10 h-8 w-8 p-0 transition-all duration-300 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700`,"data-testid":"button-toggle-left-nav",children:x?p.jsx(Zf,{className:"h-4 w-4"}):p.jsx(Lj,{className:"h-4 w-4"})}),p.jsx("div",{className:"flex-1 flex flex-col bg-slate-100 dark:bg-slate-900 overflow-auto relative",children:p.jsx(wz,{onSelectionChange:r,onCanvasChange:q=>{e(q),setTimeout(()=>{if(q&&k.length===0){const re=q.toJSON(),V={canvasState:JSON.stringify(re),timestamp:Date.now(),action:"Initial Canvas"};O([V]),E(0)}},100)}})}),p.jsx("div",{className:"w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 flex flex-col",children:p.jsx(iW,{onColorSelect:$,onColorReplace:J,canvas:n,onHistoryAction:R})})]})]})}function lW(){return p.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:p.jsx(Zn,{className:"w-full max-w-md mx-4",children:p.jsxs(er,{className:"pt-6",children:[p.jsxs("div",{className:"flex mb-4 gap-2",children:[p.jsx(Uj,{className:"h-8 w-8 text-red-500"}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function cW(){return p.jsxs(tM,{children:[p.jsx(uh,{path:"/",component:bU}),p.jsx(uh,{path:"/home",component:xU}),p.jsx(uh,{path:"/studio",component:aW}),p.jsx(uh,{component:lW})]})}function uW(){return p.jsx(_M,{client:jM,children:p.jsx(fU,{children:p.jsx(b5,{children:p.jsxs(x5,{children:[p.jsx(X4,{}),p.jsx(cW,{})]})})})})}H2(document.getElementById("root")).render(p.jsx(uW,{}));
